"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),CurveUI=function(){function e(t,i,s){var n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4];_classCallCheck(this,e),this.scene=t,this._image=i,this._name=s,this._mat=a,this.mesh=null,this.hSize=3,this.hitSphere=null,this._hitCallback=n,this.init(),this.alphamodes=[BABYLON.Engine.ALPHA_COMBINE,BABYLON.Engine.ALPHA_ADD,BABYLON.Engine.ALPHA_SUBTRACT,BABYLON.Engine.ALPHA_MULTIPLY,BABYLON.Engine.ALPHA_MAXIMIZED]}return _createClass(e,[{key:"setMeshVals",value:function(e){this.mesh=e,this.mesh.setGaze=this.setGaze,this.mesh.endGaze=this.endGaze,this.mesh.hitTime=null,this.mesh.setTimerInterval=this.setTimerInterval,this.mesh.intervalID=null,this.mesh.hitCallback=this._hitCallback,this.mesh.isPickable=!0}},{key:"init",value:function(){var e=new BABYLON.StandardMaterial(this._name+"mat",this.scene);e.specularPower=64,e.diffuseColor=new BABYLON.Color3(1,1,1),e.emissiveColor=new BABYLON.Color3(.99,.94,.94);var t=BABYLON.Mesh.DOUBLESIDE;null==this._mat?(e.diffuseTexture=new BABYLON.Texture(this._image,this.scene),e.diffuseTexture.hasAlpha=!0,e.useLogarithmicDepth=!0,e.disableDepthWrite=!1,e.alpha=1,e.hasAlpha=!0,e.backFaceCulling=!1):(this._mat.video.pause(),this._mat.video.isPlaying=!1,this._mat.video.addEventListener("playing",function(){this._mat.video.isPlaying=!0}.bind(this)),this._mat.video.addEventListener("pause",function(){this._mat.video.isPlaying=!1}.bind(this)),e.diffuseTexture=this._mat);for(var i=[],s=0;s<this.hSize;s++){for(var n=[],a=-2;2>=a;a++){var h=a,r=a*a/5,l=s;n.push(new BABYLON.Vector3(h,r,l))}i.push(n)}var u=BABYLON.Mesh.CreateRibbon(this._name,i,!1,!1,0,this.scene,!0,t);u.scaling.x=.5,u.scaling.y=.5,u.scaling.z=.5,u.material=e,window._mat=this._mat,"vid"==this._name&&(u.actionManager=new BABYLON.ActionManager(this.scene),u.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){this._mat.video.play()}))),this.setMeshVals(u),this.generateHitSphere()}},{key:"setTimerInterval",value:function(){this.intervalID=null,this.intervalID=setInterval(this.hitCallback,2e3)}},{key:"setGaze",value:function(){this.hitTime=(new Date).getTime(),this.setTimerInterval.apply(this)}},{key:"endGaze",value:function(){var e=(new Date).getTime(),t=e-this.hitTime;return this.hitTime=null,clearInterval(this.intervalID),t}},{key:"generateHitSphere",value:function(){this.hitSphere=BABYLON.Mesh.CreateSphere(this._name+"hitSphere",16,.1,this.scene),this.hitSphere.parent=this.mesh,this.hitSphere.position.z=1,this.hitSphere.position.y=1,this.hitSphere.scaling.y=4,this.hitSphere.scaling.x=4,this.hitSphere.scaling.z=4,this.hitSphere.isVisible=!1}}]),e}();exports.CurveUI=CurveUI,module.exports=CurveUI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL3VpL2N1cnZlZHVpLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ3VydmVVSSIsIl9zY2VuZSIsIl9pbWFnZSIsIl9uYW1lIiwiX2NhbGxiYWNrIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiX21hdCIsInRoaXMiLCJzY2VuZSIsIm1lc2giLCJoU2l6ZSIsImhpdFNwaGVyZSIsIl9oaXRDYWxsYmFjayIsImluaXQiLCJhbHBoYW1vZGVzIiwiQkFCWUxPTiIsIkVuZ2luZSIsIkFMUEhBX0NPTUJJTkUiLCJBTFBIQV9BREQiLCJBTFBIQV9TVUJUUkFDVCIsIkFMUEhBX01VTFRJUExZIiwiQUxQSEFfTUFYSU1JWkVEIiwiX2l0ZW0iLCJzZXRHYXplIiwiZW5kR2F6ZSIsImhpdFRpbWUiLCJzZXRUaW1lckludGVydmFsIiwiaW50ZXJ2YWxJRCIsImhpdENhbGxiYWNrIiwiaXNQaWNrYWJsZSIsIm1hdCIsIlN0YW5kYXJkTWF0ZXJpYWwiLCJzcGVjdWxhclBvd2VyIiwiZGlmZnVzZUNvbG9yIiwiQ29sb3IzIiwiZW1pc3NpdmVDb2xvciIsInNkIiwiTWVzaCIsIkRPVUJMRVNJREUiLCJkaWZmdXNlVGV4dHVyZSIsIlRleHR1cmUiLCJoYXNBbHBoYSIsInVzZUxvZ2FyaXRobWljRGVwdGgiLCJkaXNhYmxlRGVwdGhXcml0ZSIsImFscGhhIiwiYmFja0ZhY2VDdWxsaW5nIiwidmlkZW8iLCJwYXVzZSIsImlzUGxheWluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJiaW5kIiwicGF0aHMiLCJ0IiwicGF0aCIsImsiLCJ4IiwieSIsInoiLCJwdXNoIiwiVmVjdG9yMyIsIl9jdXJ2ZVVJIiwiQ3JlYXRlUmliYm9uIiwic2NhbGluZyIsIm1hdGVyaWFsIiwid2luZG93IiwiYWN0aW9uTWFuYWdlciIsIkFjdGlvbk1hbmFnZXIiLCJyZWdpc3RlckFjdGlvbiIsIkV4ZWN1dGVDb2RlQWN0aW9uIiwiT25QaWNrVHJpZ2dlciIsInBsYXkiLCJzZXRNZXNoVmFscyIsImdlbmVyYXRlSGl0U3BoZXJlIiwic2V0SW50ZXJ2YWwiLCJEYXRlIiwiZ2V0VGltZSIsImFwcGx5IiwiZW5kIiwidGltZSIsImNsZWFySW50ZXJ2YWwiLCJDcmVhdGVTcGhlcmUiLCJwYXJlbnQiLCJwb3NpdGlvbiIsImlzVmlzaWJsZSIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFRQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOaEhDLE9BQU9DLGVBQWVDLFFBQVMsY0FDOUJDLE9BQU8sR0FHUixJQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1iLE9BQU9DLGVBQWVLLEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVosRUFBYWlCLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQlAsRUFBWW1CLFVBQVdGLEdBQWlCQyxHQUFhWCxFQUFpQlAsRUFBYWtCLEdBQXFCbEIsTUFOcGhCb0IsUUFBTyxXQUVMLFFBRkZBLEdBRUdDLEVBQVFDLEVBQVFDLEdBVTlCLEdBVnFDQyxH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Iiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEN1cnZlVUkge1xuXG4gICAgY29uc3RydWN0b3IoX3NjZW5lLCBfaW1hZ2UsIF9uYW1lLCBfY2FsbGJhY2sgPSBudWxsLCBfbWF0ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnNjZW5lID0gX3NjZW5lO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IF9pbWFnZTtcbiAgICAgICAgdGhpcy5fbmFtZSA9IF9uYW1lO1xuICAgICAgICB0aGlzLl9tYXQgPSBfbWF0O1xuICAgICAgICB0aGlzLm1lc2ggPSBudWxsO1xuICAgICAgICB0aGlzLmhTaXplID0gMztcbiAgICAgICAgdGhpcy5oaXRTcGhlcmUgPSBudWxsO1xuICAgICAgICB0aGlzLl9oaXRDYWxsYmFjayA9IF9jYWxsYmFjaztcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIHRoaXMuYWxwaGFtb2RlcyA9IFtcblx0XHRcdEJBQllMT04uRW5naW5lLkFMUEhBX0NPTUJJTkUsXG5cdFx0XHRCQUJZTE9OLkVuZ2luZS5BTFBIQV9BREQsXG5cdFx0XHRCQUJZTE9OLkVuZ2luZS5BTFBIQV9TVUJUUkFDVCxcblx0XHRcdEJBQllMT04uRW5naW5lLkFMUEhBX01VTFRJUExZLFxuXHRcdFx0QkFCWUxPTi5FbmdpbmUuQUxQSEFfTUFYSU1JWkVEXG5cdFx0XTtcbiAgICB9XG5cblxuICAgIHNldE1lc2hWYWxzKF9pdGVtKXtcbiAgICBcdHRoaXMubWVzaCA9IF9pdGVtO1xuXHRcdHRoaXMubWVzaC5zZXRHYXplID0gdGhpcy5zZXRHYXplO1xuXHRcdHRoaXMubWVzaC5lbmRHYXplID0gdGhpcy5lbmRHYXplO1xuXHRcdHRoaXMubWVzaC5oaXRUaW1lID0gbnVsbDtcblx0XHR0aGlzLm1lc2guc2V0VGltZXJJbnRlcnZhbCA9IHRoaXMuc2V0VGltZXJJbnRlcnZhbDtcblx0XHR0aGlzLm1lc2guaW50ZXJ2YWxJRCA9IG51bGw7XG4gICAgXHR0aGlzLm1lc2guaGl0Q2FsbGJhY2sgPSB0aGlzLl9oaXRDYWxsYmFjaztcbiAgICBcdHRoaXMubWVzaC5pc1BpY2thYmxlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpbml0KCl7XG4gICAgXHR2YXIgbWF0ID0gbmV3IEJBQllMT04uU3RhbmRhcmRNYXRlcmlhbCh0aGlzLl9uYW1lKyBcIm1hdFwiLCB0aGlzLnNjZW5lICk7XG4gICAgXHRtYXQuc3BlY3VsYXJQb3dlciA9IDY0O1xuICAgICAgICBtYXQuZGlmZnVzZUNvbG9yID0gbmV3IEJBQllMT04uQ29sb3IzKDEuMDAsIDEuMDAsIDEuMDApO1xuICAgICAgICBtYXQuZW1pc3NpdmVDb2xvciA9IG5ldyBCQUJZTE9OLkNvbG9yMygwLjk5LCAwLjk0LCAwLjk0KTtcbiAgICBcdHZhciBzZCA9IEJBQllMT04uTWVzaC5ET1VCTEVTSURFO1xuICAgIFx0aWYodGhpcy5fbWF0ICA9PSBudWxsICl7XG4gICAgXHRcdG1hdC5kaWZmdXNlVGV4dHVyZSA9IG5ldyBCQUJZTE9OLlRleHR1cmUodGhpcy5faW1hZ2UsIHRoaXMuc2NlbmUpO1xuXHQgICAgXHRtYXQuZGlmZnVzZVRleHR1cmUuaGFzQWxwaGEgPSB0cnVlO1xuXHQgICAgXHRtYXQudXNlTG9nYXJpdGhtaWNEZXB0aCA9IHRydWU7XG5cdCAgICBcdG1hdC5kaXNhYmxlRGVwdGhXcml0ZSA9IGZhbHNlO1xuXHRcdCAgXHRtYXQuYWxwaGEgPSAxO1xuXHRcdCAgXHRtYXQuaGFzQWxwaGEgPSB0cnVlO1xuXHRcdCAgXHRtYXQuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XG5cdFx0ICB9ZWxzZXtcblx0XHQgIFx0IHRoaXMuX21hdC52aWRlby5wYXVzZSgpO1xuXHRcdCAgXHQgdGhpcy5fbWF0LnZpZGVvLmlzUGxheWluZyA9IGZhbHNlO1xuXHRcdCAgXHQgdGhpcy5fbWF0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCBmdW5jdGlvbigpe1xuXHRcdFx0ICAgICAgdGhpcy5fbWF0LnZpZGVvLmlzUGxheWluZyA9IHRydWU7XG5cdFx0XHQgfS5iaW5kKHRoaXMpKVxuXHRcdFx0IHRoaXMuX21hdC52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgICAgdGhpcy5fbWF0LnZpZGVvLmlzUGxheWluZyA9IGZhbHNlO1xuXHRcdFx0ICB9LmJpbmQodGhpcykpXG5cbiAgICAgICAgICAgICBtYXQuZGlmZnVzZVRleHR1cmUgPSB0aGlzLl9tYXQ7XG5cdFx0ICB9XG4gICAgXHRcblx0XHQvLyBwYXJhYm9sYVxuXHRcdHZhciBwYXRocyA9IFtdO1xuXHRcdGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5oU2l6ZTsgdCsrKSB7XG5cdFx0XHR2YXIgcGF0aCA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgayA9IC0yOyBrIDw9IDI7IGsrKykge1xuXHRcdFx0ICB2YXIgeCA9IGs7XG5cdFx0XHQgIHZhciB5ID0gKGsgKiBrKSAvIDU7XG5cdFx0XHQgIHZhciB6ID0gdDtcblx0XHRcdCAgcGF0aC5wdXNoKG5ldyBCQUJZTE9OLlZlY3RvcjMoeCwgeSwgeikpO1xuXHRcdFx0fVxuXHRcdFx0cGF0aHMucHVzaChwYXRoKTtcblx0XHR9XG5cdFx0XG5cdFx0dmFyIF9jdXJ2ZVVJID0gQkFCWUxPTi5NZXNoLkNyZWF0ZVJpYmJvbih0aGlzLl9uYW1lLCBwYXRocywgZmFsc2UsIGZhbHNlLCAwLCB0aGlzLnNjZW5lLCB0cnVlLCBzZCk7XG5cdFx0X2N1cnZlVUkuc2NhbGluZy54ID0gMC41O1xuXHRcdF9jdXJ2ZVVJLnNjYWxpbmcueSA9IDAuNTtcblx0XHRfY3VydmVVSS5zY2FsaW5nLnogPSAwLjU7XG5cdFx0X2N1cnZlVUkubWF0ZXJpYWwgPSBtYXQ7XG5cdFx0d2luZG93Ll9tYXQgPSB0aGlzLl9tYXQ7XG5cdFx0aWYodGhpcy5fbmFtZSA9PSBcInZpZFwiKXtcblx0XHRcdF9jdXJ2ZVVJLmFjdGlvbk1hbmFnZXIgPSBuZXcgQkFCWUxPTi5BY3Rpb25NYW5hZ2VyKHRoaXMuc2NlbmUpO1xuXHRcdCAgICBfY3VydmVVSS5hY3Rpb25NYW5hZ2VyLnJlZ2lzdGVyQWN0aW9uKG5ldyBCQUJZTE9OLkV4ZWN1dGVDb2RlQWN0aW9uKEJBQllMT04uQWN0aW9uTWFuYWdlci5PblBpY2tUcmlnZ2VyLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRoaXMuX21hdC52aWRlby5wbGF5KCk7XG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcdFxuXG5cdFx0Ly9fY3VydmVVSS5jaGVja0NvbGxpc2lvbnMgPSB0cnVlO1xuXHRcdHRoaXMuc2V0TWVzaFZhbHMoX2N1cnZlVUkpO1xuXHRcdHRoaXMuZ2VuZXJhdGVIaXRTcGhlcmUoKTtcblx0IH1cblxuXHQgc2V0VGltZXJJbnRlcnZhbCgpe1xuXHQgXHR0aGlzLmludGVydmFsSUQgPSBudWxsO1xuXHQgXHR0aGlzLmludGVydmFsSUQgPSBzZXRJbnRlcnZhbCh0aGlzLmhpdENhbGxiYWNrLCAyMDAwKTtcblx0IH1cblxuXHQgc2V0R2F6ZSgpe1xuXHQgXHR0aGlzLmhpdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0IFx0dGhpcy5zZXRUaW1lckludGVydmFsLmFwcGx5KHRoaXMpO1xuXHQgfVxuXG5cdCBlbmRHYXplKCl7XG5cdCBcdHZhciBlbmQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHR2YXIgdGltZSA9IGVuZCAtIHRoaXMuaGl0VGltZTtcblx0XHR0aGlzLmhpdFRpbWUgPSBudWxsO1xuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElEKTtcblx0XHRyZXR1cm4gdGltZTtcblx0IH1cblxuXHQgZ2VuZXJhdGVIaXRTcGhlcmUoKXtcblx0IFx0dGhpcy5oaXRTcGhlcmUgPSBCQUJZTE9OLk1lc2guQ3JlYXRlU3BoZXJlKHRoaXMuX25hbWUrXCJoaXRTcGhlcmVcIiwgMTYsIDAuMSwgdGhpcy5zY2VuZSk7XG5cdCBcdHRoaXMuaGl0U3BoZXJlLnBhcmVudCA9IHRoaXMubWVzaDtcblx0IFx0dGhpcy5oaXRTcGhlcmUucG9zaXRpb24ueiA9IDEuMDtcblx0IFx0dGhpcy5oaXRTcGhlcmUucG9zaXRpb24ueSA9IDE7XG5cdCBcdHRoaXMuaGl0U3BoZXJlLnNjYWxpbmcueSA9IDQ7XG5cdCBcdHRoaXMuaGl0U3BoZXJlLnNjYWxpbmcueCA9IDQ7XG5cdCBcdHRoaXMuaGl0U3BoZXJlLnNjYWxpbmcueiA9IDQ7XG5cdCBcdHRoaXMuaGl0U3BoZXJlLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ3VydmVVSTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=