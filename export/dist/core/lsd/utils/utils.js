"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_libBabylon=require("../lib/babylon");Object.defineProperty(exports,"BABYLON",{enumerable:!0,get:function(){return _libBabylon.BABYLON}});var utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"defaultArgs",value:function(){var e={_name:null,_cursor:null,_hadModal:!1,_appendEL:null,_cursorVR1:null,_cursorVR2:null,_layerMask:268435455,_activeDialogLayer:268435456,_type:"FreeCamera",_position:new BABYLON.Vector3(0,0,0),_rotation:new BABYLON.Vector3(0,0,0),_diameterTop:3,_diameterBottom:3,_diameter:10,_size:10,_subdivisions:6,_tesselation:6,_thickness:3,_segements:10,_canvas:null,_material:{_texture:null,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:null},_scene:{}};return e}},{key:"returnDefaultMaterial",value:function(){return{name:"default",_texture:null,_alpha:1,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:null}}},{key:"loadScript",value:function(e,t){var n=document.querySelector("head"),a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=t,a.onreadystatechange=function(){"complete"==this.readyState&&t()},n.appendChild(a)}},{key:"randomArr",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"randomPos",value:function(e,t){return Math.random()*(t-e)+e}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"merge_objects",value:function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}},{key:"degToRad",value:function(e){return e*(Math.PI/180)}},{key:"color",value:function(){var e=arguments.length<=0||void 0===arguments[0]?125:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?127:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return null==a?new BABYLON.Color3(e/255,t/255,n/255):new BABYLON.Color4(e/255,t/255,n/255,a)}},{key:"getMaterials",value:function(e,t){e.push(this.returnDefaultMaterial());for(var n=0;n<e.length;n++)if(e[n].name==t)return void 0!=typeof e[n]._diffuseColor&&null!=e[n]._diffuseColor&&(e[n]._diffuseColor=this.getColor(e[n]._diffuseColor)),e[n]}},{key:"getColor",value:function(e){return e=e.split(","),4!=e.length?this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseFloat(e[3]))}},{key:"getVector",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"position":arguments[1];return e=e.split(","),"position"==t?new BABYLON.Vector3(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):new BABYLON.Vector3(this.degToRad(parseInt(e[0])),this.degToRad(parseInt(e[1])),this.degToRad(parseInt(e[2])))}},{key:"assetsLoad",value:function(){var e=new BABYLON.AssetsManager(this._scenes[this._activeScene]);this.jsonAssets.forEach(function(t){function n(){var n=e.addTextureTask(t.name,t.src);n.onSuccess=function(e){this._assets[e.name]=e.texture}.bind(this),n.onError=function(e){console.log(e.name+" - failed to load")}.bind(this)}switch(t.type){case"img":n();break;case"audio":break;case"video":break;case"hdr":break;default:n.apply(this)}e.load()}.bind(this)),e.onFinish=this.assetLoadingFinished.bind(this)}}]),e}();exports.utils=utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL3V0aWxzL3V0aWxzLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2xpYkJhYnlsb24iLCJyZXF1aXJlIiwiZ2V0IiwiQkFCWUxPTiIsInV0aWxzIiwidGhpcyIsIl9kZWZhdWx0cyIsIl9uYW1lIiwiX2N1cnNvciIsIl9oYWRNb2RhbCIsIl9hcHBlbmRFTCIsIl9jdXJzb3JWUjEiLCJfY3Vyc29yVlIyIiwiX2xheWVyTWFzayIsIl9hY3RpdmVEaWFsb2dMYXllciIsIl90eXBlIiwiX3Bvc2l0aW9uIiwiVmVjdG9yMyIsIl9yb3RhdGlvbiIsIl9kaWFtZXRlclRvcCIsIl9kaWFtZXRlckJvdHRvbSIsIl9kaWFtZXRlciIsIl9zaXplIiwiX3N1YmRpdmlzaW9ucyIsIl90ZXNzZWxhdGlvbiIsIl90aGlja25lc3MiLCJfc2VnZW1lbnRzIiwiX2NhbnZhcyIsIl9tYXRlcmlhbCIsIl90ZXh0dXJlIiwiX3VTY2FsZSIsIl92U2NhbGUiLCJfYmFja0ZhY2VDdWxsaW5nIiwiX3ZPZmZzZXQiLCJfdU9mZnNldCIsIl9oYXNBbHBoYSIsIl9kaWZmdXNlQ29sb3IiLCJfc2NlbmUiLCJuYW1lIiwiX2FscGhhIiwiX1NjcmlwdFNyYyIsIl9DYWxsYmFjayIsIl9IZWFkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX1NjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwic3JjIiwib25sb2FkIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImFwcGVuZENoaWxkIiwiYXJyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibWluIiwibWF4IiwiczQiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIm9iajEiLCJvYmoyIiwib2JqMyIsImF0dHJuYW1lIiwiZGVncmVlcyIsIlBJIiwiciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImciLCJiIiwiYSIsIkNvbG9yMyIsIkNvbG9yNCIsIl9tYXRlcmlhbHMiLCJwdXNoIiwicmV0dXJuRGVmYXVsdE1hdGVyaWFsIiwiZ2V0Q29sb3IiLCJfZGF0YVN0cmluZyIsInNwbGl0IiwiY29sb3IiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJkZWdUb1JhZCIsImxvYWRlciIsIkFzc2V0c01hbmFnZXIiLCJfc2NlbmVzIiwiX2FjdGl2ZVNjZW5lIiwianNvbkFzc2V0cyIsImZvckVhY2giLCJvYmoiLCJpbWdBc3NldCIsImltZyIsImFkZFRleHR1cmVUYXNrIiwib25TdWNjZXNzIiwidCIsIl9hc3NldHMiLCJ0ZXh0dXJlIiwiYmluZCIsIm9uRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYXBwbHkiLCJsb2FkIiwib25GaW5pc2giLCJhc3NldExvYWRpbmdGaW5pc2hlZCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFRQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOaEhDLE9BQU9DLGVBQWVDLFFBQVMsY0FDOUJDLE9BQU8sR0FHUixJQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1iLE9BQU9DLGVBQWVLLEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVosRUFBYWlCLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQlAsRUFBWW1CLFVBQVdGLEdBQWlCQyxHQUFhWCxFQUFpQlAsRUFBYWtCLEdBQXFCbEIsTUFJN2hCb0IsWUFBY0MsUUFWTSxpQkFZeEJuQixRQUFPQyxlQUFlQyxRQUFTLFdBQzlCUyxZQUFZLEVBQ1pTLElBQUssV0FDSixNQUFPRixhQWZBRyxVQW1CVCxJQWxCYUMsT0FBSyxXQW1CakIsUUFuQllBLEtBb0JYMUIsZ0JBQWdCMkIsS0FwQkxELEdBeVRaLE1BbFNBbEIsY0F2QllrQixFQUFLLE9Bd0JoQlIsSUFBSyxjQVFMWCxNQXpCaUIsV0FJakIsR0FBSXFCLElBRUZDLE1BQU0sS0FDTkMsUUFBUyxLQUNUQyxXQUFVLEVBQ1ZDLFVBQVUsS0FDVkMsV0FBWSxLQUNaQyxXQUFZLEtBQ1pDLFdBQVksVUFDWkMsbUJBQW9CLFVBQ3BCQyxNQUFNLGFBQ05DLFVBQVUsR0FBSWIsU0FBUWMsUUFBUSxFQUFHLEVBQUcsR0FDcENDLFVBQVUsR0FBSWYsU0FBUWMsUUFBUSxFQUFHLEVBQUcsR0FDcENFLGFBQWEsRUFDYkMsZ0JBQWdCLEVBQ2hCQyxVQUFVLEdBQ1ZDLE1BQU0sR0FDTkMsY0FBYyxFQUNkQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWEMsV0FBVyxHQUNYQyxRQUFRLEtBQ1JDLFdBQ0NDLFNBQVMsS0FDVEMsUUFBUyxFQUNUQyxRQUFTLEVBQ1RDLGtCQUFrQixFQUNsQkMsU0FBVSxFQUNWQyxTQUFVLEVBQ1ZDLFdBQVUsRUFDVkMsY0FBZSxNQUVoQkMsVUFFRixPQUFPL0IsTUE4QlBWLElBQUssd0JBQ0xYLE1BeEIyQixXQUMxQixPQUNJcUQsS0FBUSxVQUNSVCxTQUFZLEtBQ1pVLE9BQVUsRUFDVlQsUUFBVyxFQUNYQyxRQUFXLEVBQ1hDLGtCQUFvQixFQUNwQkMsU0FBWSxFQUNaQyxTQUFZLEVBQ1pDLFdBQWEsRUFDYkMsY0FBaUIsU0FvQ3RCeEMsSUFBSyxhQUNMWCxNQXpCZ0IsU0FBQ3VELEVBQVlDLEdBQzdCLEdBQUlDLEdBQVNDLFNBQVNDLGNBQWMsUUFDaENDLEVBQVVGLFNBQVNHLGNBQWMsU0FDckNELEdBQVFFLEtBQU8sa0JBQ2ZGLEVBQVFHLElBQU1SLEVBQ2JLLEVBQVFJLE9BQVNSLEVBQ2hCSSxFQUFRSyxtQkFBcUIsV0FDTCxZQUFuQjdDLEtBQUs4QyxZQUNUVixLQUdIQyxFQUFNVSxZQUFZUCxNQW1DbEJqRCxJQUFLLFlBQ0xYLE1BMUJlLFNBQUNvRSxHQUNWLE1BQU9BLEdBQUlDLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVNILEVBQUk5RCxZQXFDOUNLLElBQUssWUFDTFgsTUE1QmtCLFNBQUN3RSxFQUFLQyxHQUNsQixNQUFPSixNQUFLRSxVQUFZRSxFQUFNRCxHQUFPQSxLQW1DM0M3RCxJQUFLLE9BQ0xYLE1BOUJVLFdBQ1IsUUFBUzBFLEtBQ1IsTUFBT0wsTUFBS0MsTUFBNEIsT0FBckIsRUFBSUQsS0FBS0UsV0FDekJJLFNBQVMsSUFDVEMsVUFBVSxHQUVmLE1BQU9GLEtBQU9BLElBQU8sSUFBTUEsSUFBTyxJQUFNQSxJQUFPLElBQzdDQSxJQUFPLElBQU1BLElBQU9BLElBQU9BLE9BcUM5Qi9ELElBQUssZ0JBQ0xYLE1BN0JtQixTQUFDNkUsRUFBS0MsR0FDdEIsR0FBSUMsS0FDSixLQUFLLEdBQUlDLEtBQVlILEdBQVFFLEVBQUtDLEdBQVlILEVBQUtHLEVBQ25ELEtBQUssR0FBSUEsS0FBWUYsR0FBUUMsRUFBS0MsR0FBWUYsRUFBS0UsRUFDbkQsT0FBT0QsTUEwQ1ZwRSxJQUFLLFdBQ0xYLE1BbkNjLFNBQUNpRixHQUNmLE1BQU9BLElBQVdaLEtBQUthLEdBQUssUUErQzVCdkUsSUFBSyxRQUNMWCxNQXJDVyxXQXNDVixHQXRDV21GLEdBQUNDLFVBQUE5RSxRQUFBLEdBQUErRSxTQUFBRCxVQUFBLEdBQUcsSUFBR0EsVUFBQSxHQUFDRSxFQUFDRixVQUFBOUUsUUFBQSxHQUFBK0UsU0FBQUQsVUFBQSxHQUFHLEVBQUNBLFVBQUEsR0FBQ0csRUFBQ0gsVUFBQTlFLFFBQUEsR0FBQStFLFNBQUFELFVBQUEsR0FBRyxJQUFHQSxVQUFBLEdBQUNJLEVBQUNKLFVBQUE5RSxRQUFBLEdBQUErRSxTQUFBRCxVQUFBLEdBQUcsS0FBSUEsVUFBQSxFQUMxQyxPQUFRLE9BQUxJLEVBQ0ssR0FBSXRFLFNBQVF1RSxPQUFRTixFQUFFLElBQU9HLEVBQUUsSUFBT0MsRUFBRSxLQUV4QyxHQUFJckUsU0FBUXdFLE9BQVFQLEVBQUUsSUFBT0csRUFBRSxJQUFPQyxFQUFFLElBQU1DLE1BcUR0RDdFLElBQUssZUFDTFgsTUE1Q2tCLFNBQUMyRixFQUFZckUsR0FFL0JxRSxFQUFXQyxLQUFLeEUsS0FBS3lFLHdCQUVyQixLQUFJLEdBQUl4RixHQUFJLEVBQUdBLEVBQUlzRixFQUFXckYsT0FBUUQsSUFDckMsR0FBR3NGLEVBQVd0RixHQUFHZ0QsTUFBUS9CLEVBSXhCLE1BSHlDK0QsZUFBL0JNLEdBQVd0RixHQUFHOEMsZUFBNkQsTUFBL0J3QyxFQUFXdEYsR0FBRzhDLGdCQUNuRXdDLEVBQVd0RixHQUFHOEMsY0FBZ0IvQixLQUFLMEUsU0FBU0gsRUFBV3RGLEdBQUc4QyxnQkFFcER3QyxFQUFXdEYsTUF1RHBCTSxJQUFLLFdBQ0xYLE1BOUNjLFNBQUMrRixHQUVmLE1BREFBLEdBQWNBLEVBQVlDLE1BQU0sS0FDUCxHQUF0QkQsRUFBWXpGLE9BQ1BjLEtBQUs2RSxNQUFNQyxTQUFTSCxFQUFZLElBQUtHLFNBQVNILEVBQVksSUFBS0csU0FBU0gsRUFBWSxLQUVwRjNFLEtBQUs2RSxNQUFNQyxTQUFTSCxFQUFZLElBQUtHLFNBQVNILEVBQVksSUFBS0csU0FBU0gsRUFBWSxJQUFLSSxXQUFXSixFQUFZLFFBd0R4SHBGLElBQUssWUFDTFgsTUFoRGUsU0FBQytGLEdBaURmLEdBakQ0QmpDLEdBQUlzQixVQUFBOUUsUUFBQSxHQUFBK0UsU0FBQUQsVUFBQSxHQUFHLFdBQVVBLFVBQUEsRUFFOUMsT0FEQVcsR0FBY0EsRUFBWUMsTUFBTSxLQUNyQixZQUFSbEMsRUFDSyxHQUFJNUMsU0FBUWMsUUFBUWtFLFNBQVNILEVBQVksSUFBS0csU0FBU0gsRUFBWSxJQUFLRyxTQUFTSCxFQUFZLEtBRTdGLEdBQUk3RSxTQUFRYyxRQUFRWixLQUFLZ0YsU0FBU0YsU0FBU0gsRUFBWSxLQUFNM0UsS0FBS2dGLFNBQVNGLFNBQVNILEVBQVksS0FBTTNFLEtBQUtnRixTQUFTRixTQUFTSCxFQUFZLFNBbUVqSnBGLElBQUssYUFDTFgsTUFsRGdCLFdBQ2hCLEdBQUlxRyxHQUFTLEdBQUluRixTQUFRb0YsY0FBY2xGLEtBQUttRixRQUFRbkYsS0FBS29GLGNBQ25EcEYsTUFBS3FGLFdBQVdDLFFBQVEsU0FBU0MsR0FFaEMsUUFBU0MsS0FDZCxHQUFJQyxHQUFNUixFQUFPUyxlQUFlSCxFQUFJdEQsS0FBTXNELEVBQUk1QyxJQUMzQzhDLEdBQUlFLFVBQVksU0FBU0MsR0FDakI1RixLQUFLNkYsUUFBUUQsRUFBRTNELE1BQVEyRCxFQUFFRSxTQUMvQkMsS0FBSy9GLE1BRVB5RixFQUFJTyxRQUFVLFNBQVNKLEdBQ2xCSyxRQUFRQyxJQUFJTixFQUFFM0QsS0FBTyxzQkFDeEI4RCxLQUFLL0YsTUFHTCxPQUFPdUYsRUFBSTdDLE1BQ2IsSUFBSyxNQUNKOEMsR0FDRyxNQUNKLEtBQUssUUFHRCxLQUNKLEtBQUssUUFFRCxLQUNKLEtBQUssTUFFRCxLQUNKLFNBQ0lBLEVBQVNXLE1BQU1uRyxNQUV0QmlGLEVBQU9tQixRQUVETCxLQUFLL0YsT0FFUGlGLEVBQU9vQixTQUFXckcsS0FBS3NHLHFCQUFxQlAsS0FBSy9GLFVBcFE1Q0QsSUE0VGJwQixTQUFRb0IsTUFBUUEiLCJmaWxlIjoiY29yZS9sc2QvdXRpbHMvdXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBCQUJZTE9OIH0gZnJvbSAnLi4vbGliL2JhYnlsb24nO1xuZXhwb3J0IGNsYXNzIHV0aWxze1xuLyoqXG4gKiAuLi5cbiAqIEBhdXRob3IgQnJlbmRvbiBTbWl0aFxuICogaHR0cDovL3NlYWNsb3VkOS5vcmdcbiAqIExpZ2h0V2VpZ2h0IDNEIFN5c3RlbSBEZXNpZ24gZW5naW5lXG4gKi9cblx0c3RhdGljIGRlZmF1bHRBcmdzKCl7XG5cblxuXG5cdFx0dmFyIF9kZWZhdWx0cyA9IFxuXHRcdCAgeyBcblx0XHRcdFx0X25hbWU6bnVsbCwgXG5cdFx0XHRcdF9jdXJzb3I6IG51bGwsXG5cdFx0XHRcdF9oYWRNb2RhbDpmYWxzZSxcblx0XHRcdFx0X2FwcGVuZEVMOm51bGwsXG5cdFx0XHRcdF9jdXJzb3JWUjE6IG51bGwsXG5cdFx0XHRcdF9jdXJzb3JWUjI6IG51bGwsXG5cdFx0XHRcdF9sYXllck1hc2s6IDB4MEZGRkZGRkYsXG5cdFx0XHRcdF9hY3RpdmVEaWFsb2dMYXllcjogMHgxMDAwMDAwMCxcblx0XHRcdFx0X3R5cGU6J0ZyZWVDYW1lcmEnLCBcblx0XHRcdFx0X3Bvc2l0aW9uOm5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCksIFxuXHRcdFx0XHRfcm90YXRpb246bmV3IEJBQllMT04uVmVjdG9yMygwLCAwLCAwKSwgXG5cdFx0XHRcdF9kaWFtZXRlclRvcDozLFxuXHRcdFx0XHRfZGlhbWV0ZXJCb3R0b206Myxcblx0XHRcdFx0X2RpYW1ldGVyOjEwLjAsXG5cdFx0XHRcdF9zaXplOjEwLjAsXG5cdFx0XHRcdF9zdWJkaXZpc2lvbnM6Nixcblx0XHRcdFx0X3Rlc3NlbGF0aW9uOjYsXG5cdFx0XHRcdF90aGlja25lc3M6Myxcblx0XHRcdFx0X3NlZ2VtZW50czoxMC4wLFxuXHRcdFx0XHRfY2FudmFzOm51bGwsXG5cdFx0XHRcdF9tYXRlcmlhbDp7XG5cdFx0XHRcdFx0X3RleHR1cmU6bnVsbCxcblx0XHRcdFx0XHRfdVNjYWxlOiAxLjAsXG5cdFx0XHRcdFx0X3ZTY2FsZTogMS4wLFxuXHRcdFx0XHRcdF9iYWNrRmFjZUN1bGxpbmc6IHRydWUsXG5cdFx0XHRcdFx0X3ZPZmZzZXQ6IDAuMCxcblx0XHRcdFx0XHRfdU9mZnNldDogMC4wLFxuXHRcdFx0XHRcdF9oYXNBbHBoYTpmYWxzZSxcblx0XHRcdFx0XHRfZGlmZnVzZUNvbG9yOiBudWxsLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRfc2NlbmU6e31cblx0XHRcdH1cblx0XHRyZXR1cm4gX2RlZmF1bHRzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFxuXHQgKiBzZXRzRGVmYXVsdE1hdGVyaWFsXG5cdCAqL1xuXHRzdGF0aWMgcmV0dXJuRGVmYXVsdE1hdGVyaWFsKCl7XG5cdFx0IHJldHVybiB7XG5cdCAgICAgIFwibmFtZVwiOiBcImRlZmF1bHRcIixcblx0ICAgICAgXCJfdGV4dHVyZVwiOiBudWxsLFxuXHQgICAgICBcIl9hbHBoYVwiOiAxLFxuXHQgICAgICBcIl91U2NhbGVcIjogMSxcblx0ICAgICAgXCJfdlNjYWxlXCI6IDEsXG5cdCAgICAgIFwiX2JhY2tGYWNlQ3VsbGluZ1wiOiB0cnVlLFxuXHQgICAgICBcIl92T2Zmc2V0XCI6IDAsXG5cdCAgICAgIFwiX3VPZmZzZXRcIjogMCxcblx0ICAgICAgXCJfaGFzQWxwaGFcIjogZmFsc2UsXG5cdCAgICAgIFwiX2RpZmZ1c2VDb2xvclwiOiBudWxsXG5cdCAgICB9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBnZW5lcmF0ZXMgYSByYW5kb20gaXRlbSBmcm9tIGFuIGFycmF5IGFuZCByZXR1cm5zIGl0XG5cdCAqIEBwYXJhbSBzdHJpbmcgX1NjcmlwdFNyYzogdGhlIHNjcmlwdCBzb3VyY2UgeW91IHdhbnQgdG8gbG9hZCBcblx0ICogQHBhcmFtIGZ1bmN0aW9uIF9DYWxsYmFjazogdGhlIGNhbGxiYWNrIHlvdSB3YW50IHRvIGV4ZWN0dXRlIGFmdGVyIGxvYWRcblx0ICogQHJldHVybnMgcmFuZG9tIGl0ZW0gZnJvbSBnaXZlbiBhcnJheVxuXHQgKi9cblxuXHRzdGF0aWMgbG9hZFNjcmlwdChfU2NyaXB0U3JjLCBfQ2FsbGJhY2spIHtcblx0XHR2YXIgX0hlYWQgPSAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpO1xuXHRcdHZhciBfU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdFx0X1NjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cdFx0X1NjcmlwdC5zcmMgPSBfU2NyaXB0U3JjO1xuXHRcdFx0X1NjcmlwdC5vbmxvYWQgPSBfQ2FsbGJhY2s7XG5cdFx0XHRcdF9TY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMucmVhZHlTdGF0ZSA9PSAnY29tcGxldGUnKSB7XG5cdFx0XHRcdFx0X0NhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0X0hlYWQuYXBwZW5kQ2hpbGQoX1NjcmlwdCk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBnZW5lcmF0ZXMgYSByYW5kb20gaXRlbSBmcm9tIGFuIGFycmF5IGFuZCByZXR1cm5zIGl0XG5cdCAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgeW91IHdhbnQgYSByYW5kb20gaXRlbSBmcm9tXG5cdCAqIEByZXR1cm5zIHJhbmRvbSBpdGVtIGZyb20gZ2l2ZW4gYXJyYXlcblx0ICovXG5cblx0c3RhdGljIHJhbmRvbUFycihhcnIpe1xuICAgICAgICByZXR1cm4gYXJyW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphcnIubGVuZ3RoKV07XG4gICBcdH1cblxuICAgXHQvKipcblx0ICogZ2VuZXJhdGVzIGEgcmFuZG9tIHBvc2l0aW9uIGZyb20gbWluIGFuZCBhIG1heCB2ZWN0b3IgbG9jYXRpb25cblx0ICogQHBhcmFtIG1pbiB0aGUgbWluaW11bSBudW1iZXIgeW91IHdhbnQgdG8gYXNzaW5nIHRvIHRoZSB2ZWN0b3Jcblx0ICogQHBhcmFtIG1heCB0aGUgbWF4aW11bSBudW1iZXIgeW91IHdhbnQgdG8gYXNzaW5nIHRvIHRoZSB2ZWN0b3Jcblx0ICogQHJldHVybnMgYSByYW5kb20gbnVtYmVyIHRoYXQgaXMgaW4gYmV0d2VlbiB0aGUgbWluIGFuZCBtYXggdmFsdWVzXG5cdCAqL1xuXG4gICAgc3RhdGljIHJhbmRvbVBvcyhtaW4sIG1heCl7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gICAgfVxuXG5cdC8qKlxuXHQgKiBnZW5lcmF0ZXMgZ3VpZFxuXHQgKi9cblx0c3RhdGljIGd1aWQoKSB7XG4gIFx0IGZ1bmN0aW9uIHM0KCkge1xuXHQgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG5cdCAgICAgIC50b1N0cmluZygxNilcblx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0ICB9XG5cdCAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgK1xuXHQgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPdmVyd3JpdGVzIG9iajEncyB2YWx1ZXMgd2l0aCBvYmoyJ3MgYW5kIGFkZHMgb2JqMidzIGlmIG5vbiBleGlzdGVudCBpbiBvYmoxXG5cdCAqIEBwYXJhbSBvYmoxXG5cdCAqIEBwYXJhbSBvYmoyXG5cdCAqIEByZXR1cm5zIG9iajMgYSBuZXcgb2JqZWN0IGJhc2VkIG9uIG9iajEgYW5kIG9iajJcblx0ICovXG5cdHN0YXRpYyBtZXJnZV9vYmplY3RzKG9iajEsb2JqMil7XG5cdCAgICB2YXIgb2JqMyA9IHt9O1xuXHQgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gb2JqMSkgeyBvYmozW2F0dHJuYW1lXSA9IG9iajFbYXR0cm5hbWVdOyB9XG5cdCAgICBmb3IgKHZhciBhdHRybmFtZSBpbiBvYmoyKSB7IG9iajNbYXR0cm5hbWVdID0gb2JqMlthdHRybmFtZV07IH1cblx0ICAgIHJldHVybiBvYmozO1xuXHR9XG5cblx0LyoqXG5cdCAqIGNvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucyBcblx0ICogQHBhcmFtIGRlZ3JlZXNcblx0ICogQHJldHVybnMgcmV0dW5ycyBhIHJhZGlhblxuXHQgKi9cblx0c3RhdGljIGRlZ1RvUmFkKGRlZ3JlZXMpe1xuXHRcdHJldHVybiBkZWdyZWVzICogKE1hdGguUEkgLyAxODApO1xuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybnMgYSBjb2xvcjMgb3IgY29sb3I0IG9iamVjdFxuXHQgKiBAcGFyYW0gciAxIC0gMjU1XG5cdCAqIEBwYXJhbSBnIDEgLSAyNTVcblx0ICogQHBhcmFtIGIgMSAtIDI1NVxuXHQgKiBAcGFyYW0gYWxwaGEgZmxvYXQgMS4wIC0gMC4wXG5cdCAqIEByZXR1cm5zIHJldHVucnMgYSBjb2xvcjMgb3IgY29sb3I0XG5cdCAqL1xuXHRzdGF0aWMgY29sb3IociA9IDEyNSxnID0gMCxiID0gMTI3LGEgPSBudWxsKXtcblx0XHRpZihhID09IG51bGwpe1xuXHRcdFx0cmV0dXJuIG5ldyBCQUJZTE9OLkNvbG9yMygoci8yNTUpLCAoZy8yNTUpLCAoYi8yNTUpKTtcblx0XHR9ZWxzZXtcblx0XHRcdHJldHVybiBuZXcgQkFCWUxPTi5Db2xvcjQoKHIvMjU1KSwgKGcvMjU1KSwgKGIvMjU1KSwgYSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybnMgYSBjb2xvcjMgb3IgY29sb3I0IG9iamVjdFxuXHQgKiBAcGFyYW0gX21hdGVyaWFsc1xuXHQgKiBAcGFyYW0gX25hbWVcblx0ICogQHJldHVybnMgcmV0dW5ycyBhIE1hdGVyaWFsIGZvciB0aGUgb2JqZWN0XG5cdCAqL1xuXHRzdGF0aWMgZ2V0TWF0ZXJpYWxzKF9tYXRlcmlhbHMsIF9uYW1lKXtcblx0XHQvL1RPRE86IEltYWdlc1xuXHRcdF9tYXRlcmlhbHMucHVzaCh0aGlzLnJldHVybkRlZmF1bHRNYXRlcmlhbCgpKTtcblx0XHRcblx0XHRmb3IobGV0IGkgPSAwOyBpIDwgX21hdGVyaWFscy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRpZihfbWF0ZXJpYWxzW2ldLm5hbWUgPT0gX25hbWUpe1xuXHRcdFx0XHRpZih0eXBlb2YgX21hdGVyaWFsc1tpXS5fZGlmZnVzZUNvbG9yICE9IHVuZGVmaW5lZCAmJiBfbWF0ZXJpYWxzW2ldLl9kaWZmdXNlQ29sb3IgIT0gbnVsbCl7XG5cdFx0XHRcdFx0X21hdGVyaWFsc1tpXS5fZGlmZnVzZUNvbG9yID0gdGhpcy5nZXRDb2xvcihfbWF0ZXJpYWxzW2ldLl9kaWZmdXNlQ29sb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBfbWF0ZXJpYWxzW2ldO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm5zIGEgY29sb3Jcblx0ICogQHBhcmFtIF9kYXRhU3RyaW5nIGV4cGVjdHMgYSBjb2xvciBzdHJpbmcgbGlrZSBcIjEyNywgMTI5LCAwXCIgKFJHQikgaXIgXCIxMjcsIDEyOSwgMCwgMC41XCIgKFJHQkEpXG5cdCAqIEByZXR1cm5zIHJldHVucnMgYSBjb2xvciBvYmplY3QgYWZ0ZXIgZmV0Y2hpbmcgdGhlIGNvcnJlY3QgY29sb3IgdHlwZVxuXHQgKi9cblx0c3RhdGljIGdldENvbG9yKF9kYXRhU3RyaW5nKXtcblx0XHRfZGF0YVN0cmluZyA9IF9kYXRhU3RyaW5nLnNwbGl0KFwiLFwiKTtcblx0XHRpZihfZGF0YVN0cmluZy5sZW5ndGggIT0gNCl7XG5cdFx0XHRyZXR1cm4gdGhpcy5jb2xvcihwYXJzZUludChfZGF0YVN0cmluZ1swXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzFdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMl0pKTtcblx0XHR9ZWxzZXtcblx0XHRcdHJldHVybiB0aGlzLmNvbG9yKHBhcnNlSW50KF9kYXRhU3RyaW5nWzBdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMV0pLCBwYXJzZUludChfZGF0YVN0cmluZ1syXSksIHBhcnNlRmxvYXQoX2RhdGFTdHJpbmdbM10pKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogcmV0dXJucyBhIHZlY3RvclxuXHQgKiBAcGFyYW0gX2RhdGFTdHJpbmcgZXhwZWN0cyBhIHZlY290ciBzdHJpbmcgbGlrZSBcIjEyNywgMTI5LCAwXCIgXG5cdCAqIEByZXR1cm5zIHZlY3RvclxuXHQgKi9cblx0c3RhdGljIGdldFZlY3RvcihfZGF0YVN0cmluZywgdHlwZSA9IFwicG9zaXRpb25cIil7XG5cdFx0X2RhdGFTdHJpbmcgPSBfZGF0YVN0cmluZy5zcGxpdChcIixcIik7XG5cdFx0aWYodHlwZSA9PSBcInBvc2l0aW9uXCIpe1xuXHRcdFx0cmV0dXJuIG5ldyBCQUJZTE9OLlZlY3RvcjMocGFyc2VJbnQoX2RhdGFTdHJpbmdbMF0pLCBwYXJzZUludChfZGF0YVN0cmluZ1sxXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzJdKSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4gbmV3IEJBQllMT04uVmVjdG9yMyh0aGlzLmRlZ1RvUmFkKHBhcnNlSW50KF9kYXRhU3RyaW5nWzBdKSksIHRoaXMuZGVnVG9SYWQocGFyc2VJbnQoX2RhdGFTdHJpbmdbMV0pKSwgdGhpcy5kZWdUb1JhZChwYXJzZUludChfZGF0YVN0cmluZ1syXSkpKTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXG5cdC8qXG5cdFx0bG9hZHMgYW4gYXNzZXQgXG5cdFx0c3RhdGljIGFzc2V0c0xvYWRcblx0XHRhcmd1bWVudHM6IFxuXHRcdGpzb25Bc3NldHMgPSBbXG4gICAgICAgICAgICB7bmFtZSA6IFwibG9nb1wiLCBzcmMgOiBcImJhcnR2ci9pbWcvYmFydFZSTG9nb19iLnBuZ1wiLCB0eXBlOiAnaW1hZ2UnIH0sXG4gICAgICAgICAgICB7bmFtZSA6IFwidGFyZ2V0Q2FtXCIsIHNyYzogXCJiYXJ0dnIvaW1nL3RhcmdldF9zbS5wbmdcIiwgdHlwZTogJ3ZpZGVvJ31cbiAgICAgICAgXTtcbiAgICAgICAgYXJndW1lbnRzOiBhc3NldEhvbGRlcixcbiAgICAgICAgYXJndW1lbnRzOiBjYWxsYmFjayB3aGVuIGZpbmluc2hlZCxcbiAgICAgICovXG5cblx0c3RhdGljIGFzc2V0c0xvYWQoKXtcblx0XHR2YXIgbG9hZGVyID0gbmV3IEJBQllMT04uQXNzZXRzTWFuYWdlcih0aGlzLl9zY2VuZXNbdGhpcy5fYWN0aXZlU2NlbmVdKTtcbiAgICAgICAgdGhpcy5qc29uQXNzZXRzLmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XG5cblx0ICAgICAgICBmdW5jdGlvbiBpbWdBc3NldCgpe1xuXHRcdFx0XHR2YXIgaW1nID0gbG9hZGVyLmFkZFRleHR1cmVUYXNrKG9iai5uYW1lLCBvYmouc3JjKTtcblx0XHRcdCAgICBpbWcub25TdWNjZXNzID0gZnVuY3Rpb24odCkge1xuXHRcdFx0ICAgICAgICAgICAgdGhpcy5fYXNzZXRzW3QubmFtZV0gPSB0LnRleHR1cmU7XG5cdFx0XHQgICAgfS5iaW5kKHRoaXMpO1xuXG5cdFx0XHQgICAgaW1nLm9uRXJyb3IgPSBmdW5jdGlvbih0KSB7XG5cdFx0XHQgICAgICAgICBjb25zb2xlLmxvZyh0Lm5hbWUgKyAnIC0gZmFpbGVkIHRvIGxvYWQnKTtcblx0XHRcdCAgICB9LmJpbmQodGhpcyk7XG5cdFx0XHR9XG5cblx0ICAgICAgICBzd2l0Y2gob2JqLnR5cGUpIHtcblx0XHRcdCAgICBjYXNlICdpbWcnOlxuXHRcdFx0ICAgIFx0aW1nQXNzZXQoKTtcblx0XHRcdCAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgY2FzZSAnYXVkaW8nOlxuXHRcdFx0ICAgICAgICAvL3RvZG9cblx0XHRcdFx0XHRcblx0XHRcdCAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgY2FzZSAndmlkZW8nOlxuXHRcdFx0ICAgICAgICAvL3RvZG9cblx0XHRcdCAgICAgICAgYnJlYWs7XHRcblx0XHRcdCAgICBjYXNlICdoZHInOlxuXHRcdFx0ICAgICAgICAvL3RvZG9cblx0XHRcdCAgICAgICAgYnJlYWs7ICBcdCAgICBcdCAgICAgICAgICAgICAgICBcblx0XHRcdCAgICBkZWZhdWx0OlxuXHRcdFx0ICAgICAgICBpbWdBc3NldC5hcHBseSh0aGlzKTtcblx0XHRcdCB9XG5cdFx0XHQgbG9hZGVyLmxvYWQoKTtcblx0XHRcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgIFxuICAgICAgICBsb2FkZXIub25GaW5pc2ggPSB0aGlzLmFzc2V0TG9hZGluZ0ZpbmlzaGVkLmJpbmQodGhpcyk7XG5cblx0fVxuXHRcdFxuICAgICAgICBcblxufVx0XHRcdFx0XG5cblxuXG5cdFx0Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9