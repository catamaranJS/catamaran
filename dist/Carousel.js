"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Carousel=function(){function e(n){var t=void 0===arguments[1]?{speed:4,fadeIn:!0,fadeDelay:250}:arguments[1];_classCallCheck(this,e),this._settings=t,this._selectorArr=document.querySelectorAll(n),this._elmArr=new CATAMARAN.Extend(n),this.init()}return _createClass(e,[{key:"init",value:function(){function e(){s=f[0].scrollWidth;var e=new CATAMARAN.Extend(".forward"),n=new CATAMARAN.Extend(".backward");CATAMARAN.isMobile()?(f[0].setAttribute("style","overflow-y:hidden; overflow-x:scroll"),f[0].scrollLeft=0,e.hide(),n.hide()):(f[0].setAttribute("style","overflow:visible"),f[0].scrollLeft=0,e.show(),n.show()),d._update()}for(var n=this,t=0,r=n._selectorArr.length;r>t;t++){var a,o,l,s,i,A=new CATAMARAN.Extend("."+n._elmArr[t].className),d=n._selectorArr[t],c='<span class="forward"></span>',u='<span class="backward"></span>',f=d.querySelectorAll(".reel"),w=d.querySelectorAll("article"),v=0;if(n._settings.fadeIn){for(var t=0,r=w.length;r>t;t++)w[t].classList.add("loading");A.onVisible(function(){var e,t=w.length-Math.ceil(window.innerWidth/l);e=window.setInterval(function(){var n=d.querySelectorAll(".loading"),r=n[0];if(n.length<=t){window.clearInterval(e);for(var a=0,o=w.length;o>a;a++)w[a].classList.remove("loading")}else"undefined"!=typeof r&&r.classList.remove("loading")},n._settings.fadeDelay)},50)}d._update=function(){v=0,o=-1*s+window.innerWidth,a=0,d._updatePos()},d._updatePos=function(){f[0].setAttribute("style","transform:translate("+v+"px, 0)")},d.insertAdjacentHTML("beforeEnd",c);var h=new CATAMARAN.Extend(".forward");h.hide(),CATAMARAN.Events.on(".forward","mouseenter",function(e){CATAMARAN.interval=window.setInterval(function(){v-=n._settings.speed,o>=v&&(window.clearInterval(CATAMARAN.interval),v=o),d._updatePos()},10)}),CATAMARAN.Events.on(".forward","mouseleave",function(e){window.clearInterval(CATAMARAN.interval)}),d.insertAdjacentHTML("beforeEnd",u);var C=new CATAMARAN.Extend(".backward");C.hide(),CATAMARAN.Events.on(".backward","mouseenter",function(e){CATAMARAN.interval=window.setInterval(function(){v+=n._settings.speed,v>=a&&(window.clearInterval(i),v=a),d._updatePos()},10)}),CATAMARAN.Events.on(".backward","mouseleave",function(e){window.clearInterval(CATAMARAN.interval)}),e(),CATAMARAN.Events.on("body","resize",function(n){e()})}}}]),e}();module.exports=Carousel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhcm91c2VsLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ2Fyb3VzZWwiLCJzZWxlY3RvciIsInNldHRpbmdzIiwidW5kZWZpbmVkIiwiYXJndW1lbnRzIiwic3BlZWQiLCJmYWRlSW4iLCJmYWRlRGVsYXkiLCJ0aGlzIiwiX3NldHRpbmdzIiwiX3NlbGVjdG9yQXJyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2VsbUFyciIsIkNBVEFNQVJBTiIsIkV4dGVuZCIsImluaXQiLCJ2YWx1ZSIsInNldHVwQ2Fyb3VzZWwiLCJyZWVsV2lkdGgiLCJyZWVsIiwic2Nyb2xsV2lkdGgiLCJmb3J3YXJkQyIsImJhY2t3YXJkQyIsImlzTW9iaWxlIiwic2V0QXR0cmlidXRlIiwic2Nyb2xsTGVmdCIsImhpZGUiLCJzaG93IiwiZWxtIiwiX3VwZGF0ZSIsIl9jYXJvdXNlbCIsImxlbiIsImxlZnRMaW1pdCIsInJpZ2h0TGltaXQiLCJpdGVtV2lkdGgiLCJ0aW1lcklkIiwic2VsZiIsImNsYXNzTmFtZSIsImZvcndhcmQiLCJiYWNrd2FyZCIsIml0ZW1zIiwicG9zIiwiY2xhc3NMaXN0IiwiYWRkIiwib25WaXNpYmxlIiwibGltaXQiLCJNYXRoIiwiY2VpbCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJzZXRJbnRlcnZhbCIsIngiLCJ4ZiIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmUiLCJfdXBkYXRlUG9zIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiX2ZvcndhcmQiLCJFdmVudHMiLCJvbiIsImUiLCJpbnRlcnZhbCIsIl9iYWNrd2FyZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUEsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLGNBQWUsV0FBZSxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE1BRjNoQmtCLFNBQVEsV0FFRCxRQUZQQSxHQUVRQyxHQU1OLEdBTmdCQyxHQUFRQyxTQUFBQyxVQUFBLElBQUtDLE1BQU8sRUFBRUMsUUFBUSxFQUFNQyxVQUFXLEtBQUtILFVBQUEsRUFRcEV4QixpQkFBZ0I0QixLQVZsQlIsR0FHT1EsS0FBS0MsVUFBWVAsRUFDakJNLEtBQUtFLGFBQWVDLFNBQVNDLGlCQUFpQlgsR0FDOUNPLEtBQUtLLFFBQVUsR0FBSUMsV0FBVUMsT0FBT2QsR0FDcENPLEtBQUtRLE9Ba0lkLE1BdEhBaEMsY0FsQkVnQixJQW1CRUosSUFBSyxPQUNMcUIsTUFYRixXQW9HTSxRQUFTQyxLQUNMQyxFQUFZQyxFQUFLLEdBQUdDLFdBQ3BCLElBQUlDLEdBQVksR0FBSVIsV0FBVUMsT0FBTyxZQUNqQ1EsRUFBYSxHQUFJVCxXQUFVQyxPQUFPLFlBQ2xDRCxXQUFVVSxZQUNWSixFQUFLLEdBQUdLLGFBQWEsUUFBUyx3Q0FD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cm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2Fyb3VzZWx7XG5cblx0XHRjb25zdHJ1Y3RvcihzZWxlY3Rvciwgc2V0dGluZ3MgPSB7IHNwZWVkOiA0LGZhZGVJbjogdHJ1ZSwgZmFkZURlbGF5OiAyNTAgfSkge1xuICAgICAgICAgICAgXHR0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICAgICAgXHR0aGlzLl9zZWxlY3RvckFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgXHR0aGlzLl9lbG1BcnIgPSBuZXcgQ0FUQU1BUkFOLkV4dGVuZChzZWxlY3Rvcik7XG4gICAgICAgICAgICBcdHRoaXMuaW5pdCgpXG5cdFx0fVxuXG5cdFx0aW5pdCgpe1xuXHRcdFx0dmFyIF9jYXJvdXNlbCA9IHRoaXM7XG5cdFx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gX2Nhcm91c2VsLl9zZWxlY3RvckFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IG5ldyBDQVRBTUFSQU4uRXh0ZW5kKCcuJyArIF9jYXJvdXNlbC5fZWxtQXJyW2ldLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGVsbSA9ICBfY2Fyb3VzZWwuX3NlbGVjdG9yQXJyW2ldLFxuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkID0gJzxzcGFuIGNsYXNzPVwiZm9yd2FyZFwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZCA9ICc8c3BhbiBjbGFzcz1cImJhY2t3YXJkXCI+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgICAgIHJlZWwgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLnJlZWwnKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnYXJ0aWNsZScpLFxuICAgICAgICAgICAgICAgICAgICBwb3MgPSAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1XaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVlbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lcklkO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9jYXJvdXNlbC5fc2V0dGluZ3MuZmFkZUluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uVmlzaWJsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBpdGVtcy5sZW5ndGggLSBNYXRoLmNlaWwod2luZG93LmlubmVyV2lkdGggLyBpdGVtV2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLmxvYWRpbmcnKSwgeGYgPSB4WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4Lmxlbmd0aCA8PSBsaW1pdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB4ZiAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Zi5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2Fyb3VzZWwuX3NldHRpbmdzLmZhZGVEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRMaW1pdCA9ICgtMSAqIHJlZWxXaWR0aCkgKyB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcygpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcyA9IGZ1bmN0aW9uKCkgeyBcbiAgICAgICAgICAgICAgICBcdHJlZWxbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsICd0cmFuc2Zvcm06dHJhbnNsYXRlKCcgKyBwb3MgKyAncHgsIDApJyl9O1xuICAgICAgICAgICAgICAgICAgICBlbG0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVFbmQnLGZvcndhcmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2ZvcndhcmQgPSBuZXcgQ0FUQU1BUkFOLkV4dGVuZCgnLmZvcndhcmQnKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZvcndhcmQuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uRXZlbnRzLm9uKCcuZm9yd2FyZCcsICdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5pbnRlcnZhbCAgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyAtPSBfY2Fyb3VzZWwuX3NldHRpbmdzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zIDw9IHJpZ2h0TGltaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKENBVEFNQVJBTi5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSByaWdodExpbWl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlUG9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uRXZlbnRzLm9uKCcuZm9yd2FyZCcsICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoQ0FUQU1BUkFOLmludGVydmFsKTsgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBlbG0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVFbmQnLGJhY2t3YXJkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9iYWNrd2FyZCA9ICBuZXcgQ0FUQU1BUkFOLkV4dGVuZCgnLmJhY2t3YXJkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9iYWNrd2FyZC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5FdmVudHMub24oJy5iYWNrd2FyZCcsICdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5pbnRlcnZhbCAgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBfY2Fyb3VzZWwuX3NldHRpbmdzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zID49IGxlZnRMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBsZWZ0TGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxtLl91cGRhdGVQb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uRXZlbnRzLm9uKCcuYmFja3dhcmQnLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKENBVEFNQVJBTi5pbnRlcnZhbCk7ICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwQ2Fyb3VzZWwoKTsgIFxuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uRXZlbnRzLm9uKCdib2R5JywgJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwQ2Fyb3VzZWwoKTsgICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgIFxuXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBDYXJvdXNlbCgpe1xuICAgICAgICAgICAgICAgIHJlZWxXaWR0aCA9IHJlZWxbMF0uc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGZvcndhcmRDID0gIG5ldyBDQVRBTUFSQU4uRXh0ZW5kKCcuZm9yd2FyZCcpO1xuICAgICAgICAgICAgICAgIHZhciBiYWNrd2FyZEMgPSAgbmV3IENBVEFNQVJBTi5FeHRlbmQoJy5iYWNrd2FyZCcpO1xuICAgICAgICAgICAgICAgIGlmIChDQVRBTUFSQU4uaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnb3ZlcmZsb3cteTpoaWRkZW47IG92ZXJmbG93LXg6c2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlZWxbMF0uc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvcndhcmRDLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja3dhcmRDLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZWxbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsICdvdmVyZmxvdzp2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlZWxbMF0uc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkQy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIGJhY2t3YXJkQy5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblx0XHRcbiAgICAgICAgICAgXG4gICAgICAgICAgICBcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENhcm91c2VsOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==