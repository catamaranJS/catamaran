"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),Carousel=function(){function e(r){var n=void 0===arguments[1]?{speed:4,fadeIn:!0,fadeDelay:250}:arguments[1];_classCallCheck(this,e),this._settings=n,this._selectorArr=document.querySelectorAll(r),this._elmArr=new CATAMARAN.core.DOM(r),this.init()}return _createClass(e,[{key:"init",value:function(){function e(){s=f[0].scrollWidth;var e=new CATAMARAN.core.DOM(".forward"),r=new CATAMARAN.core.DOM(".backward");CATAMARAN.isMobile()?(f[0].setAttribute("style","overflow-y:hidden; overflow-x:scroll"),f[0].scrollLeft=0,e.hide(),r.hide()):(f[0].setAttribute("style","overflow:visible"),f[0].scrollLeft=0,e.show(),r.show()),c._update()}for(var r=this,n=0,t=r._selectorArr.length;t>n;n++){var o,a,l,s,i,A=new CATAMARAN.core.DOM("."+r._elmArr[n].className),c=r._selectorArr[n],d='<span class="forward"></span>',u='<span class="backward"></span>',f=c.querySelectorAll(".reel"),w=c.querySelectorAll("article"),v=0;if(r._settings.fadeIn){for(var n=0,t=w.length;t>n;n++)w[n].classList.add("loading");A.onVisible(function(){var e,n=w.length-Math.ceil(window.innerWidth/l);e=window.setInterval(function(){var r=c.querySelectorAll(".loading"),t=r[0];if(r.length<=n){window.clearInterval(e);for(var o=0,a=w.length;a>o;o++)w[o].classList.remove("loading")}else"undefined"!=typeof t&&t.classList.remove("loading")},r._settings.fadeDelay)},50)}c._update=function(){v=0,a=-1*s+window.innerWidth,o=0,c._updatePos()},c._updatePos=function(){f[0].setAttribute("style","transform:translate("+v+"px, 0)")},c.insertAdjacentHTML("beforeEnd",d);var M=new CATAMARAN.core.DOM(".forward");M.hide(),CATAMARAN.core.Events.on(".forward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v-=r._settings.speed,a>=v&&(window.clearInterval(CATAMARAN.core.interval),v=a),c._updatePos()},10)}),CATAMARAN.core.Events.on(".forward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),c.insertAdjacentHTML("beforeEnd",u);var h=new CATAMARAN.core.DOM(".backward");h.hide(),CATAMARAN.core.Events.on(".backward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v+=r._settings.speed,v>=o&&(window.clearInterval(i),v=o),c._updatePos()},10)}),CATAMARAN.core.Events.on(".backward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),e(),CATAMARAN.core.Events.on("body","resize",function(r){e()})}}}]),e}();module.exports=Carousel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpL0Nhcm91c2VsLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ2Fyb3VzZWwiLCJzZWxlY3RvciIsInNldHRpbmdzIiwidW5kZWZpbmVkIiwiYXJndW1lbnRzIiwic3BlZWQiLCJmYWRlSW4iLCJmYWRlRGVsYXkiLCJ0aGlzIiwiX3NldHRpbmdzIiwiX3NlbGVjdG9yQXJyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2VsbUFyciIsIkNBVEFNQVJBTiIsImNvcmUiLCJET00iLCJpbml0IiwidmFsdWUiLCJzZXR1cENhcm91c2VsIiwicmVlbFdpZHRoIiwicmVlbCIsInNjcm9sbFdpZHRoIiwiZm9yd2FyZEMiLCJiYWNrd2FyZEMiLCJpc01vYmlsZSIsInNldEF0dHJpYnV0ZSIsInNjcm9sbExlZnQiLCJoaWRlIiwic2hvdyIsImVsbSIsIl91cGRhdGUiLCJfY2Fyb3VzZWwiLCJsZW4iLCJsZWZ0TGltaXQiLCJyaWdodExpbWl0IiwiaXRlbVdpZHRoIiwidGltZXJJZCIsInNlbGYiLCJjbGFzc05hbWUiLCJmb3J3YXJkIiwiYmFja3dhcmQiLCJpdGVtcyIsInBvcyIsImNsYXNzTGlzdCIsImFkZCIsIm9uVmlzaWJsZSIsImxpbWl0IiwiTWF0aCIsImNlaWwiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2V0SW50ZXJ2YWwiLCJ4IiwieGYiLCJjbGVhckludGVydmFsIiwicmVtb3ZlIiwiX3VwZGF0ZVBvcyIsImluc2VydEFkamFjZW50SFRNTCIsIl9mb3J3YXJkIiwiRXZlbnRzIiwib24iLCJlIiwiaW50ZXJ2YWwiLCJfYmFja3dhcmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQUYzaEJrQixTQUFRLFdBU0QsUUFUUEEsR0FTUUMsR0FPTixHQVBnQkMsR0FBUUMsU0FBQUMsVUFBQSxJQUFLQyxNQUFPLEVBQUVDLFFBQVEsRUFBTUMsVUFBVyxLQUFLSCxVQUFBLEVBU3BFeEIsaUJBQWdCNEIsS0FsQmxCUixHQVVPUSxLQUFLQyxVQUFZUCxFQUNqQk0sS0FBS0UsYUFBZUMsU0FBU0MsaUJBQWlCWCxHQUM5Q08sS0FBS0ssUUFBVSxHQUFJQyxXQUFVQyxLQUFLQyxJQUFJZixHQUN0Q08sS0FBS1MsT0FtSWQsTUF0SEFqQyxjQTFCRWdCLElBMkJFSixJQUFLLE9BQ0xzQixNQVpGLFdBb0dNLFFBQVNDLEtBQ0xDLEVBQVlDLEVBQUssR0FBR0MsV0FDcEIsSUFBSUMsR0FBWSxHQUFJVCxXQUFVQyxLQUFLQyxJQUFJLFlBQ25DUSxFQUFhLEdBQUlWLFdBQVVDLEtBQUtDLElBQUksWUFDcENGLFdBQVVXLFlBQ1ZK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LFlBRXhDNUMsSUFDQUwsVUFBVUMsS0FBSzZDLE9BQU9DLEdBQUcsT0FBUSxTQUFVLFNBQVNDLEdBQ2hEM0MsV0E1R2xCbkIsSUE4SU5pRSxRQUFPQyxRQUFVbEUiLCJmaWxlIjoidWkvQ2Fyb3VzZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJvdXNlbHtcblxuICAgICAgIC8qKlxuICAgICAgICogUmVwcmVzZW50cyBDYXRhbWFyYW4gQ29tcG9uZW50IHRoYXQgY3JlYXRlcyBhIHNpbXBsZSBjYXJvc2VsIHdpbmRvdy5DQVRBTUFSQU4udWkuY29tcG9uZW50cy5DYXJvdXNlbCAgXG4gICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGUgc2VsZWN0b3IgdXNlcyBxdWVyeVNlbGVjdG9yQWxsIHRydW5zIHRoZSBvYmplY3QgaW50byBhbiBhcnJheSBvZiBlbGVtZW50cyB0byB1c2Ugd2l0aCB3aW5kb3cuQ0FUQU1BUkFOLkV4dGVuZCBvYmplY3QgXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gZGVmYXVsdCBzZXR0aW5ncyBhcmUgeyBzcGVlZDogNCxmYWRlSW46IHRydWUsIGZhZGVEZWxheTogMjUwIH0uXG4gICAgICAgKi9cblxuXHRcdGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBzZXR0aW5ncyA9IHsgc3BlZWQ6IDQsZmFkZUluOiB0cnVlLCBmYWRlRGVsYXk6IDI1MCB9KSB7XG4gICAgICAgICAgICBcdHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgICAgICBcdHRoaXMuX3NlbGVjdG9yQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICBcdHRoaXMuX2VsbUFyciA9IG5ldyBDQVRBTUFSQU4uY29yZS5ET00oc2VsZWN0b3IpO1xuICAgICAgICAgICAgXHR0aGlzLmluaXQoKVxuXHRcdH1cblxuXHRcdGluaXQoKXtcblx0XHRcdHZhciBfY2Fyb3VzZWwgPSB0aGlzO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IF9jYXJvdXNlbC5fc2VsZWN0b3JBcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuJyArIF9jYXJvdXNlbC5fZWxtQXJyW2ldLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGVsbSA9ICBfY2Fyb3VzZWwuX3NlbGVjdG9yQXJyW2ldLFxuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkID0gJzxzcGFuIGNsYXNzPVwiZm9yd2FyZFwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZCA9ICc8c3BhbiBjbGFzcz1cImJhY2t3YXJkXCI+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgICAgIHJlZWwgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLnJlZWwnKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnYXJ0aWNsZScpLFxuICAgICAgICAgICAgICAgICAgICBwb3MgPSAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1XaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVlbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lcklkO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9jYXJvdXNlbC5fc2V0dGluZ3MuZmFkZUluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uVmlzaWJsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBpdGVtcy5sZW5ndGggLSBNYXRoLmNlaWwod2luZG93LmlubmVyV2lkdGggLyBpdGVtV2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLmxvYWRpbmcnKSwgeGYgPSB4WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4Lmxlbmd0aCA8PSBsaW1pdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB4ZiAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Zi5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2Fyb3VzZWwuX3NldHRpbmdzLmZhZGVEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRMaW1pdCA9ICgtMSAqIHJlZWxXaWR0aCkgKyB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcygpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcyA9IGZ1bmN0aW9uKCkgeyBcbiAgICAgICAgICAgICAgICBcdHJlZWxbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsICd0cmFuc2Zvcm06dHJhbnNsYXRlKCcgKyBwb3MgKyAncHgsIDApJyl9O1xuICAgICAgICAgICAgICAgICAgICBlbG0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVFbmQnLGZvcndhcmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2ZvcndhcmQgPSBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuZm9yd2FyZCcpO1xuICAgICAgICAgICAgICAgICAgICBfZm9yd2FyZC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLkV2ZW50cy5vbignLmZvcndhcmQnLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5pbnRlcnZhbCAgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyAtPSBfY2Fyb3VzZWwuX3NldHRpbmdzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zIDw9IHJpZ2h0TGltaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKENBVEFNQVJBTi5jb3JlLmludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHJpZ2h0TGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxtLl91cGRhdGVQb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLkV2ZW50cy5vbignLmZvcndhcmQnLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKENBVEFNQVJBTi5jb3JlLmludGVydmFsKTsgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBlbG0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVFbmQnLGJhY2t3YXJkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9iYWNrd2FyZCA9ICBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuYmFja3dhcmQnKTtcbiAgICAgICAgICAgICAgICAgICAgX2JhY2t3YXJkLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuRXZlbnRzLm9uKCcuYmFja3dhcmQnLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5pbnRlcnZhbCAgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBfY2Fyb3VzZWwuX3NldHRpbmdzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zID49IGxlZnRMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBsZWZ0TGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxtLl91cGRhdGVQb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5FdmVudHMub24oJy5iYWNrd2FyZCcsICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoQ0FUQU1BUkFOLmNvcmUuaW50ZXJ2YWwpOyAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXR1cENhcm91c2VsKCk7ICBcbiAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuRXZlbnRzLm9uKCdib2R5JywgJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwQ2Fyb3VzZWwoKTsgICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgIFxuXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBDYXJvdXNlbCgpe1xuICAgICAgICAgICAgICAgIHJlZWxXaWR0aCA9IHJlZWxbMF0uc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGZvcndhcmRDID0gIG5ldyBDQVRBTUFSQU4uY29yZS5ET00oJy5mb3J3YXJkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGJhY2t3YXJkQyA9ICBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuYmFja3dhcmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoQ0FUQU1BUkFOLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVlbFswXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ292ZXJmbG93LXk6aGlkZGVuOyBvdmVyZmxvdy14OnNjcm9sbCcpO1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNjcm9sbExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkQy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJhY2t3YXJkQy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnb3ZlcmZsb3c6dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNjcm9sbExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZEMuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZEMuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cdFx0XG4gICAgICAgICAgIFxuICAgICAgICAgICAgXG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYXJvdXNlbDsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=