"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),Carousel=function(){function e(r){var n=void 0===arguments[1]?{speed:4,fadeIn:!0,fadeDelay:250}:arguments[1];_classCallCheck(this,e),this._settings=n,this._selectorArr=document.querySelectorAll(r),this._elmArr=new CATAMARAN.core.DOM(r),this.init()}return _createClass(e,[{key:"init",value:function(){function e(){l=f[0].scrollWidth;var e=new CATAMARAN.core.DOM(".forward"),r=new CATAMARAN.core.DOM(".backward");CATAMARAN.isMobile()?(f[0].className=f[0].className+" caroselTouch",f[0].scrollLeft=0,e.hide(),r.hide()):(f[0].setAttribute("style","overflow:visible"),f[0].scrollLeft=0,e.show(),r.show()),A._update()}for(var r=this,n=0,t=r._selectorArr.length;t>n;n++){var a,o,s,l,i,c=new CATAMARAN.core.DOM("."+r._elmArr[n].className),A=r._selectorArr[n],d='<span class="forward"></span>',u='<span class="backward"></span>',f=A.querySelectorAll(".reel"),w=A.querySelectorAll("article"),v=0;if(r._settings.fadeIn){for(var n=0,t=w.length;t>n;n++)w[n].classList.add("loading");c.onVisible(function(){var e,n=w.length-Math.ceil(window.innerWidth/s);e=window.setInterval(function(){var r=A.querySelectorAll(".loading"),t=r[0];if(r.length<=n){window.clearInterval(e);for(var a=0,o=w.length;o>a;a++)w[a].classList.remove("loading")}else"undefined"!=typeof t&&t.classList.remove("loading")},r._settings.fadeDelay)},50)}A._update=function(){v=0,o=-1*l+window.innerWidth,a=0,A._updatePos()},A._updatePos=function(){f[0].setAttribute("style","transform:translate("+v+"px, 0); -moz-transform:translate("+v+"px, 0); -webkit-transform:translate("+v+"px, 0)")},A.insertAdjacentHTML("beforeEnd",d);var M=new CATAMARAN.core.DOM(".forward");M.hide(),CATAMARAN.core.Events.on(".forward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v-=r._settings.speed,o>=v&&(window.clearInterval(CATAMARAN.core.interval),v=o),A._updatePos()},10)}),CATAMARAN.core.Events.on(".forward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),A.insertAdjacentHTML("beforeEnd",u);var h=new CATAMARAN.core.DOM(".backward");h.hide(),CATAMARAN.core.Events.on(".backward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v+=r._settings.speed,v>=a&&(window.clearInterval(i),v=a),A._updatePos()},10)}),CATAMARAN.core.Events.on(".backward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),e(),CATAMARAN.core.Events.on("body","resize",function(r){e()})}}}]),e}();module.exports=Carousel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpL0Nhcm91c2VsLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ2Fyb3VzZWwiLCJzZWxlY3RvciIsInNldHRpbmdzIiwidW5kZWZpbmVkIiwiYXJndW1lbnRzIiwic3BlZWQiLCJmYWRlSW4iLCJmYWRlRGVsYXkiLCJ0aGlzIiwiX3NldHRpbmdzIiwiX3NlbGVjdG9yQXJyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2VsbUFyciIsIkNBVEFNQVJBTiIsImNvcmUiLCJET00iLCJpbml0IiwidmFsdWUiLCJzZXR1cENhcm91c2VsIiwicmVlbFdpZHRoIiwicmVlbCIsInNjcm9sbFdpZHRoIiwiZm9yd2FyZEMiLCJiYWNrd2FyZEMiLCJpc01vYmlsZSIsImNsYXNzTmFtZSIsInNjcm9sbExlZnQiLCJoaWRlIiwic2V0QXR0cmlidXRlIiwic2hvdyIsImVsbSIsIl91cGRhdGUiLCJfY2Fyb3VzZWwiLCJsZW4iLCJsZWZ0TGltaXQiLCJyaWdodExpbWl0IiwiaXRlbVdpZHRoIiwidGltZXJJZCIsInNlbGYiLCJmb3J3YXJkIiwiYmFja3dhcmQiLCJpdGVtcyIsInBvcyIsImNsYXNzTGlzdCIsImFkZCIsIm9uVmlzaWJsZSIsImxpbWl0IiwiTWF0aCIsImNlaWwiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2V0SW50ZXJ2YWwiLCJ4IiwieGYiLCJjbGVhckludGVydmFsIiwicmVtb3ZlIiwiX3VwZGF0ZVBvcyIsImluc2VydEFkamFjZW50SFRNTCIsIl9mb3J3YXJkIiwiRXZlbnRzIiwib24iLCJlIiwiaW50ZXJ2YWwiLCJfYmFja3dhcmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQUYzaEJrQixTQUFRLFdBU0QsUUFUUEEsR0FTUUMsR0FPTixHQVBnQkMsR0FBUUMsU0FBQUMsVUFBQSxJQUFLQyxNQUFPLEVBQUVDLFFBQVEsRUFBTUMsVUFBVyxLQUFLSCxVQUFBLEVBU3BFeEIsaUJBQWdCNEIsS0FsQmxCUixHQVVPUSxLQUFLQyxVQUFZUCxFQUNqQk0sS0FBS0UsYUFBZUMsU0FBU0MsaUJBQWlCWCxHQUM5Q08sS0FBS0ssUUFBVSxHQUFJQyxXQUFVQyxLQUFLQyxJQUFJZixHQUN0Q08sS0FBS1MsT0FtSWQsTUF0SEFqQyxjQTFCRWdCLElBMkJFSixJQUFLLE9BQ0xzQixNQVpGLFdBb0dNLFFBQVNDLEtBQ0xDLEVBQVlDLEVBQUssR0FBR0MsV0FDcEIsSUFBSUMsR0FBWSxHQUFJVCxXQUFVQyxLQUFLQyxJQUFJLFlBQ25DUSxFQUFhLEdBQUlWLFdBQVVDLEtBQUtDLElBQUksWUFDcENGLFdBQVVXLFlBQ1ZKLEVBQUssR0FBR0ssVUFBWUwsRUFBSyxHQUFHSyxVQUFhLGdCQUN6Q0wsRUFBSyxHQUFHTSxXQUFhLEVBQ3JCSixFQUFTSyxPQUNUSixFQUFVSSxTQUdWUCxFQUFLLEdBQUdRLGFBQWEsUUFBUyxvQkFDOUJSLEVBQUssR0FBR00sV0FBYSxFQUVyQkosRUFBU08sT0FDVE4sRUFBVU0sUUFFZEMsRUFBSUMsVUFuSGpCLElBQUssR0FEREMsR0FBWXpCLEtBQ1BwQixFQUFJLEVBQUc4QyxFQUFNRCxFQUFVdkIsYUFBYXJCLE9BQVk2QyxFQUFKOUMsRUFBU0EsSUFBSyxDQUNsRCxHQU9BK0MsR0FDQUMsRUFDQUMsRUFDQWpCLEVBQ0FrQixFQVhJQyxFQUFPLEdBQUl6QixXQUFVQyxLQUFLQyxJQUFJLElBQU1pQixFQUFVcEIsUUFBUXpCLEdBQUdzQyxXQUM3REssRUFBT0UsRUFBVXZCLGFBQWF0QixHQUM5Qm9ELEVBQVUsZ0NBQ1ZDLEVBQVcsaUNBQ1hwQixFQUFPVSxFQUFJbkIsaUJBQWlCLFNBQzVCOEIsRUFBUVgsRUFBSW5CLGlCQUFpQixXQUM3QitCLEVBQU0sQ0FPVixJQUFJVixFQUFVeEIsVUFBVUgsT0FBUSxDQUN4QixJQUFJLEdBQUlsQixHQUFJLEVBQUc4QyxFQUFNUSxFQUFNckQsT0FBWTZDLEVBQUo5QyxFQUFTQSxJQUN4Q3NELEVBQU10RCxHQUFHd0QsVUFBVUMsSUFBSSxVQUczQk4sR0FBS08sVUFBVSxXQUNYLEdBQUlSLEdBQ0FTLEVBQVFMLEVBQU1yRCxPQUFTMkQsS0FBS0MsS0FBS0MsT0FBT0MsV0FBYWQsRUFFekRDLEdBQVVZLE9BQU9FLFlBQVksV0FDekIsR0FBSUMsR0FBSXRCLEVBQUluQixpQkFBaUIsWUFBYTBDLEVBQUtELEVBQUUsRUFFakQsSUFBSUEsRUFBRWhFLFFBQVUwRCxFQUFoQixDQUVJRyxPQUFPSyxjQUFjakIsRUFFckIsS0FBSSxHQUFJbEQsR0FBSSxFQUFHOEMsRUFBTVEsRUFBTXJELE9BQVk2QyxFQUFKOUMsRUFBU0EsSUFDeENzRCxFQUFNdEQsR0FBR3dELFVBQVVZLE9BQU8sZUFLbEIsbUJBQU5GLElBQ05BLEVBQUdWLFVBQVVZLE9BQU8sWUFFekJ2QixFQUFVeEIsVUFBVUYsWUFDeEIsSUFHWHdCLEVBQUlDLFFBQVUsV0FDTlcsRUFBTSxFQUNOUCxFQUFhLEdBQU1oQixFQUFhOEIsT0FBT0MsV0FDdkNoQixFQUFZLEVBQ1pKLEVBQUkwQixjQUlaMUIsRUFBSTBCLFdBQWEsV0FDaEJwQyxFQUFLLEdBQUdRLGFBQWEsUUFBUyx1QkFBeUJjLEVBQU0sb0NBQXNDQSxFQUFNLHVDQUF5Q0EsRUFBTSxXQUNySlosRUFBSTJCLG1CQUFtQixZQUFZbEIsRUFDbkMsSUFBSW1CLEdBQVcsR0FBSTdDLFdBQVVDLEtBQUtDLElBQUksV0FDdEMyQyxHQUFTL0IsT0FDVGQsVUFBVUMsS0FBSzZDLE9BQU9DLEdBQUcsV0FBWSxhQUFjLFNBQVNDLEdBQ3BEaEQsVUFBVUMsS0FBS2dELFNBQVliLE9BQU9FLFlBQVksV0FDMUNULEdBQU9WLEVBQVV4QixVQUFVSixNQUNoQitCLEdBQVBPLElBRUFPLE9BQU9LLGNBQWN6QyxVQUFVQyxLQUFLZ0QsVUFDcENwQixFQUFNUCxHQUVWTCxFQUFJMEIsY0FDTCxNQUdYM0MsVUFBVUMsS0FBSzZDLE9BQU9DLEdBQUcsV0FBWSxhQUFjLFNBQVNDLEdBQ3hEWixPQUFPSyxjQUFjekMsVUFBVUMsS0FBS2dELFlBR3hDaEMsRUFBSTJCLG1CQUFtQixZQUFZakIsRUFDbkMsSUFBSXVCLEdBQWEsR0FBSWxELFdBQVVDLEtBQUtDLElBQUksWUFDeENnRCxHQUFVcEMsT0FDVmQsVUFBVUMsS0FBSzZDLE9BQU9DLEdBQUcsWUFBYSxhQUFjLFNBQVNDLEdBQ3JEaEQsVUFBVUMsS0FBS2dELFNBQVliLE9BQU9FLFlBQVksV0FDMUNULEdBQU9WLEVBQVV4QixVQUFVSixNQUN2QnNDLEdBQU9SLElBQ1BlLE9BQU9LLGNBQWNqQixHQUNyQkssRUFBTVIsR0FFVkosRUFBSTBCLGNBQ0wsTUFFWDNDLFVBQVVDLEtBQUs2QyxPQUFPQyxHQUFHLFlBQWEsYUFBYyxTQUFTQyxHQUN6RFosT0FBT0ssY0FBY3pDLFVBQVVDLEtBQUtnRCxZQUV4QzVDLElBQ0FMLFVBQVVDLEtBQUs2QyxPQUFPQyxHQUFHLE9BQVEsU0FBVSxTQUFTQyxHQUNoRDNDLFdBNUdsQm5CLElBOElOaUUsUUFBT0MsUUFBVWxFIiwiZmlsZSI6InVpL0Nhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2Fyb3VzZWx7XG5cbiAgICAgICAvKipcbiAgICAgICAqIFJlcHJlc2VudHMgQ2F0YW1hcmFuIENvbXBvbmVudCB0aGF0IGNyZWF0ZXMgYSBzaW1wbGUgY2Fyb3NlbCB3aW5kb3cuQ0FUQU1BUkFOLnVpLmNvbXBvbmVudHMuQ2Fyb3VzZWwgIFxuICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlIHNlbGVjdG9yIHVzZXMgcXVlcnlTZWxlY3RvckFsbCB0cnVucyB0aGUgb2JqZWN0IGludG8gYW4gYXJyYXkgb2YgZWxlbWVudHMgdG8gdXNlIHdpdGggd2luZG93LkNBVEFNQVJBTi5FeHRlbmQgb2JqZWN0IFxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRlZmF1bHQgc2V0dGluZ3MgYXJlIHsgc3BlZWQ6IDQsZmFkZUluOiB0cnVlLCBmYWRlRGVsYXk6IDI1MCB9LlxuICAgICAgICovXG5cblx0XHRjb25zdHJ1Y3RvcihzZWxlY3Rvciwgc2V0dGluZ3MgPSB7IHNwZWVkOiA0LGZhZGVJbjogdHJ1ZSwgZmFkZURlbGF5OiAyNTAgfSkge1xuICAgICAgICAgICAgXHR0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICAgICAgXHR0aGlzLl9zZWxlY3RvckFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgXHR0aGlzLl9lbG1BcnIgPSBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIFx0dGhpcy5pbml0KClcblx0XHR9XG5cblx0XHRpbml0KCl7XG5cdFx0XHR2YXIgX2Nhcm91c2VsID0gdGhpcztcblx0XHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSBfY2Fyb3VzZWwuX3NlbGVjdG9yQXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gbmV3IENBVEFNQVJBTi5jb3JlLkRPTSgnLicgKyBfY2Fyb3VzZWwuX2VsbUFycltpXS5jbGFzc05hbWUpLFxuICAgICAgICAgICAgICAgICAgICBlbG0gPSAgX2Nhcm91c2VsLl9zZWxlY3RvckFycltpXSxcbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZCA9ICc8c3BhbiBjbGFzcz1cImZvcndhcmRcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgYmFja3dhcmQgPSAnPHNwYW4gY2xhc3M9XCJiYWNrd2FyZFwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICByZWVsID0gZWxtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZWVsJyksXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gZWxtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2FydGljbGUnKSxcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdExpbWl0LFxuICAgICAgICAgICAgICAgICAgICByaWdodExpbWl0LFxuICAgICAgICAgICAgICAgICAgICBpdGVtV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHJlZWxXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXJJZDtcblxuICAgICAgICAgICAgICAgIGlmIChfY2Fyb3VzZWwuX3NldHRpbmdzLmZhZGVJbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblZpc2libGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ID0gaXRlbXMubGVuZ3RoIC0gTWF0aC5jZWlsKHdpbmRvdy5pbm5lcldpZHRoIC8gaXRlbVdpZHRoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVySWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZWxtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2FkaW5nJyksIHhmID0geFswXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5sZW5ndGggPD0gbGltaXQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgeGYgIT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGYuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2Nhcm91c2VsLl9zZXR0aW5ncy5mYWRlRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0TGltaXQgPSAoLTEgKiByZWVsV2lkdGgpICsgd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0TGltaXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxtLl91cGRhdGVQb3MoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZWxtLl91cGRhdGVQb3MgPSBmdW5jdGlvbigpIHsgXG4gICAgICAgICAgICAgICAgXHRyZWVsWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndHJhbnNmb3JtOnRyYW5zbGF0ZSgnICsgcG9zICsgJ3B4LCAwKTsgLW1vei10cmFuc2Zvcm06dHJhbnNsYXRlKCcgKyBwb3MgKyAncHgsIDApOyAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoJyArIHBvcyArICdweCwgMCknKX07XG4gICAgICAgICAgICAgICAgICAgIGVsbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZUVuZCcsZm9yd2FyZCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfZm9yd2FyZCA9IG5ldyBDQVRBTUFSQU4uY29yZS5ET00oJy5mb3J3YXJkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9mb3J3YXJkLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuRXZlbnRzLm9uKCcuZm9yd2FyZCcsICdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLmludGVydmFsICA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zIC09IF9jYXJvdXNlbC5fc2V0dGluZ3Muc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPD0gcmlnaHRMaW1pdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoQ0FUQU1BUkFOLmNvcmUuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gcmlnaHRMaW1pdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuRXZlbnRzLm9uKCcuZm9yd2FyZCcsICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoQ0FUQU1BUkFOLmNvcmUuaW50ZXJ2YWwpOyAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZUVuZCcsYmFja3dhcmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2JhY2t3YXJkID0gIG5ldyBDQVRBTUFSQU4uY29yZS5ET00oJy5iYWNrd2FyZCcpO1xuICAgICAgICAgICAgICAgICAgICBfYmFja3dhcmQuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5FdmVudHMub24oJy5iYWNrd2FyZCcsICdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLmludGVydmFsICA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zICs9IF9jYXJvdXNlbC5fc2V0dGluZ3Muc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gbGVmdExpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IGxlZnRMaW1pdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLkV2ZW50cy5vbignLmJhY2t3YXJkJywgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChDQVRBTUFSQU4uY29yZS5pbnRlcnZhbCk7ICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwQ2Fyb3VzZWwoKTsgIFxuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5FdmVudHMub24oJ2JvZHknLCAncmVzaXplJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBDYXJvdXNlbCgpOyAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgXG5cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXR1cENhcm91c2VsKCl7XG4gICAgICAgICAgICAgICAgcmVlbFdpZHRoID0gcmVlbFswXS5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgZm9yd2FyZEMgPSAgbmV3IENBVEFNQVJBTi5jb3JlLkRPTSgnLmZvcndhcmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgYmFja3dhcmRDID0gIG5ldyBDQVRBTUFSQU4uY29yZS5ET00oJy5iYWNrd2FyZCcpO1xuICAgICAgICAgICAgICAgIGlmIChDQVRBTUFSQU4uaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLmNsYXNzTmFtZSA9IHJlZWxbMF0uY2xhc3NOYW1lICArICcgY2Fyb3NlbFRvdWNoJztcbiAgICAgICAgICAgICAgICAgICAgcmVlbFswXS5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZEMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZEMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVlbFswXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ292ZXJmbG93OnZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVlbFswXS5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvcndhcmRDLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja3dhcmRDLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxtLl91cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXHRcdFxuICAgICAgICAgICBcbiAgICAgICAgICAgIFxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2Fyb3VzZWw7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9