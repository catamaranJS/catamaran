"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),Carousel=function(){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{speed:4,fadeIn:!0,fadeDelay:250}:arguments[1];_classCallCheck(this,e),this._settings=n,this._selectorArr=document.querySelectorAll(r),this._elmArr=new CATAMARAN.core.DOM(r),this.init()}return _createClass(e,[{key:"init",value:function(){function e(){l=f[0].scrollWidth;var e=new CATAMARAN.core.DOM(".forward"),r=new CATAMARAN.core.DOM(".backward");CATAMARAN.isMobile()?(f[0].className=f[0].className+" caroselTouch",f[0].scrollLeft=0,e.hide(),r.hide()):(f[0].setAttribute("style","overflow:visible"),f[0].scrollLeft=0,e.show(),r.show()),A._update()}for(var r=this,n=0,t=r._selectorArr.length;t>n;n++){var a,o,s,l,i,c=new CATAMARAN.core.DOM("."+r._elmArr[n].className),A=r._selectorArr[n],d='<span class="forward"></span>',u='<span class="backward"></span>',f=A.querySelectorAll(".reel"),w=A.querySelectorAll("article"),v=0;if(r._settings.fadeIn){for(var n=0,t=w.length;t>n;n++)w[n].classList.add("loading");c.onVisible(function(){var e,n=w.length-Math.ceil(window.innerWidth/s);e=window.setInterval(function(){var r=A.querySelectorAll(".loading"),t=r[0];if(r.length<=n){window.clearInterval(e);for(var a=0,o=w.length;o>a;a++)w[a].classList.remove("loading")}else"undefined"!=typeof t&&t.classList.remove("loading")},r._settings.fadeDelay)},50)}A._update=function(){v=0,o=-1*l+window.innerWidth,a=0,A._updatePos()},A._updatePos=function(){f[0].setAttribute("style","transform:translate("+v+"px, 0); -moz-transform:translate("+v+"px, 0); -webkit-transform:translate("+v+"px, 0)")},A.insertAdjacentHTML("beforeEnd",d);var h=new CATAMARAN.core.DOM(".forward");h.hide(),CATAMARAN.core.Events.on(".forward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v-=r._settings.speed,o>=v&&(window.clearInterval(CATAMARAN.core.interval),v=o),A._updatePos()},10)}),CATAMARAN.core.Events.on(".forward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),A.insertAdjacentHTML("beforeEnd",u);var M=new CATAMARAN.core.DOM(".backward");M.hide(),CATAMARAN.core.Events.on(".backward","mouseenter",function(e){CATAMARAN.core.interval=window.setInterval(function(){v+=r._settings.speed,v>=a&&(window.clearInterval(i),v=a),A._updatePos()},10)}),CATAMARAN.core.Events.on(".backward","mouseleave",function(e){window.clearInterval(CATAMARAN.core.interval)}),e(),CATAMARAN.core.Events.on("body","resize",function(r){e()})}}}]),e}();module.exports=Carousel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpL0Nhcm91c2VsLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ2Fyb3VzZWwiLCJzZWxlY3RvciIsInNldHRpbmdzIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwic3BlZWQiLCJmYWRlSW4iLCJmYWRlRGVsYXkiLCJ0aGlzIiwiX3NldHRpbmdzIiwiX3NlbGVjdG9yQXJyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2VsbUFyciIsIkNBVEFNQVJBTiIsImNvcmUiLCJET00iLCJpbml0IiwidmFsdWUiLCJzZXR1cENhcm91c2VsIiwicmVlbFdpZHRoIiwicmVlbCIsInNjcm9sbFdpZHRoIiwiZm9yd2FyZEMiLCJiYWNrd2FyZEMiLCJpc01vYmlsZSIsImNsYXNzTmFtZSIsInNjcm9sbExlZnQiLCJoaWRlIiwic2V0QXR0cmlidXRlIiwic2hvdyIsImVsbSIsIl91cGRhdGUiLCJfY2Fyb3VzZWwiLCJsZW4iLCJsZWZ0TGltaXQiLCJyaWdodExpbWl0IiwiaXRlbVdpZHRoIiwidGltZXJJZCIsInNlbGYiLCJmb3J3YXJkIiwiYmFja3dhcmQiLCJpdGVtcyIsInBvcyIsImNsYXNzTGlzdCIsImFkZCIsIm9uVmlzaWJsZSIsImxpbWl0IiwiTWF0aCIsImNlaWwiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2V0SW50ZXJ2YWwiLCJ4IiwieGYiLCJjbGVhckludGVydmFsIiwicmVtb3ZlIiwiX3VwZGF0ZVBvcyIsImluc2VydEFkamFjZW50SFRNTCIsIl9mb3J3YXJkIiwiRXZlbnRzIiwib24iLCJlIiwiaW50ZXJ2YWwiLCJfYmFja3dhcmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQUYzaEJrQixTQUFRLFdBU0QsUUFUUEEsR0FTUUMsR0FPTixHQVBnQkMsR0FBUUMsVUFBQWQsUUFBQSxHQUFBZSxTQUFBRCxVQUFBLElBQUtFLE1BQU8sRUFBRUMsUUFBUSxFQUFNQyxVQUFXLEtBQUtKLFVBQUEsRUFTcEV2QixpQkFBZ0I0QixLQWxCbEJSLEdBVU9RLEtBQUtDLFVBQVlQLEVBQ2pCTSxLQUFLRSxhQUFlQyxTQUFTQyxpQkFBaUJYLEdBQzlDTyxLQUFLSyxRQUFVLEdBQUlDLFdBQVVDLEtBQUtDLElBQUlmLEdBQ3RDTyxLQUFLUyxPQW1JZCxNQXRIQWpDLGNBMUJFZ0IsSUEyQkVKLElBQUssT0FDTHNCLE1BWkYsV0FvR00sUUFBU0MsS0FDTEMsRUFBWUMsRUFBSyxHQUFHQyxXQUNwQixJQUFJQyxHQUFZLEdBQUlULFdBQVVDLEtBQUtDLElBQUksWUFDbkNRLEVBQWEsR0FBSVYsV0FBVUMsS0FBS0MsSUFBSSxZ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LEdBQUcsWUFBYSxhQUFjLFNBQVNDLEdBQ3pEWixPQUFPSyxjQUFjekMsVUFBVUMsS0FBS2dELFlBRXhDNUMsSUFDQUwsVUFBVUMsS0FBSzZDLE9BQU9DLEdBQUcsT0FBUSxTQUFVLFNBQVNDLEdBQ2hEM0MsV0E1R2xCbkIsSUF5SU5pRSxRQUFPQyxRQUFVbEUiLCJmaWxlIjoidWkvQ2Fyb3VzZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJvdXNlbHtcblxuICAgICAgIC8qKlxuICAgICAgICogUmVwcmVzZW50cyBDYXRhbWFyYW4gQ29tcG9uZW50IHRoYXQgY3JlYXRlcyBhIHNpbXBsZSBjYXJvc2VsIHdpbmRvdy5DQVRBTUFSQU4udWkuY29tcG9uZW50cy5DYXJvdXNlbCAgXG4gICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGUgc2VsZWN0b3IgdXNlcyBxdWVyeVNlbGVjdG9yQWxsIHRydW5zIHRoZSBvYmplY3QgaW50byBhbiBhcnJheSBvZiBlbGVtZW50cyB0byB1c2Ugd2l0aCB3aW5kb3cuQ0FUQU1BUkFOLkV4dGVuZCBvYmplY3QgXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gZGVmYXVsdCBzZXR0aW5ncyBhcmUgeyBzcGVlZDogNCxmYWRlSW46IHRydWUsIGZhZGVEZWxheTogMjUwIH0uXG4gICAgICAgKi9cblxuXHRcdGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBzZXR0aW5ncyA9IHsgc3BlZWQ6IDQsZmFkZUluOiB0cnVlLCBmYWRlRGVsYXk6IDI1MCB9KSB7XG4gICAgICAgICAgICBcdHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgICAgICBcdHRoaXMuX3NlbGVjdG9yQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICBcdHRoaXMuX2VsbUFyciA9IG5ldyBDQVRBTUFSQU4uY29yZS5ET00oc2VsZWN0b3IpO1xuICAgICAgICAgICAgXHR0aGlzLmluaXQoKVxuXHRcdH1cblxuXHRcdGluaXQoKXtcblx0XHRcdHZhciBfY2Fyb3VzZWwgPSB0aGlzO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IF9jYXJvdXNlbC5fc2VsZWN0b3JBcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuJyArIF9jYXJvdXNlbC5fZWxtQXJyW2ldLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGVsbSA9ICBfY2Fyb3VzZWwuX3NlbGVjdG9yQXJyW2ldLFxuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkID0gJzxzcGFuIGNsYXNzPVwiZm9yd2FyZFwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZCA9ICc8c3BhbiBjbGFzcz1cImJhY2t3YXJkXCI+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgICAgIHJlZWwgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLnJlZWwnKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnYXJ0aWNsZScpLFxuICAgICAgICAgICAgICAgICAgICBwb3MgPSAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0TGltaXQsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1XaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVlbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lcklkO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9jYXJvdXNlbC5fc2V0dGluZ3MuZmFkZUluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uVmlzaWJsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBpdGVtcy5sZW5ndGggLSBNYXRoLmNlaWwod2luZG93LmlubmVyV2lkdGggLyBpdGVtV2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlbG0ucXVlcnlTZWxlY3RvckFsbCgnLmxvYWRpbmcnKSwgeGYgPSB4WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4Lmxlbmd0aCA8PSBsaW1pdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB4ZiAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Zi5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2Fyb3VzZWwuX3NldHRpbmdzLmZhZGVEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRMaW1pdCA9ICgtMSAqIHJlZWxXaWR0aCkgKyB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcygpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZVBvcyA9IGZ1bmN0aW9uKCkgeyBcbiAgICAgICAgICAgICAgICBcdHJlZWxbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsICd0cmFuc2Zvcm06dHJhbnNsYXRlKCcgKyBwb3MgKyAncHgsIDApOyAtbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUoJyArIHBvcyArICdweCwgMCk7IC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgnICsgcG9zICsgJ3B4LCAwKScpfTtcbiAgICAgICAgICAgICAgICAgICAgZWxtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJyxmb3J3YXJkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9mb3J3YXJkID0gbmV3IENBVEFNQVJBTi5jb3JlLkRPTSgnLmZvcndhcmQnKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZvcndhcmQuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5FdmVudHMub24oJy5mb3J3YXJkJywgJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuaW50ZXJ2YWwgID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgLT0gX2Nhcm91c2VsLl9zZXR0aW5ncy5zcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA8PSByaWdodExpbWl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChDQVRBTUFSQU4uY29yZS5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSByaWdodExpbWl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlUG9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBDQVRBTUFSQU4uY29yZS5FdmVudHMub24oJy5mb3J3YXJkJywgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChDQVRBTUFSQU4uY29yZS5pbnRlcnZhbCk7ICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJyxiYWNrd2FyZCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYmFja3dhcmQgPSAgbmV3IENBVEFNQVJBTi5jb3JlLkRPTSgnLmJhY2t3YXJkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9iYWNrd2FyZC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLkV2ZW50cy5vbignLmJhY2t3YXJkJywgJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuaW50ZXJ2YWwgID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgKz0gX2Nhcm91c2VsLl9zZXR0aW5ncy5zcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+PSBsZWZ0TGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gbGVmdExpbWl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsbS5fdXBkYXRlUG9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgQ0FUQU1BUkFOLmNvcmUuRXZlbnRzLm9uKCcuYmFja3dhcmQnLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKENBVEFNQVJBTi5jb3JlLmludGVydmFsKTsgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0dXBDYXJvdXNlbCgpOyAgXG4gICAgICAgICAgICAgICAgICAgIENBVEFNQVJBTi5jb3JlLkV2ZW50cy5vbignYm9keScsICdyZXNpemUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cENhcm91c2VsKCk7ICAgXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICBcblxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwQ2Fyb3VzZWwoKXtcbiAgICAgICAgICAgICAgICByZWVsV2lkdGggPSByZWVsWzBdLnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBmb3J3YXJkQyA9ICBuZXcgQ0FUQU1BUkFOLmNvcmUuRE9NKCcuZm9yd2FyZCcpO1xuICAgICAgICAgICAgICAgIHZhciBiYWNrd2FyZEMgPSAgbmV3IENBVEFNQVJBTi5jb3JlLkRPTSgnLmJhY2t3YXJkJyk7XG4gICAgICAgICAgICAgICAgaWYgKENBVEFNQVJBTi5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZWxbMF0uY2xhc3NOYW1lID0gcmVlbFswXS5jbGFzc05hbWUgICsgJyBjYXJvc2VsVG91Y2gnO1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNjcm9sbExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkQy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJhY2t3YXJkQy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnb3ZlcmZsb3c6dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICByZWVsWzBdLnNjcm9sbExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZEMuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZEMuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbG0uX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IENhcm91c2VsO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9