"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(Object(r)),a=0,o=i.length;o>a;a++){var s=i[a],u=Object.getOwnPropertyDescriptor(r,s);void 0!==u&&u.enumerable&&(t[s]=r[s])}}}return t}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,i=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,u=i(r.length),c=t(n)?Object(new n(u)):new Array(u),l=0;u>l;)s=r[l],c[l]=o?"undefined"==typeof a?o(s,l):o.call(a,s,l):s,l+=1;return c.length=u,c}}());var Extend=function(){function e(t){_classCallCheck(this,e);var n=document.querySelectorAll(t);this.length=n.length,this.children=[],Object.assign(this,n)}return _createClass(e,[{key:"each",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Array.from(this)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.call(o)}}catch(s){n=!0,r=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}return this}},{key:"hide",value:function(){return this.each(function(){this.style.display="none"})}},{key:"show",value:function(){return this.each(function(){this.style.display="block"})}},{key:"onVisible",value:function(e){return this.each(function(){if(CATAMARAN.core.Extend.isVisible(this))e.call(this);else var t=setInterval(function(){CATAMARAN.core.Extend.isVisible(this)&&(e.call(this),clearInterval(t))},50)})}},{key:"addClass",value:function(e){return this.each(function(){this.classList.add(e)})}},{key:"removeClass",value:function(e){return this.each(function(){this.classList.remove(e)})}},{key:"hasClass",value:function(e){return this[0].classList.contains(e)}},{key:"on",value:function(e,t){return this.each(function(){this.addEventListener(e,t,!1)})}},{key:"off",value:function(e,t){return this.each(function(){this.removeEventListener(e,t,!1)})}}],[{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}}]),e}();module.exports=Extend;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuZC9FeHRlbmQuanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJhc3NpZ24iLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInRvIiwiYXJndW1lbnRzIiwibmV4dFNvdXJjZSIsImtleXNBcnJheSIsImtleXMiLCJuZXh0SW5kZXgiLCJsZW4iLCJuZXh0S2V5IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkFycmF5IiwiZnJvbSIsInRvU3RyIiwidG9TdHJpbmciLCJpc0NhbGxhYmxlIiwiZm4iLCJjYWxsIiwidG9JbnRlZ2VyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJpc0Zpbml0ZSIsIk1hdGgiLCJmbG9vciIsImFicyIsIm1heFNhZmVJbnRlZ2VyIiwicG93IiwidG9MZW5ndGgiLCJtaW4iLCJtYXgiLCJhcnJheUxpa2UiLCJDIiwidGhpcyIsIml0ZW1zIiwiVCIsIm1hcEZuIiwia1ZhbHVlIiwiQSIsImsiLCJFeHRlbmQiLCJzZWxlY3RvciIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGRyZW4iLCJjYWxsYmFjayIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiZWwiLCJlcnIiLCJlYWNoIiwic3R5bGUiLCJkaXNwbGF5IiwiQ0FUQU1BUkFOIiwiY29yZSIsImlzVmlzaWJsZSIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY29udGFpbnMiLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZWxlbWVudCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQ0EsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsS0FGNWhCWSxRQUFPTSxRQUNWTixPQUFPQyxlQUFlRCxPQUFRLFVBQzVCSCxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsVUFBVSxFQUNWUSxNQUFPLFNBQVNmLEdBRWQsR0FBZWdCLFNBQVhoQixHQUFtQyxPQUFYQSxFQUMxQixLQUFNLElBQUlILFdBQVUsMENBSXRCLEtBQUssR0FERG9CLEdBQUtULE9BQU9SLEdBQ1BFLEVBQUksRUFBR0EsRUFBSWdCLFVBQVVmLE9BQVFELElBQUssQ0FDekMsR0FBSWlCLEdBQWFELFVBQVVoQixFQUMzQixJQUFtQmMsU0FB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L2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG5pZiAoIU9iamVjdC5hc3NpZ24pIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCBmaXJzdCBhcmd1bWVudCB0byBvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKG5leHRTb3VyY2UgPT09IHVuZGVmaW5lZCB8fCBuZXh0U291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dFNvdXJjZSA9IE9iamVjdChuZXh0U291cmNlKTtcblxuICAgICAgICB2YXIga2V5c0FycmF5ID0gT2JqZWN0LmtleXMoT2JqZWN0KG5leHRTb3VyY2UpKTtcbiAgICAgICAgZm9yICh2YXIgbmV4dEluZGV4ID0gMCwgbGVuID0ga2V5c0FycmF5Lmxlbmd0aDsgbmV4dEluZGV4IDwgbGVuOyBuZXh0SW5kZXgrKykge1xuICAgICAgICAgIHZhciBuZXh0S2V5ID0ga2V5c0FycmF5W25leHRJbmRleF07XG4gICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5leHRTb3VyY2UsIG5leHRLZXkpO1xuICAgICAgICAgIGlmIChkZXNjICE9PSB1bmRlZmluZWQgJiYgZGVzYy5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfVxuICB9KTtcbn1cbi8vIHBvbHlmaWxsICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9mcm9tXG4vLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDYsIDIyLjEuMi4xXG4vLyBSZWZlcmVuY2U6IGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1hcnJheS5mcm9tXG5pZiAoIUFycmF5LmZyb20pIHtcbiAgQXJyYXkuZnJvbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICB2YXIgaXNDYWxsYWJsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyB8fCB0b1N0ci5jYWxsKGZuKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICB9O1xuICAgIHZhciB0b0ludGVnZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhciBudW1iZXIgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgaWYgKGlzTmFOKG51bWJlcikpIHsgcmV0dXJuIDA7IH1cbiAgICAgIGlmIChudW1iZXIgPT09IDAgfHwgIWlzRmluaXRlKG51bWJlcikpIHsgcmV0dXJuIG51bWJlcjsgfVxuICAgICAgcmV0dXJuIChudW1iZXIgPiAwID8gMSA6IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobnVtYmVyKSk7XG4gICAgfTtcbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICAgIHZhciB0b0xlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIGxlbiA9IHRvSW50ZWdlcih2YWx1ZSk7XG4gICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobGVuLCAwKSwgbWF4U2FmZUludGVnZXIpO1xuICAgIH07XG5cbiAgICAvLyBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBmcm9tIG1ldGhvZCBpcyAxLlxuICAgIHJldHVybiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZS8qLCBtYXBGbiwgdGhpc0FyZyAqLykge1xuICAgICAgLy8gMS4gTGV0IEMgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgICB2YXIgQyA9IHRoaXM7XG5cbiAgICAgIC8vIDIuIExldCBpdGVtcyBiZSBUb09iamVjdChhcnJheUxpa2UpLlxuICAgICAgdmFyIGl0ZW1zID0gT2JqZWN0KGFycmF5TGlrZSk7XG5cbiAgICAgIC8vIDMuIFJldHVybklmQWJydXB0KGl0ZW1zKS5cbiAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJyYXkuZnJvbSByZXF1aXJlcyBhbiBhcnJheS1saWtlIG9iamVjdCAtIG5vdCBudWxsIG9yIHVuZGVmaW5lZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gSWYgbWFwZm4gaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBtYXBwaW5nIGJlIGZhbHNlLlxuICAgICAgdmFyIG1hcEZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIHVuZGVmaW5lZDtcbiAgICAgIHZhciBUO1xuICAgICAgaWYgKHR5cGVvZiBtYXBGbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gNS4gZWxzZSAgICAgIFxuICAgICAgICAvLyA1LiBhIElmIElzQ2FsbGFibGUobWFwZm4pIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICghaXNDYWxsYWJsZShtYXBGbikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5mcm9tOiB3aGVuIHByb3ZpZGVkLCB0aGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNS4gYi4gSWYgdGhpc0FyZyB3YXMgc3VwcGxpZWQsIGxldCBUIGJlIHRoaXNBcmc7IGVsc2UgbGV0IFQgYmUgdW5kZWZpbmVkLlxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICBUID0gYXJndW1lbnRzWzJdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDEwLiBMZXQgbGVuVmFsdWUgYmUgR2V0KGl0ZW1zLCBcImxlbmd0aFwiKS5cbiAgICAgIC8vIDExLiBMZXQgbGVuIGJlIFRvTGVuZ3RoKGxlblZhbHVlKS5cbiAgICAgIHZhciBsZW4gPSB0b0xlbmd0aChpdGVtcy5sZW5ndGgpO1xuXG4gICAgICAvLyAxMy4gSWYgSXNDb25zdHJ1Y3RvcihDKSBpcyB0cnVlLCB0aGVuXG4gICAgICAvLyAxMy4gYS4gTGV0IEEgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCBvZiBDIHdpdGggYW4gYXJndW1lbnQgbGlzdCBjb250YWluaW5nIHRoZSBzaW5nbGUgaXRlbSBsZW4uXG4gICAgICAvLyAxNC4gYS4gRWxzZSwgTGV0IEEgYmUgQXJyYXlDcmVhdGUobGVuKS5cbiAgICAgIHZhciBBID0gaXNDYWxsYWJsZShDKSA/IE9iamVjdChuZXcgQyhsZW4pKSA6IG5ldyBBcnJheShsZW4pO1xuXG4gICAgICAvLyAxNi4gTGV0IGsgYmUgMC5cbiAgICAgIHZhciBrID0gMDtcbiAgICAgIC8vIDE3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW7igKYgKGFsc28gc3RlcHMgYSAtIGgpXG4gICAgICB2YXIga1ZhbHVlO1xuICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcbiAgICAgICAga1ZhbHVlID0gaXRlbXNba107XG4gICAgICAgIGlmIChtYXBGbikge1xuICAgICAgICAgIEFba10gPSB0eXBlb2YgVCA9PT0gJ3VuZGVmaW5lZCcgPyBtYXBGbihrVmFsdWUsIGspIDogbWFwRm4uY2FsbChULCBrVmFsdWUsIGspO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEFba10gPSBrVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgayArPSAxO1xuICAgICAgfVxuICAgICAgLy8gMTguIExldCBwdXRTdGF0dXMgYmUgUHV0KEEsIFwibGVuZ3RoXCIsIGxlbiwgdHJ1ZSkuXG4gICAgICBBLmxlbmd0aCA9IGxlbjtcbiAgICAgIC8vIDIwLiBSZXR1cm4gQS5cbiAgICAgIHJldHVybiBBO1xuICAgIH07XG4gIH0oKSk7XG59XG5cblxuY2xhc3MgRXh0ZW5kIHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgRXh0ZW5kaW5nIGFuIGh0bWwgZWxlbWVudCBhY2NlcHRzIGFycmF5IG9mIGVsZW1lbnRzLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHthcnJheX0gc2VsZWN0b3IgYWNjZXB0cyBqcXVlcnkgbGlrZSBzZWxlY3Rvci5cbiAgICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgZWxlbWVudHMpO1xuICAgIH1cblxuICAgIGVhY2goIGNhbGxiYWNrICkge1xuICAgICAgICBmb3IgKCBsZXQgZWwgb2YgQXJyYXkuZnJvbSh0aGlzKSApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoIGVsICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICBoaWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzVmlzaWJsZShlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldFdpZHRoID4gMCAmJiBlbGVtZW50Lm9mZnNldEhlaWdodCA+IDA7XG4gICAgfVxuICAgIFxuICAgIG9uVmlzaWJsZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKENBVEFNQVJBTi5jb3JlLkV4dGVuZC5pc1Zpc2libGUodGhpcykpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKENBVEFNQVJBTi5jb3JlLkV4dGVuZC5pc1Zpc2libGUodGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH1cblxuICAgIGFkZENsYXNzKCBjbGFzc05hbWUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFzQ2xhc3MoIGNsYXNzTmFtZSApIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIFxuICAgIG9uKCBldmVudCwgY2FsbGJhY2sgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBvZmYoIGV2ZW50LCBjYWxsYmFjayApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gRXh0ZW5kOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==