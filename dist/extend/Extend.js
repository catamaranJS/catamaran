"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(Object(r)),a=0,o=i.length;o>a;a++){var s=i[a],u=Object.getOwnPropertyDescriptor(r,s);void 0!==u&&u.enumerable&&(t[s]=r[s])}}}return t}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,i=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,u=i(r.length),l=t(n)?Object(new n(u)):new Array(u),c=0;u>c;)s=r[c],l[c]=o?"undefined"==typeof a?o(s,c):o.call(a,s,c):s,c+=1;return l.length=u,l}}());var Extend=function(){function e(t){_classCallCheck(this,e);var n=document.querySelectorAll(t);this.length=n.length,this.children=[],Object.assign(this,n)}return _createClass(e,[{key:"each",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Array.from(this)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.call(o)}}catch(s){n=!0,r=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}return this}},{key:"hide",value:function(){return this.each(function(){this.style.display="none"})}},{key:"show",value:function(){return this.each(function(){this.style.display="block"})}},{key:"onVisible",value:function(e){return this.each(function(){if(CATAMARAN.Extend.isVisible(this))e.call(this);else var t=setInterval(function(){CATAMARAN.Extend.isVisible(this)&&(e.call(this),clearInterval(t))},50)})}},{key:"addClass",value:function(e){return this.each(function(){this.classList.add(e)})}},{key:"removeClass",value:function(e){return this.each(function(){this.classList.remove(e)})}},{key:"hasClass",value:function(e){return this[0].classList.contains(e)}},{key:"on",value:function(e,t){return this.each(function(){this.addEventListener(e,t,!1)})}},{key:"off",value:function(e,t){return this.each(function(){this.removeEventListener(e,t,!1)})}}],[{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}}]),e}();module.exports=Extend;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuZC9FeHRlbmQuanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJhc3NpZ24iLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInRvIiwiYXJndW1lbnRzIiwibmV4dFNvdXJjZSIsImtleXNBcnJheSIsImtleXMiLCJuZXh0SW5kZXgiLCJsZW4iLCJuZXh0S2V5IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkFycmF5IiwiZnJvbSIsInRvU3RyIiwidG9TdHJpbmciLCJpc0NhbGxhYmxlIiwiZm4iLCJjYWxsIiwidG9JbnRlZ2VyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJpc0Zpbml0ZSIsIk1hdGgiLCJmbG9vciIsImFicyIsIm1heFNhZmVJbnRlZ2VyIiwicG93IiwidG9MZW5ndGgiLCJtaW4iLCJtYXgiLCJhcnJheUxpa2UiLCJDIiwidGhpcyIsIml0ZW1zIiwiVCIsIm1hcEZuIiwia1ZhbHVlIiwiQSIsImsiLCJFeHRlbmQiLCJzZWxlY3RvciIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGRyZW4iLCJjYWxsYmFjayIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiZWwiLCJlcnIiLCJlYWNoIiwic3R5bGUiLCJkaXNwbGF5IiwiQ0FUQU1BUkFOIiwiaXNWaXNpYmxlIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjb250YWlucyIsImV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlbGVtZW50Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFDQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixLQUY1aEJZLFFBQU9NLFFBQ1ZOLE9BQU9DLGVBQWVELE9BQVEsVUFDNUJILFlBQVksRUFDWkMsY0FBYyxFQUNkQyxVQUFVLEVBQ1ZRLE1BQU8sU0FBU2YsR0FFZCxHQUFlZ0IsU0FBWGhCLEdBQW1DLE9BQVhBLEVBQzFCLEtBQU0sSUFBSUgsV0FBVSwwQ0FJdEIsS0FBSyxHQUREb0IsR0FBS1QsT0FBT1IsR0FDUEUsRUFBSSxFQUFHQSxFQUFJZ0IsVUFBVWYsT0FBUUQsSUFBSyxDQUN6QyxHQUFJaUIsR0FBYUQsVUFBVWhCLEVBQzNCLElBQW1CYyxTQUFmRyxHQUEy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LE1BQU1DLFFBQVUsWUF3Q3pCbEUsSUFBSyxPQUNMSyxNQXJDQSxXQUNBLE1BQU9rQyxNQUFLeUIsS0FBSyxXQUNiekIsS0FBSzBCLE1BQU1DLFFBQVUsYUF5Q3pCbEUsSUFBSyxZQUNMSyxNQWxDSyxTQUFDK0MsR0FDTixNQUFPYixNQUFLeUIsS0FBSyxXQUNiLEdBQUlHLFVBQVVyQixPQUFPc0IsVUFBVTdCLE1BQzNCYSxFQUFTN0IsS0FBS2dCLFVBRWQsSUFBSThCLEdBQVFDLFlBQVksV0FDaEJILFVBQVVyQixPQUFPc0IsVUFBVTdCLFFBQzNCYSxFQUFTN0IsS0FBS2dCLE1BQ2RnQyxjQUFjRixLQUVuQixTQXVDWHJFLElBQUssV0FDTEssTUFsQ0ksU0FBRW1FLEdBQ04sTUFBT2pDLE1BQUt5QixLQUFLLFdBQ2J6QixLQUFLa0MsVUFBVUMsSUFBSUYsUUFzQ3ZCeEUsSUFBSyxjQUNMSyxNQW5DTyxTQUFFbUUsR0FDVCxNQUFPakMsTUFBS3lCLEtBQUssV0FDYnpCLEtBQUtrQyxVQUFVRSxPQUFPSCxRQXVDMUJ4RSxJQUFLLFdBQ0xLLE1BcENJLFNBQUVtRSxHQUNOLE1BQU9qQyxNQUFLLEdBQUdrQyxVQUFVRyxTQUFTSixNQXVDbEN4RSxJQUFLLEtBQ0xLLE1BckNGLFNBQUV3RSxFQUFPekIsR0FDUCxNQUFPYixNQUFLeUIsS0FBSyxXQUNiekIsS0FBS3VDLGlCQUFpQkQsRUFBT3pCLEdBQVUsUUF5QzNDcEQsSUFBSyxNQUNMSyxNQXRDRCxTQUFFd0UsRUFBT3pCLEdBQ1IsTUFBT2IsTUFBS3lCLEtBQUssV0FDYnpCLEtBQUt3QyxvQkFBb0JGLEVBQU96QixHQUFVLFVBMEM5Q3BELElBQUssWUFDTEssTUF2RlksU0FBQzJFLEdBQ2IsTUFBT0EsR0FBUUMsWUFBYyxHQUFLRCxFQUFRRSxhQUFlLE1BbEMzRHBDLElBbUZOcUMsUUFBT0MsUUFBVXRDIiwiZmlsZSI6ImV4dGVuZC9FeHRlbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL3BvbHlmaWxsIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbmlmICghT2JqZWN0LmFzc2lnbikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LCAnYXNzaWduJywge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAndXNlIHN0cmljdCc7XG4gICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGZpcnN0IGFyZ3VtZW50IHRvIG9iamVjdCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBpZiAobmV4dFNvdXJjZSA9PT0gdW5kZWZpbmVkIHx8IG5leHRTb3VyY2UgPT09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0U291cmNlID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgICAgIHZhciBrZXlzQXJyYXkgPSBPYmplY3Qua2V5cyhPYmplY3QobmV4dFNvdXJjZSkpO1xuICAgICAgICBmb3IgKHZhciBuZXh0SW5kZXggPSAwLCBsZW4gPSBrZXlzQXJyYXkubGVuZ3RoOyBuZXh0SW5kZXggPCBsZW47IG5leHRJbmRleCsrKSB7XG4gICAgICAgICAgdmFyIG5leHRLZXkgPSBrZXlzQXJyYXlbbmV4dEluZGV4XTtcbiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSwgbmV4dEtleSk7XG4gICAgICAgICAgaWYgKGRlc2MgIT09IHVuZGVmaW5lZCAmJiBkZXNjLmVudW1lcmFibGUpIHtcbiAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0bztcbiAgICB9XG4gIH0pO1xufVxuLy8gcG9seWZpbGwgIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2Zyb21cbi8vIFByb2R1Y3Rpb24gc3RlcHMgb2YgRUNNQS0yNjIsIEVkaXRpb24gNiwgMjIuMS4yLjFcbi8vIFJlZmVyZW5jZTogaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWFycmF5LmZyb21cbmlmICghQXJyYXkuZnJvbSkge1xuICBBcnJheS5mcm9tID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgIHZhciBpc0NhbGxhYmxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nIHx8IHRvU3RyLmNhbGwoZm4pID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICAgIH07XG4gICAgdmFyIHRvSW50ZWdlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIG51bWJlciA9IE51bWJlcih2YWx1ZSk7XG4gICAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gMDsgfVxuICAgICAgaWYgKG51bWJlciA9PT0gMCB8fCAhaXNGaW5pdGUobnVtYmVyKSkgeyByZXR1cm4gbnVtYmVyOyB9XG4gICAgICByZXR1cm4gKG51bWJlciA+IDAgPyAxIDogLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpKTtcbiAgICB9O1xuICAgIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gICAgdmFyIHRvTGVuZ3RoID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgbGVuID0gdG9JbnRlZ2VyKHZhbHVlKTtcbiAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChsZW4sIDApLCBtYXhTYWZlSW50ZWdlcik7XG4gICAgfTtcblxuICAgIC8vIFRoZSBsZW5ndGggcHJvcGVydHkgb2YgdGhlIGZyb20gbWV0aG9kIGlzIDEuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlLyosIG1hcEZuLCB0aGlzQXJnICovKSB7XG4gICAgICAvLyAxLiBMZXQgQyBiZSB0aGUgdGhpcyB2YWx1ZS5cbiAgICAgIHZhciBDID0gdGhpcztcblxuICAgICAgLy8gMi4gTGV0IGl0ZW1zIGJlIFRvT2JqZWN0KGFycmF5TGlrZSkuXG4gICAgICB2YXIgaXRlbXMgPSBPYmplY3QoYXJyYXlMaWtlKTtcblxuICAgICAgLy8gMy4gUmV0dXJuSWZBYnJ1cHQoaXRlbXMpLlxuICAgICAgaWYgKGFycmF5TGlrZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBcnJheS5mcm9tIHJlcXVpcmVzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IC0gbm90IG51bGwgb3IgdW5kZWZpbmVkXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBJZiBtYXBmbiBpcyB1bmRlZmluZWQsIHRoZW4gbGV0IG1hcHBpbmcgYmUgZmFsc2UuXG4gICAgICB2YXIgbWFwRm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgdW5kZWZpbmVkO1xuICAgICAgdmFyIFQ7XG4gICAgICBpZiAodHlwZW9mIG1hcEZuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyA1LiBlbHNlICAgICAgXG4gICAgICAgIC8vIDUuIGEgSWYgSXNDYWxsYWJsZShtYXBmbikgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKCFpc0NhbGxhYmxlKG1hcEZuKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LmZyb206IHdoZW4gcHJvdmlkZWQsIHRoZSBzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBiLiBJZiB0aGlzQXJnIHdhcyBzdXBwbGllZCwgbGV0IFQgYmUgdGhpc0FyZzsgZWxzZSBsZXQgVCBiZSB1bmRlZmluZWQuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuICAgICAgICAgIFQgPSBhcmd1bWVudHNbMl07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gMTAuIExldCBsZW5WYWx1ZSBiZSBHZXQoaXRlbXMsIFwibGVuZ3RoXCIpLlxuICAgICAgLy8gMTEuIExldCBsZW4gYmUgVG9MZW5ndGgobGVuVmFsdWUpLlxuICAgICAgdmFyIGxlbiA9IHRvTGVuZ3RoKGl0ZW1zLmxlbmd0aCk7XG5cbiAgICAgIC8vIDEzLiBJZiBJc0NvbnN0cnVjdG9yKEMpIGlzIHRydWUsIHRoZW5cbiAgICAgIC8vIDEzLiBhLiBMZXQgQSBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEMgd2l0aCBhbiBhcmd1bWVudCBsaXN0IGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBpdGVtIGxlbi5cbiAgICAgIC8vIDE0LiBhLiBFbHNlLCBMZXQgQSBiZSBBcnJheUNyZWF0ZShsZW4pLlxuICAgICAgdmFyIEEgPSBpc0NhbGxhYmxlKEMpID8gT2JqZWN0KG5ldyBDKGxlbikpIDogbmV3IEFycmF5KGxlbik7XG5cbiAgICAgIC8vIDE2LiBMZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSAwO1xuICAgICAgLy8gMTcuIFJlcGVhdCwgd2hpbGUgayA8IGxlbuKApiAoYWxzbyBzdGVwcyBhIC0gaClcbiAgICAgIHZhciBrVmFsdWU7XG4gICAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgICBrVmFsdWUgPSBpdGVtc1trXTtcbiAgICAgICAgaWYgKG1hcEZuKSB7XG4gICAgICAgICAgQVtrXSA9IHR5cGVvZiBUID09PSAndW5kZWZpbmVkJyA/IG1hcEZuKGtWYWx1ZSwgaykgOiBtYXBGbi5jYWxsKFQsIGtWYWx1ZSwgayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQVtrXSA9IGtWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBrICs9IDE7XG4gICAgICB9XG4gICAgICAvLyAxOC4gTGV0IHB1dFN0YXR1cyBiZSBQdXQoQSwgXCJsZW5ndGhcIiwgbGVuLCB0cnVlKS5cbiAgICAgIEEubGVuZ3RoID0gbGVuO1xuICAgICAgLy8gMjAuIFJldHVybiBBLlxuICAgICAgcmV0dXJuIEE7XG4gICAgfTtcbiAgfSgpKTtcbn1cblxuXG5jbGFzcyBFeHRlbmQge1xuICAvKipcbiAgICogUmVwcmVzZW50cyBFeHRlbmRpbmcgYW4gaHRtbCBlbGVtZW50IGFjY2VwdHMgYXJyYXkgb2YgZWxlbWVudHMuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge2FycmF5fSBzZWxlY3RvciBhY2NlcHRzIGpxdWVyeSBsaWtlIHNlbGVjdG9yLlxuICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBlbGVtZW50cyk7XG4gICAgfVxuXG4gICAgZWFjaCggY2FsbGJhY2sgKSB7XG4gICAgICAgIGZvciAoIGxldCBlbCBvZiBBcnJheS5mcm9tKHRoaXMpICkge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCggZWwgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNWaXNpYmxlKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwICYmIGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMDtcbiAgICB9XG4gICAgXG4gICAgb25WaXNpYmxlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoQ0FUQU1BUkFOLkV4dGVuZC5pc1Zpc2libGUodGhpcykpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKENBVEFNQVJBTi5FeHRlbmQuaXNWaXNpYmxlKHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBhZGRDbGFzcyggY2xhc3NOYW1lICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZW1vdmVDbGFzcyggY2xhc3NOYW1lICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhc0NsYXNzKCBjbGFzc05hbWUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICBcbiAgICBvbiggZXZlbnQsIGNhbGxiYWNrICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgb2ZmKCBldmVudCwgY2FsbGJhY2sgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEV4dGVuZDsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=