"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),CES=require("ces"),utils=require("./utils/utils"),e_scene=require("./entites/e_scene"),e_cameravr=require("./entites/e_cameravr"),e_box=require("./entites/e_box"),e_light=require("./entites/e_light"),bces=function(){function e(){_classCallCheck(this,e),this._defaults=utils.defaultArgs(),this._crurrentScene,this._e_scene=new e_scene,this._e_cameravr=null,this.world=new CES.World,this.world.addEntity(this._e_scene.entity),this.canvas,this._assets=[],Promise.all([document.querySelector("canvas")]).then(this.init.apply(this))}return _createClass(e,[{key:"init",value:function(){this.canvas=document.querySelector("canvas"),this.canvas.addEventListener("canvas_init",function(e){this.jsonAssets=[{name:"grass",src:"/assets/img/grass.jpg",type:"image"}],this._crurrentScene=this._defaults._scene=this._e_scene.scene.scene,utils.assetsLoad.apply(this)}.bind(this),!1)}},{key:"initListners",value:function(){window.addEventListener("resize",function(){this.canvas.heigth=window.innerHeight,this.canvas.width=window.innerWidth,this._crurrentScene.getEngine().resize()}.bind(this))}},{key:"assetLoadingFinished",value:function(){this._defaults._name="camera",this._defaults._canvas=this.canvas,this._e_cameravr=new e_cameravr(this._defaults),this.world.addEntity(this._e_cameravr.entity),this._defaults._name=this._defaults._type="box",this._defaults._diffuseColor=utils.color();var e=new e_box(this._defaults);this.world.addEntity(e.entity),this._defaults._name=this._defaults._type="Hemispheric",this._defaults._position=new BABYLON.Vector3(0,10,0);var t=new e_light(this._defaults);this.world.addEntity(t.entity),this.initSceneAnimation(),this.initListners()}},{key:"initSceneAnimation",value:function(){this.tick=.01,this._crurrentScene.getEngine().runRenderLoop(function(){this.tick+=.01,this._crurrentScene.render(),this.world.update(this.tick)}.bind(this))}}]),e}();module.exports=bces;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvYmFieWxvbmNlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIkNFUyIsInJlcXVpcmUiLCJ1dGlscyIsImVfc2NlbmUiLCJlX2NhbWVyYXZyIiwiZV9ib3giLCJlX2xpZ2h0IiwiYmNlcyIsInRoaXMiLCJfZGVmYXVsdHMiLCJkZWZhdWx0QXJncyIsIl9jcnVycmVudFNjZW5lIiwiX2Vfc2NlbmUiLCJfZV9jYW1lcmF2ciIsIndvcmxkIiwiV29ybGQiLCJhZGRFbnRpdHkiLCJlbnRpdHkiLCJjYW52YXMiLCJfYXNzZXRzIiwiUHJvbWlzZSIsImFsbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRoZW4iLCJpbml0IiwiYXBwbHkiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwianNvbkFzc2V0cyIsIm5hbWUiLCJzcmMiLCJ0eXBlIiwiX3NjZW5lIiwic2NlbmUiLCJhc3NldHNMb2FkIiwiYmluZCIsIndpbmRvdyIsImhlaWd0aCIsImlubmVySGVpZ2h0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwiZ2V0RW5naW5lIiwicmVzaXplIiwiX25hbWUiLCJfY2FudmFzIiwiX3R5cGUiLCJfZGlmZnVzZUNvbG9yIiwiY29sb3IiLCJib3giLCJfcG9zaXRpb24iLCJCQUJZTE9OIiwiVmVjdG9yMyIsImxpZ2h0IiwiaW5pdFNjZW5lQW5pbWF0aW9uIiwiaW5pdExpc3RuZXJzIiwidGljayIsInJ1blJlbmRlckxvb3Ai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aEJuQixLQUFLaUQsS0FBTyxJQUNaakQsS0FBS0csZUFBZWdDLFlBQVllLGNBQWMsV0FDNUNsRCxLQUFLaUQsTUFBUSxJQUNQakQsS0FBS0csZUFBZWdELFNBQ3BCbkQsS0FBS00sTUFBTThDLE9BQU9wRCxLQUFLaUQsT0FDMUJwQixLQUFLN0IsV0E5RFBELElBaUVOc0QsUUFBT0MsUUFBVXZEIiwiZmlsZSI6ImNvcmUvYmFieWxvbmNlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDRVMgPSByZXF1aXJlKCdjZXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXRpbHMnKTtcbnZhciBlX3NjZW5lID0gcmVxdWlyZSgnLi9lbnRpdGVzL2Vfc2NlbmUnKTtcbnZhciBlX2NhbWVyYXZyID0gcmVxdWlyZSgnLi9lbnRpdGVzL2VfY2FtZXJhdnInKTtcbnZhciBlX2JveCA9IHJlcXVpcmUoJy4vZW50aXRlcy9lX2JveCcpO1xudmFyIGVfbGlnaHQgPSByZXF1aXJlKCcuL2VudGl0ZXMvZV9saWdodCcpO1xuXG5jbGFzcyBiY2Vze1xuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMuX2RlZmF1bHRzID0gdXRpbHMuZGVmYXVsdEFyZ3MoKTtcblx0XHR0aGlzLl9jcnVycmVudFNjZW5lO1xuXHRcdHRoaXMuX2Vfc2NlbmUgPSBuZXcgZV9zY2VuZSgpO1xuXHRcdHRoaXMuX2VfY2FtZXJhdnIgPSBudWxsO1xuXHRcdHRoaXMud29ybGQgPSBuZXcgQ0VTLldvcmxkKCk7XG5cdFx0dGhpcy53b3JsZC5hZGRFbnRpdHkodGhpcy5fZV9zY2VuZS5lbnRpdHkpO1xuXHRcdHRoaXMuY2FudmFzO1xuXHRcdHRoaXMuX2Fzc2V0cyA9IFtdO1xuXHRcdFByb21pc2UuYWxsKFtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKV0pLnRoZW4odGhpcy5pbml0LmFwcGx5KHRoaXMpKTtcblx0fVxuXG5cdGluaXQoKXtcblx0XHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG5cdFx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjYW52YXNfaW5pdCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdHRoaXMuanNvbkFzc2V0cyA9IFtcblx0XHQgICAgICAgICAgICB7bmFtZSA6IFwiZ3Jhc3NcIiwgc3JjIDogXCIvYXNzZXRzL2ltZy9ncmFzcy5qcGdcIiwgdHlwZTogJ2ltYWdlJyB9XG5cdFx0ICAgICAgICBdO1xuXHRcdCAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZSA9IHRoaXMuX2RlZmF1bHRzLl9zY2VuZSA9IHRoaXMuX2Vfc2NlbmUuc2NlbmUuc2NlbmU7XG5cdFx0XHRcdHV0aWxzLmFzc2V0c0xvYWQuYXBwbHkodGhpcyk7XG5cdFx0XHR9LmJpbmQodGhpcyksIGZhbHNlKTtcblx0fVxuXG5cdGluaXRMaXN0bmVycygpe1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIFx0dGhpcy5jYW52YXMuaGVpZ3RoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBcdFx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1x0XG5cdFx0ICAgICAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZS5nZXRFbmdpbmUoKS5yZXNpemUoKTtcblx0XHQgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cdH1cblxuXHRhc3NldExvYWRpbmdGaW5pc2hlZCgpe1xuXHRcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX25hbWUgPSAnY2FtZXJhJztcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX2NhbnZhcyA9IHRoaXMuY2FudmFzO1xuXHRcdFx0XHR0aGlzLl9lX2NhbWVyYXZyID0gbmV3IGVfY2FtZXJhdnIodGhpcy5fZGVmYXVsdHMpO1xuXHRcdFx0XHR0aGlzLndvcmxkLmFkZEVudGl0eSh0aGlzLl9lX2NhbWVyYXZyLmVudGl0eSk7XG5cdFx0XHRcdHRoaXMuX2RlZmF1bHRzLl9uYW1lID0gIHRoaXMuX2RlZmF1bHRzLl90eXBlID0gJ2JveCc7XG5cdFx0XHRcdC8vdGhpcy5fZGVmYXVsdHMuX3RleHR1cmUgPSB0aGlzLl9hc3NldHNbXCJncmFzc1wiXTtcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX2RpZmZ1c2VDb2xvciA9IHV0aWxzLmNvbG9yKCk7XG5cblx0XHRcdFx0dmFyIGJveCA9IG5ldyBlX2JveCh0aGlzLl9kZWZhdWx0cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHR0aGlzLndvcmxkLmFkZEVudGl0eShib3guZW50aXR5KTtcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX25hbWUgPSAgdGhpcy5fZGVmYXVsdHMuX3R5cGUgPSAnSGVtaXNwaGVyaWMnO1xuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fcG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDEwLCAwKTtcblx0XHRcdFx0dmFyIGxpZ2h0ID0gbmV3IGVfbGlnaHQodGhpcy5fZGVmYXVsdHMpO1xuXHRcdFx0XHR0aGlzLndvcmxkLmFkZEVudGl0eShsaWdodC5lbnRpdHkpO1xuXG5cblx0XHRcdFx0dGhpcy5pbml0U2NlbmVBbmltYXRpb24oKTtcblx0XHRcdFx0dGhpcy5pbml0TGlzdG5lcnMoKTtcblx0XHQgICAgICAgIFxuXHR9XG5cblx0aW5pdFNjZW5lQW5pbWF0aW9uKCl7XG5cdFx0XHR0aGlzLnRpY2sgPSAwLjAxO1xuXHRcdFx0dGhpcy5fY3J1cnJlbnRTY2VuZS5nZXRFbmdpbmUoKS5ydW5SZW5kZXJMb29wKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0IHRoaXMudGljayArPSAuMDE7XG5cdFx0ICAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZS5yZW5kZXIoKTtcblx0XHQgICAgICAgICB0aGlzLndvcmxkLnVwZGF0ZSh0aGlzLnRpY2spO1xuXHRcdCAgICB9LmJpbmQodGhpcykpO1xuXHR9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGJjZXM7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9