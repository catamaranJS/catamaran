"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),BABYLON=require("../lib/babylon"),utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"defaultArgs",value:function(){var e={_name:null,_cursor:null,_cursorVR1:null,_cursorVR2:null,_layerMask:268435455,_activeDialogLayer:268435456,_type:"FreeCamera",_position:new BABYLON.Vector3(0,0,0),_rotation:new BABYLON.Vector3(0,0,0),_diameterTop:3,_diameterBottom:3,_diameter:10,_size:10,_subdivisions:6,_tesselation:6,_thickness:3,_segements:10,_canvas:null,_material:{_texture:null,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:null},_scene:{}};return e}},{key:"returnDefaultMaterial",value:function(){return{name:"default",_texture:null,_alpha:1,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:"125, 0, 127"}}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"merge_objects",value:function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}},{key:"degToRad",value:function(e){return e*(Math.PI/180)}},{key:"color",value:function(){var e=arguments.length<=0||void 0===arguments[0]?125:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?127:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return null==a?new BABYLON.Color3(e/255,t/255,n/255):new BABYLON.Color4(e/255,t/255,n/255,a)}},{key:"getMaterials",value:function(e,t){e.push(this.returnDefaultMaterial());for(var n=0;n<e.length;n++)if(e[n].name==t)return void 0!=typeof e[n]._diffuseColor&&(e[n]._diffuseColor=this.getColor(e[n]._diffuseColor)),e[n]}},{key:"getColor",value:function(e){return e=e.split(","),4!=e.length?this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseFloat(e[3]))}},{key:"getVector",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"position":arguments[1];return e=e.split(","),"position"==t?new BABYLON.Vector3(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):new BABYLON.Vector3(this.degToRad(parseInt(e[0])),this.degToRad(parseInt(e[1])),this.degToRad(parseInt(e[2])))}},{key:"assetsLoad",value:function(){var e=new BABYLON.AssetsManager(this._crurrentScene);this.jsonAssets.forEach(function(t){function n(){var n=e.addTextureTask(t.name,t.src);n.onSuccess=function(e){this._assets[e.name]=e.texture}.bind(this),n.onError=function(e){console.log(e.name+" - failed to load")}.bind(this)}switch(t.type){case"img":n();break;case"audio":break;case"video":break;case"hdr":break;default:n.apply(this)}e.load()}.bind(this)),e.onFinish=this.assetLoadingFinished.bind(this)}}]),e}();module.exports=utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL3V0aWxzL3V0aWxzLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQkFCWUxPTiIsInJlcXVpcmUiLCJ1dGlscyIsInRoaXMiLCJ2YWx1ZSIsIl9kZWZhdWx0cyIsIl9uYW1lIiwiX2N1cnNvciIsIl9jdXJzb3JWUjEiLCJfY3Vyc29yVlIyIiwiX2xheWVyTWFzayIsIl9hY3RpdmVEaWFsb2dMYXllciIsIl90eXBlIiwiX3Bvc2l0aW9uIiwiVmVjdG9yMyIsIl9yb3RhdGlvbiIsIl9kaWFtZXRlclRvcCIsIl9kaWFtZXRlckJvdHRvbSIsIl9kaWFtZXRlciIsIl9zaXplIiwiX3N1YmRpdmlzaW9ucyIsIl90ZXNzZWxhdGlvbiIsIl90aGlja25lc3MiLCJfc2VnZW1lbnRzIiwiX2NhbnZhcyIsIl9tYXRlcmlhbCIsIl90ZXh0dXJlIiwiX3VTY2FsZSIsIl92U2NhbGUiLCJfYmFja0ZhY2VDdWxsaW5nIiwiX3ZPZmZzZXQiLCJfdU9mZnNldCIsIl9oYXNBbHBoYSIsIl9kaWZmdXNlQ29sb3IiLCJfc2NlbmUiLCJuYW1lIiwiX2FscGhhIiwiczQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIm9iajEiLCJvYmoyIiwib2JqMyIsImF0dHJuYW1lIiwiZGVncmVlcyIsIlBJIiwiciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImciLCJiIiwiYSIsIkNvbG9yMyIsIkNvbG9yNCIsIl9tYXRlcmlhbHMiLCJwdXNoIiwicmV0dXJuRGVmYXVsdE1hdGVyaWFsIiwiZ2V0Q29sb3IiLCJfZGF0YVN0cmluZyIsInNwbGl0IiwiY29sb3IiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJ0eXBlIiwiZGVnVG9SYWQiLCJsb2FkZXIiLCJBc3NldHNNYW5hZ2VyIiwiX2NydXJyZW50U2NlbmUiLCJqc29uQXNzZXRzIiwiZm9yRWFjaCIsIm9iaiIsImltZ0Fzc2V0IiwiaW1nIiwiYWRkVGV4dHVyZVRhc2siLCJzcmMiLCJvblN1Y2Nlc3MiLCJ0IiwiX2Fzc2V0cyIsInRleHR1cmUiLCJiaW5kIiwib25FcnJvciIsImNvbnNvbGUiLCJsb2ciLCJhcHBseSIsImxvYWQiLCJvbkZpbmlzaCIsImFzc2V0TG9hZGluZ0ZpbmlzaGVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsTUFGN2hCa0IsUUFBVUMsUUFBUSxrQkFDaEJDLE1BQUssV0FRVixRQVJLQSxLQVNKdEIsZ0JBQWdCdUIsS0FUWkQsR0E0UEwsTUFoUEFsQixjQVpLa0IsRUFBSyxPQWFUTixJQUFLLGNBUUxRLE1BZGlCLFdBSWpCLEdB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dmFyIEJBQllMT04gPSByZXF1aXJlKCcuLi9saWIvYmFieWxvbicpO1xuY2xhc3MgdXRpbHN7XG4vKipcbiAqIC4uLlxuICogQGF1dGhvciBCcmVuZG9uIFNtaXRoXG4gKiBodHRwOi8vc2VhY2xvdWQ5Lm9yZ1xuICogTGlnaHRXZWlnaHQgM0QgU3lzdGVtIERlc2lnbiBlbmdpbmVcbiAqL1xuXHRzdGF0aWMgZGVmYXVsdEFyZ3MoKXtcblxuXG5cblx0XHR2YXIgX2RlZmF1bHRzID0gXG5cdFx0ICB7IFxuXHRcdFx0XHRfbmFtZTpudWxsLCBcblx0XHRcdFx0X2N1cnNvcjogbnVsbCxcblx0XHRcdFx0X2N1cnNvclZSMTogbnVsbCxcblx0XHRcdFx0X2N1cnNvclZSMjogbnVsbCxcblx0XHRcdFx0X2xheWVyTWFzazogMHgwRkZGRkZGRixcblx0XHRcdFx0X2FjdGl2ZURpYWxvZ0xheWVyOiAweDEwMDAwMDAwLFxuXHRcdFx0XHRfdHlwZTonRnJlZUNhbWVyYScsIFxuXHRcdFx0XHRfcG9zaXRpb246bmV3IEJBQllMT04uVmVjdG9yMygwLCAwLCAwKSwgXG5cdFx0XHRcdF9yb3RhdGlvbjpuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDAsIDApLCBcblx0XHRcdFx0X2RpYW1ldGVyVG9wOjMsXG5cdFx0XHRcdF9kaWFtZXRlckJvdHRvbTozLFxuXHRcdFx0XHRfZGlhbWV0ZXI6MTAuMCxcblx0XHRcdFx0X3NpemU6MTAuMCxcblx0XHRcdFx0X3N1YmRpdmlzaW9uczo2LFxuXHRcdFx0XHRfdGVzc2VsYXRpb246Nixcblx0XHRcdFx0X3RoaWNrbmVzczozLFxuXHRcdFx0XHRfc2VnZW1lbnRzOjEwLjAsXG5cdFx0XHRcdF9jYW52YXM6bnVsbCxcblx0XHRcdFx0X21hdGVyaWFsOntcblx0XHRcdFx0XHRfdGV4dHVyZTpudWxsLFxuXHRcdFx0XHRcdF91U2NhbGU6IDEuMCxcblx0XHRcdFx0XHRfdlNjYWxlOiAxLjAsXG5cdFx0XHRcdFx0X2JhY2tGYWNlQ3VsbGluZzogdHJ1ZSxcblx0XHRcdFx0XHRfdk9mZnNldDogMC4wLFxuXHRcdFx0XHRcdF91T2Zmc2V0OiAwLjAsXG5cdFx0XHRcdFx0X2hhc0FscGhhOmZhbHNlLFxuXHRcdFx0XHRcdF9kaWZmdXNlQ29sb3I6IG51bGwsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdF9zY2VuZTp7fVxuXHRcdFx0fVxuXHRcdHJldHVybiBfZGVmYXVsdHM7XG5cdH1cblxuXHQvKipcblx0ICogXG5cdCAqIHNldHNEZWZhdWx0TWF0ZXJpYWxcblx0ICovXG5cdHN0YXRpYyByZXR1cm5EZWZhdWx0TWF0ZXJpYWwoKXtcblx0XHQgcmV0dXJuIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiZGVmYXVsdFwiLFxuXHQgICAgICBcIl90ZXh0dXJlXCI6IG51bGwsXG5cdCAgICAgIFwiX2FscGhhXCI6IDEsXG5cdCAgICAgIFwiX3VTY2FsZVwiOiAxLFxuXHQgICAgICBcIl92U2NhbGVcIjogMSxcblx0ICAgICAgXCJfYmFja0ZhY2VDdWxsaW5nXCI6IHRydWUsXG5cdCAgICAgIFwiX3ZPZmZzZXRcIjogMCxcblx0ICAgICAgXCJfdU9mZnNldFwiOiAwLFxuXHQgICAgICBcIl9oYXNBbHBoYVwiOiBmYWxzZSxcblx0ICAgICAgXCJfZGlmZnVzZUNvbG9yXCI6IFwiMTI1LCAwLCAxMjdcIlxuXHQgICAgfVxuXHR9XG5cblx0LyoqXG5cdCAqIGdlbmVyYXRlcyBndWlkXG5cdCAqL1xuXHRzdGF0aWMgZ3VpZCgpIHtcbiAgXHQgZnVuY3Rpb24gczQoKSB7XG5cdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0ICAgICAgLnRvU3RyaW5nKDE2KVxuXHQgICAgICAuc3Vic3RyaW5nKDEpO1xuXHQgIH1cblx0ICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArXG5cdCAgICBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJ3cml0ZXMgb2JqMSdzIHZhbHVlcyB3aXRoIG9iajIncyBhbmQgYWRkcyBvYmoyJ3MgaWYgbm9uIGV4aXN0ZW50IGluIG9iajFcblx0ICogQHBhcmFtIG9iajFcblx0ICogQHBhcmFtIG9iajJcblx0ICogQHJldHVybnMgb2JqMyBhIG5ldyBvYmplY3QgYmFzZWQgb24gb2JqMSBhbmQgb2JqMlxuXHQgKi9cblx0c3RhdGljIG1lcmdlX29iamVjdHMob2JqMSxvYmoyKXtcblx0ICAgIHZhciBvYmozID0ge307XG5cdCAgICBmb3IgKHZhciBhdHRybmFtZSBpbiBvYmoxKSB7IG9iajNbYXR0cm5hbWVdID0gb2JqMVthdHRybmFtZV07IH1cblx0ICAgIGZvciAodmFyIGF0dHJuYW1lIGluIG9iajIpIHsgb2JqM1thdHRybmFtZV0gPSBvYmoyW2F0dHJuYW1lXTsgfVxuXHQgICAgcmV0dXJuIG9iajM7XG5cdH1cblxuXHQvKipcblx0ICogY29udmVydHMgZGVncmVlcyB0byByYWRpYW5zIFxuXHQgKiBAcGFyYW0gZGVncmVlc1xuXHQgKiBAcmV0dXJucyByZXR1bnJzIGEgcmFkaWFuXG5cdCAqL1xuXHRzdGF0aWMgZGVnVG9SYWQoZGVncmVlcyl7XG5cdFx0cmV0dXJuIGRlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCk7XG5cdH1cblxuXHQvKipcblx0ICogcmV0dXJucyBhIGNvbG9yMyBvciBjb2xvcjQgb2JqZWN0XG5cdCAqIEBwYXJhbSByIDEgLSAyNTVcblx0ICogQHBhcmFtIGcgMSAtIDI1NVxuXHQgKiBAcGFyYW0gYiAxIC0gMjU1XG5cdCAqIEBwYXJhbSBhbHBoYSBmbG9hdCAxLjAgLSAwLjBcblx0ICogQHJldHVybnMgcmV0dW5ycyBhIGNvbG9yMyBvciBjb2xvcjRcblx0ICovXG5cdHN0YXRpYyBjb2xvcihyID0gMTI1LGcgPSAwLGIgPSAxMjcsYSA9IG51bGwpe1xuXHRcdGlmKGEgPT0gbnVsbCl7XG5cdFx0XHRyZXR1cm4gbmV3IEJBQllMT04uQ29sb3IzKChyLzI1NSksIChnLzI1NSksIChiLzI1NSkpO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIG5ldyBCQUJZTE9OLkNvbG9yNCgoci8yNTUpLCAoZy8yNTUpLCAoYi8yNTUpLCBhKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogcmV0dXJucyBhIGNvbG9yMyBvciBjb2xvcjQgb2JqZWN0XG5cdCAqIEBwYXJhbSBfbWF0ZXJpYWxzXG5cdCAqIEBwYXJhbSBfbmFtZVxuXHQgKiBAcmV0dXJucyByZXR1bnJzIGEgTWF0ZXJpYWwgZm9yIHRoZSBvYmplY3Rcblx0ICovXG5cdHN0YXRpYyBnZXRNYXRlcmlhbHMoX21hdGVyaWFscywgX25hbWUpe1xuXHRcdC8vVE9ETzogSW1hZ2VzXG5cdFx0X21hdGVyaWFscy5wdXNoKHRoaXMucmV0dXJuRGVmYXVsdE1hdGVyaWFsKCkpO1xuXHRcdFxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCBfbWF0ZXJpYWxzLmxlbmd0aDsgaSsrKXtcblx0XHRcdGlmKF9tYXRlcmlhbHNbaV0ubmFtZSA9PSBfbmFtZSl7XG5cdFx0XHRcdGlmKHR5cGVvZiBfbWF0ZXJpYWxzW2ldLl9kaWZmdXNlQ29sb3IgIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRfbWF0ZXJpYWxzW2ldLl9kaWZmdXNlQ29sb3IgPSB0aGlzLmdldENvbG9yKF9tYXRlcmlhbHNbaV0uX2RpZmZ1c2VDb2xvcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIF9tYXRlcmlhbHNbaV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybnMgYSBjb2xvclxuXHQgKiBAcGFyYW0gX2RhdGFTdHJpbmcgZXhwZWN0cyBhIGNvbG9yIHN0cmluZyBsaWtlIFwiMTI3LCAxMjksIDBcIiAoUkdCKSBpciBcIjEyNywgMTI5LCAwLCAwLjVcIiAoUkdCQSlcblx0ICogQHJldHVybnMgcmV0dW5ycyBhIGNvbG9yIG9iamVjdCBhZnRlciBmZXRjaGluZyB0aGUgY29ycmVjdCBjb2xvciB0eXBlXG5cdCAqL1xuXHRzdGF0aWMgZ2V0Q29sb3IoX2RhdGFTdHJpbmcpe1xuXHRcdF9kYXRhU3RyaW5nID0gX2RhdGFTdHJpbmcuc3BsaXQoXCIsXCIpO1xuXHRcdGlmKF9kYXRhU3RyaW5nLmxlbmd0aCAhPSA0KXtcblx0XHRcdHJldHVybiB0aGlzLmNvbG9yKHBhcnNlSW50KF9kYXRhU3RyaW5nWzBdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMV0pLCBwYXJzZUludChfZGF0YVN0cmluZ1syXSkpO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIHRoaXMuY29sb3IocGFyc2VJbnQoX2RhdGFTdHJpbmdbMF0pLCBwYXJzZUludChfZGF0YVN0cmluZ1sxXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzJdKSwgcGFyc2VGbG9hdChfZGF0YVN0cmluZ1szXSkpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm5zIGEgdmVjdG9yXG5cdCAqIEBwYXJhbSBfZGF0YVN0cmluZyBleHBlY3RzIGEgdmVjb3RyIHN0cmluZyBsaWtlIFwiMTI3LCAxMjksIDBcIiBcblx0ICogQHJldHVybnMgdmVjdG9yXG5cdCAqL1xuXHRzdGF0aWMgZ2V0VmVjdG9yKF9kYXRhU3RyaW5nLCB0eXBlID0gXCJwb3NpdGlvblwiKXtcblx0XHRfZGF0YVN0cmluZyA9IF9kYXRhU3RyaW5nLnNwbGl0KFwiLFwiKTtcblx0XHRpZih0eXBlID09IFwicG9zaXRpb25cIil7XG5cdFx0XHRyZXR1cm4gbmV3IEJBQllMT04uVmVjdG9yMyhwYXJzZUludChfZGF0YVN0cmluZ1swXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzFdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMl0pKTtcblx0XHR9ZWxzZXtcblx0XHRcdHJldHVybiBuZXcgQkFCWUxPTi5WZWN0b3IzKHRoaXMuZGVnVG9SYWQocGFyc2VJbnQoX2RhdGFTdHJpbmdbMF0pKSwgdGhpcy5kZWdUb1JhZChwYXJzZUludChfZGF0YVN0cmluZ1sxXSkpLCB0aGlzLmRlZ1RvUmFkKHBhcnNlSW50KF9kYXRhU3RyaW5nWzJdKSkpO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cblx0Lypcblx0XHRsb2FkcyBhbiBhc3NldCBcblx0XHRzdGF0aWMgYXNzZXRzTG9hZFxuXHRcdGFyZ3VtZW50czogXG5cdFx0anNvbkFzc2V0cyA9IFtcbiAgICAgICAgICAgIHtuYW1lIDogXCJsb2dvXCIsIHNyYyA6IFwiYmFydHZyL2ltZy9iYXJ0VlJMb2dvX2IucG5nXCIsIHR5cGU6ICdpbWFnZScgfSxcbiAgICAgICAgICAgIHtuYW1lIDogXCJ0YXJnZXRDYW1cIiwgc3JjOiBcImJhcnR2ci9pbWcvdGFyZ2V0X3NtLnBuZ1wiLCB0eXBlOiAndmlkZW8nfVxuICAgICAgICBdO1xuICAgICAgICBhcmd1bWVudHM6IGFzc2V0SG9sZGVyLFxuICAgICAgICBhcmd1bWVudHM6IGNhbGxiYWNrIHdoZW4gZmluaW5zaGVkLFxuICAgICAgKi9cblxuXHRzdGF0aWMgYXNzZXRzTG9hZCgpe1xuXHRcdHZhciBsb2FkZXIgPSBuZXcgQkFCWUxPTi5Bc3NldHNNYW5hZ2VyKHRoaXMuX2NydXJyZW50U2NlbmUpO1xuICAgICAgICB0aGlzLmpzb25Bc3NldHMuZm9yRWFjaChmdW5jdGlvbihvYmopIHtcblxuXHQgICAgICAgIGZ1bmN0aW9uIGltZ0Fzc2V0KCl7XG5cdFx0XHRcdHZhciBpbWcgPSBsb2FkZXIuYWRkVGV4dHVyZVRhc2sob2JqLm5hbWUsIG9iai5zcmMpO1xuXHRcdFx0ICAgIGltZy5vblN1Y2Nlc3MgPSBmdW5jdGlvbih0KSB7XG5cdFx0XHQgICAgICAgICAgICB0aGlzLl9hc3NldHNbdC5uYW1lXSA9IHQudGV4dHVyZTtcblx0XHRcdCAgICB9LmJpbmQodGhpcyk7XG5cblx0XHRcdCAgICBpbWcub25FcnJvciA9IGZ1bmN0aW9uKHQpIHtcblx0XHRcdCAgICAgICAgIGNvbnNvbGUubG9nKHQubmFtZSArICcgLSBmYWlsZWQgdG8gbG9hZCcpO1xuXHRcdFx0ICAgIH0uYmluZCh0aGlzKTtcblx0XHRcdH1cblxuXHQgICAgICAgIHN3aXRjaChvYmoudHlwZSkge1xuXHRcdFx0ICAgIGNhc2UgJ2ltZyc6XG5cdFx0XHQgICAgXHRpbWdBc3NldCgpO1xuXHRcdFx0ICAgICAgICBicmVhaztcblx0XHRcdCAgICBjYXNlICdhdWRpbyc6XG5cdFx0XHQgICAgICAgIC8vdG9kb1xuXHRcdFx0XHRcdFxuXHRcdFx0ICAgICAgICBicmVhaztcblx0XHRcdCAgICBjYXNlICd2aWRlbyc6XG5cdFx0XHQgICAgICAgIC8vdG9kb1xuXHRcdFx0ICAgICAgICBicmVhaztcdFxuXHRcdFx0ICAgIGNhc2UgJ2hkcic6XG5cdFx0XHQgICAgICAgIC8vdG9kb1xuXHRcdFx0ICAgICAgICBicmVhazsgIFx0ICAgIFx0ICAgICAgICAgICAgICAgIFxuXHRcdFx0ICAgIGRlZmF1bHQ6XG5cdFx0XHQgICAgICAgIGltZ0Fzc2V0LmFwcGx5KHRoaXMpO1xuXHRcdFx0IH1cblx0XHRcdCBsb2FkZXIubG9hZCgpO1xuXHRcdFxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgXG4gICAgICAgIGxvYWRlci5vbkZpbmlzaCA9IHRoaXMuYXNzZXRMb2FkaW5nRmluaXNoZWQuYmluZCh0aGlzKTtcblxuXHR9XG5cdFx0XG4gICAgICAgIFxuXG59XHRcdFx0XHRcbm1vZHVsZS5leHBvcnRzID0gdXRpbHM7XG5cblxuXHRcdCJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==