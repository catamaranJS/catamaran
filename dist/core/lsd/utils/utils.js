"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),BABYLON=require("../lib/babylon"),utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"defaultArgs",value:function(){var e={_name:null,_cursor:null,_hadModal:!1,_appendEL:null,_cursorVR1:null,_cursorVR2:null,_layerMask:268435455,_activeDialogLayer:268435456,_type:"FreeCamera",_position:new BABYLON.Vector3(0,0,0),_rotation:new BABYLON.Vector3(0,0,0),_diameterTop:3,_diameterBottom:3,_diameter:10,_size:10,_subdivisions:6,_tesselation:6,_thickness:3,_segements:10,_canvas:null,_material:{_texture:null,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:null},_scene:{}};return e}},{key:"returnDefaultMaterial",value:function(){return{name:"default",_texture:null,_alpha:1,_uScale:1,_vScale:1,_backFaceCulling:!0,_vOffset:0,_uOffset:0,_hasAlpha:!1,_diffuseColor:null}}},{key:"loadScript",value:function(e,t){var n=document.querySelector("head"),a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=t,a.onreadystatechange=function(){"complete"==this.readyState&&t()},n.appendChild(a)}},{key:"randomArr",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"randomPos",value:function(e,t){return Math.random()*(t-e)+e}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"merge_objects",value:function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}},{key:"degToRad",value:function(e){return e*(Math.PI/180)}},{key:"color",value:function(){var e=arguments.length<=0||void 0===arguments[0]?125:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?127:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return null==a?new BABYLON.Color3(e/255,t/255,n/255):new BABYLON.Color4(e/255,t/255,n/255,a)}},{key:"getMaterials",value:function(e,t){e.push(this.returnDefaultMaterial());for(var n=0;n<e.length;n++)if(e[n].name==t)return void 0!=typeof e[n]._diffuseColor&&null!=e[n]._diffuseColor&&(e[n]._diffuseColor=this.getColor(e[n]._diffuseColor)),e[n]}},{key:"getColor",value:function(e){return e=e.split(","),4!=e.length?this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):this.color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseFloat(e[3]))}},{key:"getVector",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"position":arguments[1];return e=e.split(","),"position"==t?new BABYLON.Vector3(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):new BABYLON.Vector3(this.degToRad(parseInt(e[0])),this.degToRad(parseInt(e[1])),this.degToRad(parseInt(e[2])))}},{key:"assetsLoad",value:function(){var e=new BABYLON.AssetsManager(this._scenes[this._activeScene]);this.jsonAssets.forEach(function(t){function n(){var n=e.addTextureTask(t.name,t.src);n.onSuccess=function(e){this._assets[e.name]=e.texture}.bind(this),n.onError=function(e){console.log(e.name+" - failed to load")}.bind(this)}switch(t.type){case"img":n();break;case"audio":break;case"video":break;case"hdr":break;default:n.apply(this)}e.load()}.bind(this)),e.onFinish=this.assetLoadingFinished.bind(this)}}]),e}();module.exports=utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL3V0aWxzL3V0aWxzLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQkFCWUxPTiIsInJlcXVpcmUiLCJ1dGlscyIsInRoaXMiLCJ2YWx1ZSIsIl9kZWZhdWx0cyIsIl9uYW1lIiwiX2N1cnNvciIsIl9oYWRNb2RhbCIsIl9hcHBlbmRFTCIsIl9jdXJzb3JWUjEiLCJfY3Vyc29yVlIyIiwiX2xheWVyTWFzayIsIl9hY3RpdmVEaWFsb2dMYXllciIsIl90eXBlIiwiX3Bvc2l0aW9uIiwiVmVjdG9yMyIsIl9yb3RhdGlvbiIsIl9kaWFtZXRlclRvcCIsIl9kaWFtZXRlckJvdHRvbSIsIl9kaWFtZXRlciIsIl9zaXplIiwiX3N1YmRpdmlzaW9ucyIsIl90ZXNzZWxhdGlvbiIsIl90aGlja25lc3MiLCJfc2VnZW1lbnRzIiwiX2NhbnZhcyIsIl9tYXRlcmlhbCIsIl90ZXh0dXJlIiwiX3VTY2FsZSIsIl92U2NhbGUiLCJfYmFja0ZhY2VDdWxsaW5nIiwiX3ZPZmZzZXQiLCJfdU9mZnNldCIsIl9oYXNBbHBoYSIsIl9kaWZmdXNlQ29sb3IiLCJfc2NlbmUiLCJuYW1lIiwiX2FscGhhIiwiX1NjcmlwdFNyYyIsIl9DYWxsYmFjayIsIl9IZWFkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX1NjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwic3JjIiwib25sb2FkIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImFwcGVuZENoaWxkIiwiYXJyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibWluIiwibWF4IiwiczQiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIm9iajEiLCJvYmoyIiwib2JqMyIsImF0dHJuYW1lIiwiZGVncmVlcyIsIlBJIiwiciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImciLCJiIiwiYSIsIkNvbG9yMyIsIkNvbG9yNCIsIl9tYXRlcmlhbHMiLCJwdXNoIiwicmV0dXJuRGVmYXVsdE1hdGVyaWFsIiwiZ2V0Q29sb3IiLCJfZGF0YVN0cmluZyIsInNwbGl0IiwiY29sb3IiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJkZWdUb1JhZCIsImxvYWRlciIsIkFzc2V0c01hbmFnZXIiLCJfc2NlbmVzIiwiX2FjdGl2ZVNjZW5lIiwianNvbkFzc2V0cyIsImZvckVhY2giLCJvYmoiLCJpbWdBc3NldCIsImltZyIsImFkZFRleHR1cmVUYXNrIiwib25TdWNjZXNzIiwidCIsIl9hc3NldHMiLCJ0ZXh0dXJlIiwiYmluZCIsIm9uRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYXBwbHkiLCJsb2FkIiwib25GaW5pc2giLCJhc3NldExvYWRpbmdGaW5pc2hlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUEsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLGNBQWUsV0FBZSxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE1BRjdoQmtCLFFBQVVDLFFBQVEsa0JBQ2hCQyxNQUFLLFdBUVYsUUFSS0EsS0FTSnRCLGdCQUFnQnVCLEtBVFpELEdBOFNMLE1BbFNBbEIsY0FaS2tCLEVBQUssT0FhVE4sSUFBSyxjQVFMUSxNQWRpQixXQUlqQixHQUFJQyxJQUVGQyxNQUFNLEtBQ05DLFFBQVMsS0FDVEMsV0FBVSxFQUNWQyxVQUFVLEtBQ1ZDLFdBQVksS0FDWkMsV0FBWSxLQUNaQyxXQUFZLFVBQ1pDLG1CQUFvQixVQUNwQkMsTUFBTSxhQUNOQyxVQUFVLEdBQUlmLFNBQVFnQixRQUFRLEVBQUcsRUFBRyxHQUNwQ0MsVUFBVSxHQUFJakIsU0FBUWdCLFFBQVEsRUFBRyxFQUFHLEdBQ3BDRSxhQUFhLEVBQ2JDLGdCQUFnQixFQUNoQkMsVUFBVSxHQUNWQyxNQUFNLEdBQ05DLGNBQWMsRUFDZEMsYUFBYSxFQUNiQyxXQUFXLEVBQ1hDLFdBQVcsR0FDWEMsUUFBUSxLQUNSQyxXQUNDQyxTQUFTLEtBQ1RDLFFBQVMsRUFDVEMsUUFBUyxFQUNUQyxrQkFBa0IsRUFDbEJDLFNBQVUsRUFDVkMsU0FBVSxFQUNWQyxXQUFVLEVBQ1ZDLGNBQWUsTUFFaEJDLFVBRUYsT0FBTy9CLE1BbUJQVCxJQUFLLHdCQUNMUSxNQWIyQixXQUMxQixPQUNJaUMsS0FBUSxVQUNSVCxTQUFZLEtBQ1pVLE9BQVUsRUFDVlQsUUFBVyxFQUNYQyxRQUFXLEVBQ1hDLGtCQUFvQixFQUNwQkMsU0FBWSxFQUNaQyxTQUFZLEVBQ1pDLFdBQWEsRUFDYkMsY0FBaUIsU0F5QnRCdkMsSUFBSyxhQUNMUSxNQWRnQixTQUFDbUMsRUFBWUMsR0FDN0IsR0FBSUMsR0FBU0MsU0FBU0MsY0FBYyxRQUNoQ0MsRUFBVUYsU0FBU0csY0FBYyxTQUNyQ0QsR0FBUUUsS0FBTyxrQkFDZkYsRUFBUUcsSUFBTVIsRUFDYkssRUFBUUksT0FBU1IsRUFDaEJJLEVBQVFLLG1CQUFxQixXQUNMLFlBQW5COUMsS0FBSytDLFlBQ1RWLEtBR0hDLEVBQU1VLFlBQVlQLE1Bd0JsQmhELElBQUssWUFDTFEsTUFmZSxTQUFDZ0QsR0FDVixNQUFPQSxHQUFJQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFTSCxFQUFJL0QsWUEwQjlDTyxJQUFLLFlBQ0xRLE1BakJrQixTQUFDb0QsRUFBS0MsR0FDbEIsTUFBT0osTUFBS0UsVUFBWUUsRUFBTUQsR0FBT0EsS0F3QjNDNUQsSUFBSyxPQUNMUSxNQW5CVSxXQUNSLFFBQVNzRCxLQUNSLE1BQU9MLE1BQUtDLE1BQTRCLE9BQXJCLEVBQUlELEtBQUtFLFdBQ3pCSSxTQUFTLElBQ1RDLFVBQVUsR0FFZixNQUFPRixLQUFPQSxJQUFPLElBQU1BLElBQU8sSUFBTUEsSUFBTyxJQUM3Q0EsSUFBTyxJQUFNQSxJQUFPQSxJQUFPQSxPQTBCOUI5RCxJQUFLLGdCQUNMUSxNQWxCbUIsU0FBQ3lELEVBQUtDLEdBQ3RCLEdBQUlDLEtBQ0osS0FBSyxHQUFJQyxLQUFZSCxHQUFRRSxFQUFLQyxHQUFZSCxFQUFLRyxFQUNuRCxLQUFLLEdBQUlBLEtBQVlGLEdBQVFDLEVBQUtDLEdBQVlGLEVBQUtFLEVBQ25ELE9BQU9ELE1BK0JWbkUsSUFBSyxXQUNMUSxNQXhCYyxTQUFDNkQsR0FDZixNQUFPQSxJQUFXWixLQUFLYSxHQUFLLFFBb0M1QnRFLElBQUssUUFDTFEsTUExQlcsV0EyQlYsR0EzQlcrRCxHQUFDQyxVQUFBL0UsUUFBQSxHQUFBZ0YsU0FBQUQsVUFBQSxHQUFHLElBQUdBLFVBQUEsR0FBQ0UsRUFBQ0YsVUFBQS9FLFFBQUEsR0FBQWdGLFNBQUFELFVBQUEsR0FBRyxFQUFDQSxVQUFBLEdBQUNHLEVBQUNILFVBQUEvRSxRQUFBLEdBQUFnRixTQUFBRCxVQUFBLEdBQUcsSUFBR0EsVUFBQSxHQUFDSSxFQUFDSixVQUFBL0UsUUFBQSxHQUFBZ0YsU0FBQUQsVUFBQSxHQUFHLEtBQUlBLFVBQUEsRUFDMUMsT0FBUSxPQUFMSSxFQUNLLEdBQUl4RSxTQUFReUUsT0FBUU4sRUFBRSxJQUFPRyxFQUFFLElBQU9DLEVBQUUsS0FFeEMsR0FBSXZFLFNBQVEwRSxPQUFRUCxFQUFFLElBQU9HLEVBQUUsSUFBT0MsRUFBRSxJQUFNQyxNQTBDdEQ1RSxJQUFLLGVBQ0xRLE1BakNrQixTQUFDdUUsRUFBWXJFLEdBRS9CcUUsRUFBV0MsS0FBS3pFLEtBQUswRSx3QkFFckIsS0FBSSxHQUFJekYsR0FBSSxFQUFHQSxFQUFJdUYsRUFBV3RGLE9BQVFELElBQ3JDLEdBQUd1RixFQUFXdkYsR0FBR2lELE1BQVEvQixFQUl4QixNQUh5QytELGVBQS9CTSxHQUFXdkYsR0FBRytDLGVBQTZELE1BQS9Cd0MsRUFBV3ZGLEdBQUcrQyxnQkFDbkV3QyxFQUFXdkYsR0FBRytDLGNBQWdCaEMsS0FBSzJFLFNBQVNILEVBQVd2RixHQUFHK0MsZ0JBRXBEd0MsRUFBV3ZGLE1BNENwQlEsSUFBSyxXQUNMUSxNQW5DYyxTQUFDMkUsR0FFZixNQURBQSxHQUFjQSxFQUFZQyxNQUFNLEtBQ1AsR0FBdEJELEVBQVkxRixPQUNQYyxLQUFLOEUsTUFBTUMsU0FBU0gsRUFBWSxJQUFLRyxTQUFTSCxFQUFZLElBQUtHLFNBQVNILEVBQVksS0FFcEY1RSxLQUFLOEUsTUFBTUMsU0FBU0gsRUFBWSxJQUFLRyxTQUFTSCxFQUFZLElBQUtHLFNBQVNILEVBQVksSUFBS0ksV0FBV0osRUFBWSxRQTZDeEhuRixJQUFLLFlBQ0xRLE1BckNlLFNBQUMyRSxHQXNDZixHQXRDNEJqQyxHQUFJc0IsVUFBQS9FLFFBQUEsR0FBQWdGLFNBQUFELFVBQUEsR0FBRyxXQUFVQSxVQUFBLEVBRTlDLE9BREFXLEdBQWNBLEVBQVlDLE1BQU0sS0FDckIsWUFBUmxDLEVBQ0ssR0FBSTlDLFNBQVFnQixRQUFRa0UsU0FBU0gsRUFBWSxJQUFLRyxTQUFTSCxFQUFZLElBQUtHLFNBQVNILEVBQVksS0FFN0YsR0FBSS9FLFNBQVFnQixRQUFRYixLQUFLaUYsU0FBU0YsU0FBU0gsRUFBWSxLQUFNNUUsS0FBS2lGLFNBQVNGLFNBQVNILEVBQVksS0FBTTVFLEtBQUtpRixTQUFTRixTQUFTSCxFQUFZLFNBd0RqSm5GLElBQUssYUFDTFEsTUF2Q2dCLFdBQ2hCLEdBQUlpRixHQUFTLEdBQUlyRixTQUFRc0YsY0FBY25GLEtBQUtvRixRQUFRcEYsS0FBS3FGLGNBQ25EckYsTUFBS3NGLFdBQVdDLFFBQVEsU0FBU0MsR0FFaEMsUUFBU0MsS0FDZCxHQUFJQyxHQUFNUixFQUFPUyxlQUFlSCxFQUFJdEQsS0FBTXNELEVBQUk1QyxJQUMzQzhDLEdBQUlFLFVBQVksU0FBU0MsR0FDakI3RixLQUFLOEYsUUFBUUQsRUFBRTNELE1BQVEyRCxFQUFFRSxTQUMvQkMsS0FBS2hHLE1BRVAwRixFQUFJTyxRQUFVLFNBQVNKLEdBQ2xCSyxRQUFRQyxJQUFJTixFQUFFM0QsS0FBTyxzQkFDeEI4RCxLQUFLaEcsTUFHTCxPQUFPd0YsRUFBSTdDLE1BQ2IsSUFBSyxNQUNKOEMsR0FDRyxNQUNKLEtBQUssUUFHRCxLQUNKLEtBQUssUUFFRCxLQUNKLEtBQUssTUFFRCxLQUNKLFNBQ0lBLEVBQVNXLE1BQU1wRyxNQUV0QmtGLEVBQU9tQixRQUVETCxLQUFLaEcsT0FFUGtGLEVBQU9vQixTQUFXdEcsS0FBS3VHLHFCQUFxQlAsS0FBS2hHLFVBcFFuREQsSUEyUU55RyxRQUFPQyxRQUFVMUciLCJmaWxlIjoiY29yZS9sc2QvdXRpbHMvdXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQkFCWUxPTiA9IHJlcXVpcmUoJy4uL2xpYi9iYWJ5bG9uJyk7XG5jbGFzcyB1dGlsc3tcbi8qKlxuICogLi4uXG4gKiBAYXV0aG9yIEJyZW5kb24gU21pdGhcbiAqIGh0dHA6Ly9zZWFjbG91ZDkub3JnXG4gKiBMaWdodFdlaWdodCAzRCBTeXN0ZW0gRGVzaWduIGVuZ2luZVxuICovXG5cdHN0YXRpYyBkZWZhdWx0QXJncygpe1xuXG5cblxuXHRcdHZhciBfZGVmYXVsdHMgPSBcblx0XHQgIHsgXG5cdFx0XHRcdF9uYW1lOm51bGwsIFxuXHRcdFx0XHRfY3Vyc29yOiBudWxsLFxuXHRcdFx0XHRfaGFkTW9kYWw6ZmFsc2UsXG5cdFx0XHRcdF9hcHBlbmRFTDpudWxsLFxuXHRcdFx0XHRfY3Vyc29yVlIxOiBudWxsLFxuXHRcdFx0XHRfY3Vyc29yVlIyOiBudWxsLFxuXHRcdFx0XHRfbGF5ZXJNYXNrOiAweDBGRkZGRkZGLFxuXHRcdFx0XHRfYWN0aXZlRGlhbG9nTGF5ZXI6IDB4MTAwMDAwMDAsXG5cdFx0XHRcdF90eXBlOidGcmVlQ2FtZXJhJywgXG5cdFx0XHRcdF9wb3NpdGlvbjpuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDAsIDApLCBcblx0XHRcdFx0X3JvdGF0aW9uOm5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCksIFxuXHRcdFx0XHRfZGlhbWV0ZXJUb3A6Myxcblx0XHRcdFx0X2RpYW1ldGVyQm90dG9tOjMsXG5cdFx0XHRcdF9kaWFtZXRlcjoxMC4wLFxuXHRcdFx0XHRfc2l6ZToxMC4wLFxuXHRcdFx0XHRfc3ViZGl2aXNpb25zOjYsXG5cdFx0XHRcdF90ZXNzZWxhdGlvbjo2LFxuXHRcdFx0XHRfdGhpY2tuZXNzOjMsXG5cdFx0XHRcdF9zZWdlbWVudHM6MTAuMCxcblx0XHRcdFx0X2NhbnZhczpudWxsLFxuXHRcdFx0XHRfbWF0ZXJpYWw6e1xuXHRcdFx0XHRcdF90ZXh0dXJlOm51bGwsXG5cdFx0XHRcdFx0X3VTY2FsZTogMS4wLFxuXHRcdFx0XHRcdF92U2NhbGU6IDEuMCxcblx0XHRcdFx0XHRfYmFja0ZhY2VDdWxsaW5nOiB0cnVlLFxuXHRcdFx0XHRcdF92T2Zmc2V0OiAwLjAsXG5cdFx0XHRcdFx0X3VPZmZzZXQ6IDAuMCxcblx0XHRcdFx0XHRfaGFzQWxwaGE6ZmFsc2UsXG5cdFx0XHRcdFx0X2RpZmZ1c2VDb2xvcjogbnVsbCxcblx0XHRcdFx0fSxcblx0XHRcdFx0X3NjZW5lOnt9XG5cdFx0XHR9XG5cdFx0cmV0dXJuIF9kZWZhdWx0cztcblx0fVxuXG5cdC8qKlxuXHQgKiBcblx0ICogc2V0c0RlZmF1bHRNYXRlcmlhbFxuXHQgKi9cblx0c3RhdGljIHJldHVybkRlZmF1bHRNYXRlcmlhbCgpe1xuXHRcdCByZXR1cm4ge1xuXHQgICAgICBcIm5hbWVcIjogXCJkZWZhdWx0XCIsXG5cdCAgICAgIFwiX3RleHR1cmVcIjogbnVsbCxcblx0ICAgICAgXCJfYWxwaGFcIjogMSxcblx0ICAgICAgXCJfdVNjYWxlXCI6IDEsXG5cdCAgICAgIFwiX3ZTY2FsZVwiOiAxLFxuXHQgICAgICBcIl9iYWNrRmFjZUN1bGxpbmdcIjogdHJ1ZSxcblx0ICAgICAgXCJfdk9mZnNldFwiOiAwLFxuXHQgICAgICBcIl91T2Zmc2V0XCI6IDAsXG5cdCAgICAgIFwiX2hhc0FscGhhXCI6IGZhbHNlLFxuXHQgICAgICBcIl9kaWZmdXNlQ29sb3JcIjogbnVsbFxuXHQgICAgfVxuXHR9XG5cblxuXHQvKipcblx0ICogZ2VuZXJhdGVzIGEgcmFuZG9tIGl0ZW0gZnJvbSBhbiBhcnJheSBhbmQgcmV0dXJucyBpdFxuXHQgKiBAcGFyYW0gc3RyaW5nIF9TY3JpcHRTcmM6IHRoZSBzY3JpcHQgc291cmNlIHlvdSB3YW50IHRvIGxvYWQgXG5cdCAqIEBwYXJhbSBmdW5jdGlvbiBfQ2FsbGJhY2s6IHRoZSBjYWxsYmFjayB5b3Ugd2FudCB0byBleGVjdHV0ZSBhZnRlciBsb2FkXG5cdCAqIEByZXR1cm5zIHJhbmRvbSBpdGVtIGZyb20gZ2l2ZW4gYXJyYXlcblx0ICovXG5cblx0c3RhdGljIGxvYWRTY3JpcHQoX1NjcmlwdFNyYywgX0NhbGxiYWNrKSB7XG5cdFx0dmFyIF9IZWFkID0gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKTtcblx0XHR2YXIgX1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHRcdF9TY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuXHRcdF9TY3JpcHQuc3JjID0gX1NjcmlwdFNyYztcblx0XHRcdF9TY3JpcHQub25sb2FkID0gX0NhbGxiYWNrO1xuXHRcdFx0XHRfU2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJykge1xuXHRcdFx0XHRcdF9DYWxsYmFjaygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdF9IZWFkLmFwcGVuZENoaWxkKF9TY3JpcHQpO1xuXHR9XG5cblxuXHQvKipcblx0ICogZ2VuZXJhdGVzIGEgcmFuZG9tIGl0ZW0gZnJvbSBhbiBhcnJheSBhbmQgcmV0dXJucyBpdFxuXHQgKiBAcGFyYW0gYXJyYXkgVGhlIGFycmF5IHlvdSB3YW50IGEgcmFuZG9tIGl0ZW0gZnJvbVxuXHQgKiBAcmV0dXJucyByYW5kb20gaXRlbSBmcm9tIGdpdmVuIGFycmF5XG5cdCAqL1xuXG5cdHN0YXRpYyByYW5kb21BcnIoYXJyKXtcbiAgICAgICAgcmV0dXJuIGFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYXJyLmxlbmd0aCldO1xuICAgXHR9XG5cbiAgIFx0LyoqXG5cdCAqIGdlbmVyYXRlcyBhIHJhbmRvbSBwb3NpdGlvbiBmcm9tIG1pbiBhbmQgYSBtYXggdmVjdG9yIGxvY2F0aW9uXG5cdCAqIEBwYXJhbSBtaW4gdGhlIG1pbmltdW0gbnVtYmVyIHlvdSB3YW50IHRvIGFzc2luZyB0byB0aGUgdmVjdG9yXG5cdCAqIEBwYXJhbSBtYXggdGhlIG1heGltdW0gbnVtYmVyIHlvdSB3YW50IHRvIGFzc2luZyB0byB0aGUgdmVjdG9yXG5cdCAqIEByZXR1cm5zIGEgcmFuZG9tIG51bWJlciB0aGF0IGlzIGluIGJldHdlZW4gdGhlIG1pbiBhbmQgbWF4IHZhbHVlc1xuXHQgKi9cblxuICAgIHN0YXRpYyByYW5kb21Qb3MobWluLCBtYXgpe1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICAgIH1cblxuXHQvKipcblx0ICogZ2VuZXJhdGVzIGd1aWRcblx0ICovXG5cdHN0YXRpYyBndWlkKCkge1xuICBcdCBmdW5jdGlvbiBzNCgpIHtcblx0ICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxuXHQgICAgICAudG9TdHJpbmcoMTYpXG5cdCAgICAgIC5zdWJzdHJpbmcoMSk7XG5cdCAgfVxuXHQgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcblx0ICAgIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQvKipcblx0ICogT3ZlcndyaXRlcyBvYmoxJ3MgdmFsdWVzIHdpdGggb2JqMidzIGFuZCBhZGRzIG9iajIncyBpZiBub24gZXhpc3RlbnQgaW4gb2JqMVxuXHQgKiBAcGFyYW0gb2JqMVxuXHQgKiBAcGFyYW0gb2JqMlxuXHQgKiBAcmV0dXJucyBvYmozIGEgbmV3IG9iamVjdCBiYXNlZCBvbiBvYmoxIGFuZCBvYmoyXG5cdCAqL1xuXHRzdGF0aWMgbWVyZ2Vfb2JqZWN0cyhvYmoxLG9iajIpe1xuXHQgICAgdmFyIG9iajMgPSB7fTtcblx0ICAgIGZvciAodmFyIGF0dHJuYW1lIGluIG9iajEpIHsgb2JqM1thdHRybmFtZV0gPSBvYmoxW2F0dHJuYW1lXTsgfVxuXHQgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gb2JqMikgeyBvYmozW2F0dHJuYW1lXSA9IG9iajJbYXR0cm5hbWVdOyB9XG5cdCAgICByZXR1cm4gb2JqMztcblx0fVxuXG5cdC8qKlxuXHQgKiBjb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMgXG5cdCAqIEBwYXJhbSBkZWdyZWVzXG5cdCAqIEByZXR1cm5zIHJldHVucnMgYSByYWRpYW5cblx0ICovXG5cdHN0YXRpYyBkZWdUb1JhZChkZWdyZWVzKXtcblx0XHRyZXR1cm4gZGVncmVlcyAqIChNYXRoLlBJIC8gMTgwKTtcblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm5zIGEgY29sb3IzIG9yIGNvbG9yNCBvYmplY3Rcblx0ICogQHBhcmFtIHIgMSAtIDI1NVxuXHQgKiBAcGFyYW0gZyAxIC0gMjU1XG5cdCAqIEBwYXJhbSBiIDEgLSAyNTVcblx0ICogQHBhcmFtIGFscGhhIGZsb2F0IDEuMCAtIDAuMFxuXHQgKiBAcmV0dXJucyByZXR1bnJzIGEgY29sb3IzIG9yIGNvbG9yNFxuXHQgKi9cblx0c3RhdGljIGNvbG9yKHIgPSAxMjUsZyA9IDAsYiA9IDEyNyxhID0gbnVsbCl7XG5cdFx0aWYoYSA9PSBudWxsKXtcblx0XHRcdHJldHVybiBuZXcgQkFCWUxPTi5Db2xvcjMoKHIvMjU1KSwgKGcvMjU1KSwgKGIvMjU1KSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4gbmV3IEJBQllMT04uQ29sb3I0KChyLzI1NSksIChnLzI1NSksIChiLzI1NSksIGEpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm5zIGEgY29sb3IzIG9yIGNvbG9yNCBvYmplY3Rcblx0ICogQHBhcmFtIF9tYXRlcmlhbHNcblx0ICogQHBhcmFtIF9uYW1lXG5cdCAqIEByZXR1cm5zIHJldHVucnMgYSBNYXRlcmlhbCBmb3IgdGhlIG9iamVjdFxuXHQgKi9cblx0c3RhdGljIGdldE1hdGVyaWFscyhfbWF0ZXJpYWxzLCBfbmFtZSl7XG5cdFx0Ly9UT0RPOiBJbWFnZXNcblx0XHRfbWF0ZXJpYWxzLnB1c2godGhpcy5yZXR1cm5EZWZhdWx0TWF0ZXJpYWwoKSk7XG5cdFx0XG5cdFx0Zm9yKGxldCBpID0gMDsgaSA8IF9tYXRlcmlhbHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0aWYoX21hdGVyaWFsc1tpXS5uYW1lID09IF9uYW1lKXtcblx0XHRcdFx0aWYodHlwZW9mIF9tYXRlcmlhbHNbaV0uX2RpZmZ1c2VDb2xvciAhPSB1bmRlZmluZWQgJiYgX21hdGVyaWFsc1tpXS5fZGlmZnVzZUNvbG9yICE9IG51bGwpe1xuXHRcdFx0XHRcdF9tYXRlcmlhbHNbaV0uX2RpZmZ1c2VDb2xvciA9IHRoaXMuZ2V0Q29sb3IoX21hdGVyaWFsc1tpXS5fZGlmZnVzZUNvbG9yKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gX21hdGVyaWFsc1tpXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogcmV0dXJucyBhIGNvbG9yXG5cdCAqIEBwYXJhbSBfZGF0YVN0cmluZyBleHBlY3RzIGEgY29sb3Igc3RyaW5nIGxpa2UgXCIxMjcsIDEyOSwgMFwiIChSR0IpIGlyIFwiMTI3LCAxMjksIDAsIDAuNVwiIChSR0JBKVxuXHQgKiBAcmV0dXJucyByZXR1bnJzIGEgY29sb3Igb2JqZWN0IGFmdGVyIGZldGNoaW5nIHRoZSBjb3JyZWN0IGNvbG9yIHR5cGVcblx0ICovXG5cdHN0YXRpYyBnZXRDb2xvcihfZGF0YVN0cmluZyl7XG5cdFx0X2RhdGFTdHJpbmcgPSBfZGF0YVN0cmluZy5zcGxpdChcIixcIik7XG5cdFx0aWYoX2RhdGFTdHJpbmcubGVuZ3RoICE9IDQpe1xuXHRcdFx0cmV0dXJuIHRoaXMuY29sb3IocGFyc2VJbnQoX2RhdGFTdHJpbmdbMF0pLCBwYXJzZUludChfZGF0YVN0cmluZ1sxXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzJdKSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4gdGhpcy5jb2xvcihwYXJzZUludChfZGF0YVN0cmluZ1swXSksIHBhcnNlSW50KF9kYXRhU3RyaW5nWzFdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMl0pLCBwYXJzZUZsb2F0KF9kYXRhU3RyaW5nWzNdKSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybnMgYSB2ZWN0b3Jcblx0ICogQHBhcmFtIF9kYXRhU3RyaW5nIGV4cGVjdHMgYSB2ZWNvdHIgc3RyaW5nIGxpa2UgXCIxMjcsIDEyOSwgMFwiIFxuXHQgKiBAcmV0dXJucyB2ZWN0b3Jcblx0ICovXG5cdHN0YXRpYyBnZXRWZWN0b3IoX2RhdGFTdHJpbmcsIHR5cGUgPSBcInBvc2l0aW9uXCIpe1xuXHRcdF9kYXRhU3RyaW5nID0gX2RhdGFTdHJpbmcuc3BsaXQoXCIsXCIpO1xuXHRcdGlmKHR5cGUgPT0gXCJwb3NpdGlvblwiKXtcblx0XHRcdHJldHVybiBuZXcgQkFCWUxPTi5WZWN0b3IzKHBhcnNlSW50KF9kYXRhU3RyaW5nWzBdKSwgcGFyc2VJbnQoX2RhdGFTdHJpbmdbMV0pLCBwYXJzZUludChfZGF0YVN0cmluZ1syXSkpO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIG5ldyBCQUJZTE9OLlZlY3RvcjModGhpcy5kZWdUb1JhZChwYXJzZUludChfZGF0YVN0cmluZ1swXSkpLCB0aGlzLmRlZ1RvUmFkKHBhcnNlSW50KF9kYXRhU3RyaW5nWzFdKSksIHRoaXMuZGVnVG9SYWQocGFyc2VJbnQoX2RhdGFTdHJpbmdbMl0pKSk7XG5cdFx0fVxuXHRcdFxuXHR9XG5cblxuXHQvKlxuXHRcdGxvYWRzIGFuIGFzc2V0IFxuXHRcdHN0YXRpYyBhc3NldHNMb2FkXG5cdFx0YXJndW1lbnRzOiBcblx0XHRqc29uQXNzZXRzID0gW1xuICAgICAgICAgICAge25hbWUgOiBcImxvZ29cIiwgc3JjIDogXCJiYXJ0dnIvaW1nL2JhcnRWUkxvZ29fYi5wbmdcIiwgdHlwZTogJ2ltYWdlJyB9LFxuICAgICAgICAgICAge25hbWUgOiBcInRhcmdldENhbVwiLCBzcmM6IFwiYmFydHZyL2ltZy90YXJnZXRfc20ucG5nXCIsIHR5cGU6ICd2aWRlbyd9XG4gICAgICAgIF07XG4gICAgICAgIGFyZ3VtZW50czogYXNzZXRIb2xkZXIsXG4gICAgICAgIGFyZ3VtZW50czogY2FsbGJhY2sgd2hlbiBmaW5pbnNoZWQsXG4gICAgICAqL1xuXG5cdHN0YXRpYyBhc3NldHNMb2FkKCl7XG5cdFx0dmFyIGxvYWRlciA9IG5ldyBCQUJZTE9OLkFzc2V0c01hbmFnZXIodGhpcy5fc2NlbmVzW3RoaXMuX2FjdGl2ZVNjZW5lXSk7XG4gICAgICAgIHRoaXMuanNvbkFzc2V0cy5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuXG5cdCAgICAgICAgZnVuY3Rpb24gaW1nQXNzZXQoKXtcblx0XHRcdFx0dmFyIGltZyA9IGxvYWRlci5hZGRUZXh0dXJlVGFzayhvYmoubmFtZSwgb2JqLnNyYyk7XG5cdFx0XHQgICAgaW1nLm9uU3VjY2VzcyA9IGZ1bmN0aW9uKHQpIHtcblx0XHRcdCAgICAgICAgICAgIHRoaXMuX2Fzc2V0c1t0Lm5hbWVdID0gdC50ZXh0dXJlO1xuXHRcdFx0ICAgIH0uYmluZCh0aGlzKTtcblxuXHRcdFx0ICAgIGltZy5vbkVycm9yID0gZnVuY3Rpb24odCkge1xuXHRcdFx0ICAgICAgICAgY29uc29sZS5sb2codC5uYW1lICsgJyAtIGZhaWxlZCB0byBsb2FkJyk7XG5cdFx0XHQgICAgfS5iaW5kKHRoaXMpO1xuXHRcdFx0fVxuXG5cdCAgICAgICAgc3dpdGNoKG9iai50eXBlKSB7XG5cdFx0XHQgICAgY2FzZSAnaW1nJzpcblx0XHRcdCAgICBcdGltZ0Fzc2V0KCk7XG5cdFx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgIGNhc2UgJ2F1ZGlvJzpcblx0XHRcdCAgICAgICAgLy90b2RvXG5cdFx0XHRcdFx0XG5cdFx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgIGNhc2UgJ3ZpZGVvJzpcblx0XHRcdCAgICAgICAgLy90b2RvXG5cdFx0XHQgICAgICAgIGJyZWFrO1x0XG5cdFx0XHQgICAgY2FzZSAnaGRyJzpcblx0XHRcdCAgICAgICAgLy90b2RvXG5cdFx0XHQgICAgICAgIGJyZWFrOyAgXHQgICAgXHQgICAgICAgICAgICAgICAgXG5cdFx0XHQgICAgZGVmYXVsdDpcblx0XHRcdCAgICAgICAgaW1nQXNzZXQuYXBwbHkodGhpcyk7XG5cdFx0XHQgfVxuXHRcdFx0IGxvYWRlci5sb2FkKCk7XG5cdFx0XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICBcbiAgICAgICAgbG9hZGVyLm9uRmluaXNoID0gdGhpcy5hc3NldExvYWRpbmdGaW5pc2hlZC5iaW5kKHRoaXMpO1xuXG5cdH1cblx0XHRcbiAgICAgICAgXG5cbn1cdFx0XHRcdFxubW9kdWxlLmV4cG9ydHMgPSB1dGlscztcblxuXG5cdFx0Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9