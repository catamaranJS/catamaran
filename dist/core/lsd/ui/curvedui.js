"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),CurveUI=function(){function e(t,i,s){var n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4];_classCallCheck(this,e),this.scene=t,this._image=i,this._name=s,this._mat=a,this.mesh=null,this.hSize=3,this.hitSphere=null,this._hitCallback=n,this.init(),this.alphamodes=[BABYLON.Engine.ALPHA_COMBINE,BABYLON.Engine.ALPHA_ADD,BABYLON.Engine.ALPHA_SUBTRACT,BABYLON.Engine.ALPHA_MULTIPLY,BABYLON.Engine.ALPHA_MAXIMIZED]}return _createClass(e,[{key:"setMeshVals",value:function(e){this.mesh=e,this.mesh.setGaze=this.setGaze,this.mesh.endGaze=this.endGaze,this.mesh.hitTime=null,this.mesh.setTimerInterval=this.setTimerInterval,this.mesh.intervalID=null,this.mesh.hitCallback=this._hitCallback,this.mesh.isPickable=!0}},{key:"init",value:function(){var e=new BABYLON.StandardMaterial(this._name+"mat",this.scene);e.specularPower=64,e.diffuseColor=new BABYLON.Color3(1,1,1),e.emissiveColor=new BABYLON.Color3(.99,.94,.94);var t=BABYLON.Mesh.DOUBLESIDE;null==this._mat?(e.diffuseTexture=new BABYLON.Texture(this._image,this.scene),e.diffuseTexture.hasAlpha=!0,e.useLogarithmicDepth=!0,e.disableDepthWrite=!1,e.alpha=1,e.hasAlpha=!0,e.backFaceCulling=!1):(this._mat.video.pause(),this._mat.video.isPlaying=!1,this._mat.video.addEventListener("playing",function(){this._mat.video.isPlaying=!0}.bind(this)),this._mat.video.addEventListener("pause",function(){this._mat.video.isPlaying=!1}.bind(this)),e.diffuseTexture=this._mat);for(var i=[],s=0;s<this.hSize;s++){for(var n=[],a=-2;2>=a;a++){var h=a,r=a*a/5,l=s;n.push(new BABYLON.Vector3(h,r,l))}i.push(n)}var u=BABYLON.Mesh.CreateRibbon(this._name,i,!1,!1,0,this.scene,!0,t);u.scaling.x=.5,u.scaling.y=.5,u.scaling.z=.5,u.material=e,window._mat=this._mat,"vid"==this._name&&(u.actionManager=new BABYLON.ActionManager(this.scene),u.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){this._mat.video.play()}))),this.setMeshVals(u),this.generateHitSphere()}},{key:"setTimerInterval",value:function(){this.intervalID=null,this.intervalID=setInterval(this.hitCallback,2e3)}},{key:"setGaze",value:function(){this.hitTime=(new Date).getTime(),this.setTimerInterval.apply(this)}},{key:"endGaze",value:function(){var e=(new Date).getTime(),t=e-this.hitTime;return this.hitTime=null,clearInterval(this.intervalID),t}},{key:"generateHitSphere",value:function(){this.hitSphere=BABYLON.Mesh.CreateSphere(this._name+"hitSphere",16,.1,this.scene),this.hitSphere.parent=this.mesh,this.hitSphere.position.z=1,this.hitSphere.position.y=1,this.hitSphere.scaling.y=4,this.hitSphere.scaling.x=4,this.hitSphere.scaling.z=4,this.hitSphere.isVisible=!1}}]),e}();module.exports=CurveUI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL3VpL2N1cnZlZHVpLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ3VydmVVSSIsIl9zY2VuZSIsIl9pbWFnZSIsIl9uYW1lIiwiX2NhbGxiYWNrIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiX21hdCIsInRoaXMiLCJzY2VuZSIsIm1lc2giLCJoU2l6ZSIsImhpdFNwaGVyZSIsIl9oaXRDYWxsYmFjayIsImluaXQiLCJhbHBoYW1vZGVzIiwiQkFCWUxPTiIsIkVuZ2luZSIsIkFMUEhBX0NPTUJJTkUiLCJBTFBIQV9BREQiLCJBTFBIQV9TVUJUUkFDVCIsIkFMUEhBX01VTFRJUExZIiwiQUxQSEFfTUFYSU1JWkVEIiwidmFsdWUiLCJfaXRlbSIsInNldEdhemUiLCJlbmRHYXplIiwiaGl0VGltZSIsInNldFRpbWVySW50ZXJ2YWwiLCJpbnRlcnZhbElEIiwiaGl0Q2FsbGJhY2siLCJpc1BpY2thYmxlIiwibWF0IiwiU3RhbmRhcmRNYXRlcmlhbCIsInNwZWN1bGFyUG93ZXIiLCJkaWZmdXNlQ29sb3IiLCJDb2xvcjMiLCJlbWlzc2l2ZUNvbG9yIiwic2QiLCJNZXNoIiwiRE9VQkxFU0lERSIsImRpZmZ1c2VUZXh0dXJlIiwiVGV4dHVyZSIsImhhc0FscGhhIiwidXNlTG9nYXJpdGhtaWNEZXB0aCIsImRpc2FibGVEZXB0aFdyaXRlIiwiYWxwaGEiLCJiYWNrRmFjZUN1bGxpbmciLCJ2aWRlbyIsInBhdXNlIiwiaXNQbGF5aW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJwYXRocyIsInQiLCJwYXRoIiwiayIsIngiLCJ5IiwieiIsInB1c2giLCJWZWN0b3IzIiwiX2N1cnZlVUkiLCJDcmVhdGVSaWJib24iLCJzY2FsaW5nIiwibWF0ZXJpYWwiLCJ3aW5kb3ciLCJhY3Rpb25NYW5hZ2VyIiwiQWN0aW9uTWFuYWdlciIsInJlZ2lzdGVyQWN0aW9uIiwiRXhlY3V0ZUNvZGVBY3Rpb24iLCJPblBpY2tUcmlnZ2VyIiwicGxheSIsInNldE1lc2hWYWxzIiwiZ2VuZXJhdGVIaXRTcGhlcmUiLCJzZXRJbnRlcnZhbCIsIkRhdGUiLCJnZXRUaW1lIiwiYXBwbHkiLCJlbmQiLCJ0aW1lIiwiY2xlYXJJbnRlcnZhbCIsIkNyZWF0ZVNwaGVyZSIsInBhcmVudCIsInBvc2l0aW9uIiwiaXNWaXNpYmxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsTUFGM2hCa0IsUUFBTyxXQUVFLFFBRlRBLEdBRVVDLEVBQVFDLEVBQVFDLEdBTTlCLEdBTnFDQyxHQUFTQyxVQUFBaEIsUUFBQSxHQUFBaUIsU0FBQUQsVUFBQSxH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QUFnQixHQUFJbkQsU0FBUW9ELGNBQWM1RCxLQUFLQyxPQUNyRHFELEVBQVNLLGNBQWNFLGVBQWUsR0FBSXJELFNBQVFzRCxrQkFBa0J0RCxRQUFRb0QsY0FBY0csY0FBZSxXQUMzRy9ELEtBQUtELEtBQUt5QyxNQUFNd0IsV0FNbEJoRSxLQUFLaUUsWUFBWVgsR0FDakJ0RCxLQUFLa0UsdUJBU0w5RSxJQUFLLG1CQUNMMkIsTUFQZ0IsV0FDZmYsS0FBS3FCLFdBQWEsS0FDbEJyQixLQUFLcUIsV0FBYThDLFlBQVluRSxLQUFLc0IsWUFBYSxRQVVqRGxDLElBQUssVUFDTDJCLE1BUk8sV0FDTmYsS0FBS21CLFNBQVUsR0FBSWlELE9BQU9DLFVBQzFCckUsS0FBS29CLGlCQUFpQmtELE1BQU10RSxTQVc3QlosSUFBSyxVQUNMMkIsTUFUTyxXQUNOLEdBQUl3RCxJQUFNLEdBQUlILE9BQU9DLFVBQ2xCRyxFQUFPRCxFQUFNdkUsS0FBS21CLE9BR3RCLE9BRkFuQixNQUFLbUIsUUFBVSxLQUNmc0QsY0FBY3pFLEtBQUtxQixZQUNabUQsS0FZUHBGLElBQUssb0JBQ0wyQixNQVZpQixXQUNoQmYsS0FBS0ksVUFBWUksUUFBUXVCLEtBQUsyQyxhQUFhMUUsS0FBS0wsTUFBTSxZQUFhLEdBQUksR0FBS0ssS0FBS0MsT0FDakZELEtBQUtJLFVBQVV1RSxPQUFTM0UsS0FBS0UsS0FDN0JGLEtBQUtJLFVBQVV3RSxTQUFTekIsRUFBSSxFQUM1Qm5ELEtBQUtJLFVBQVV3RSxTQUFTMUIsRUFBSSxFQUM1QmxELEtBQUtJLFVBQVVvRCxRQUFRTixFQUFJLEVBQzNCbEQsS0FBS0ksVUFBVW9ELFFBQVFQLEVBQUksRUFDM0JqRCxLQUFLSSxVQUFVb0QsUUFBUUwsRUFBSSxFQUMzQm5ELEtBQUtJLFVBQVV5RSxXQUFZLE1BdEh4QnJGLElBMkhOc0YsUUFBT0MsUUFBVXZGIiwiZmlsZSI6ImNvcmUvbHNkL3VpL2N1cnZlZHVpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ3VydmVVSSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihfc2NlbmUsIF9pbWFnZSwgX25hbWUsIF9jYWxsYmFjayA9IG51bGwsIF9tYXQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBfc2NlbmU7XG4gICAgICAgIHRoaXMuX2ltYWdlID0gX2ltYWdlO1xuICAgICAgICB0aGlzLl9uYW1lID0gX25hbWU7XG4gICAgICAgIHRoaXMuX21hdCA9IF9tYXQ7XG4gICAgICAgIHRoaXMubWVzaCA9IG51bGw7XG4gICAgICAgIHRoaXMuaFNpemUgPSAzO1xuICAgICAgICB0aGlzLmhpdFNwaGVyZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2hpdENhbGxiYWNrID0gX2NhbGxiYWNrO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgdGhpcy5hbHBoYW1vZGVzID0gW1xuXHRcdFx0QkFCWUxPTi5FbmdpbmUuQUxQSEFfQ09NQklORSxcblx0XHRcdEJBQllMT04uRW5naW5lLkFMUEhBX0FERCxcblx0XHRcdEJBQllMT04uRW5naW5lLkFMUEhBX1NVQlRSQUNULFxuXHRcdFx0QkFCWUxPTi5FbmdpbmUuQUxQSEFfTVVMVElQTFksXG5cdFx0XHRCQUJZTE9OLkVuZ2luZS5BTFBIQV9NQVhJTUlaRURcblx0XHRdO1xuICAgIH1cblxuXG4gICAgc2V0TWVzaFZhbHMoX2l0ZW0pe1xuICAgIFx0dGhpcy5tZXNoID0gX2l0ZW07XG5cdFx0dGhpcy5tZXNoLnNldEdhemUgPSB0aGlzLnNldEdhemU7XG5cdFx0dGhpcy5tZXNoLmVuZEdhemUgPSB0aGlzLmVuZEdhemU7XG5cdFx0dGhpcy5tZXNoLmhpdFRpbWUgPSBudWxsO1xuXHRcdHRoaXMubWVzaC5zZXRUaW1lckludGVydmFsID0gdGhpcy5zZXRUaW1lckludGVydmFsO1xuXHRcdHRoaXMubWVzaC5pbnRlcnZhbElEID0gbnVsbDtcbiAgICBcdHRoaXMubWVzaC5oaXRDYWxsYmFjayA9IHRoaXMuX2hpdENhbGxiYWNrO1xuICAgIFx0dGhpcy5tZXNoLmlzUGlja2FibGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGluaXQoKXtcbiAgICBcdHZhciBtYXQgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKHRoaXMuX25hbWUrIFwibWF0XCIsIHRoaXMuc2NlbmUgKTtcbiAgICBcdG1hdC5zcGVjdWxhclBvd2VyID0gNjQ7XG4gICAgICAgIG1hdC5kaWZmdXNlQ29sb3IgPSBuZXcgQkFCWUxPTi5Db2xvcjMoMS4wMCwgMS4wMCwgMS4wMCk7XG4gICAgICAgIG1hdC5lbWlzc2l2ZUNvbG9yID0gbmV3IEJBQllMT04uQ29sb3IzKDAuOTksIDAuOTQsIDAuOTQpO1xuICAgIFx0dmFyIHNkID0gQkFCWUxPTi5NZXNoLkRPVUJMRVNJREU7XG4gICAgXHRpZih0aGlzLl9tYXQgID09IG51bGwgKXtcbiAgICBcdFx0bWF0LmRpZmZ1c2VUZXh0dXJlID0gbmV3IEJBQllMT04uVGV4dHVyZSh0aGlzLl9pbWFnZSwgdGhpcy5zY2VuZSk7XG5cdCAgICBcdG1hdC5kaWZmdXNlVGV4dHVyZS5oYXNBbHBoYSA9IHRydWU7XG5cdCAgICBcdG1hdC51c2VMb2dhcml0aG1pY0RlcHRoID0gdHJ1ZTtcblx0ICAgIFx0bWF0LmRpc2FibGVEZXB0aFdyaXRlID0gZmFsc2U7XG5cdFx0ICBcdG1hdC5hbHBoYSA9IDE7XG5cdFx0ICBcdG1hdC5oYXNBbHBoYSA9IHRydWU7XG5cdFx0ICBcdG1hdC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcblx0XHQgIH1lbHNle1xuXHRcdCAgXHQgdGhpcy5fbWF0LnZpZGVvLnBhdXNlKCk7XG5cdFx0ICBcdCB0aGlzLl9tYXQudmlkZW8uaXNQbGF5aW5nID0gZmFsc2U7XG5cdFx0ICBcdCB0aGlzLl9tYXQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsIGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgICB0aGlzLl9tYXQudmlkZW8uaXNQbGF5aW5nID0gdHJ1ZTtcblx0XHRcdCB9LmJpbmQodGhpcykpXG5cdFx0XHQgdGhpcy5fbWF0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgZnVuY3Rpb24oKXtcblx0XHRcdCAgICAgICB0aGlzLl9tYXQudmlkZW8uaXNQbGF5aW5nID0gZmFsc2U7XG5cdFx0XHQgIH0uYmluZCh0aGlzKSlcblxuICAgICAgICAgICAgIG1hdC5kaWZmdXNlVGV4dHVyZSA9IHRoaXMuX21hdDtcblx0XHQgIH1cbiAgICBcdFxuXHRcdC8vIHBhcmFib2xhXG5cdFx0dmFyIHBhdGhzID0gW107XG5cdFx0Zm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLmhTaXplOyB0KyspIHtcblx0XHRcdHZhciBwYXRoID0gW107XG5cdFx0XHRmb3IgKHZhciBrID0gLTI7IGsgPD0gMjsgaysrKSB7XG5cdFx0XHQgIHZhciB4ID0gaztcblx0XHRcdCAgdmFyIHkgPSAoayAqIGspIC8gNTtcblx0XHRcdCAgdmFyIHogPSB0O1xuXHRcdFx0ICBwYXRoLnB1c2gobmV3IEJBQllMT04uVmVjdG9yMyh4LCB5LCB6KSk7XG5cdFx0XHR9XG5cdFx0XHRwYXRocy5wdXNoKHBhdGgpO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgX2N1cnZlVUkgPSBCQUJZTE9OLk1lc2guQ3JlYXRlUmliYm9uKHRoaXMuX25hbWUsIHBhdGhzLCBmYWxzZSwgZmFsc2UsIDAsIHRoaXMuc2NlbmUsIHRydWUsIHNkKTtcblx0XHRfY3VydmVVSS5zY2FsaW5nLnggPSAwLjU7XG5cdFx0X2N1cnZlVUkuc2NhbGluZy55ID0gMC41O1xuXHRcdF9jdXJ2ZVVJLnNjYWxpbmcueiA9IDAuNTtcblx0XHRfY3VydmVVSS5tYXRlcmlhbCA9IG1hdDtcblx0XHR3aW5kb3cuX21hdCA9IHRoaXMuX21hdDtcblx0XHRpZih0aGlzLl9uYW1lID09IFwidmlkXCIpe1xuXHRcdFx0X2N1cnZlVUkuYWN0aW9uTWFuYWdlciA9IG5ldyBCQUJZTE9OLkFjdGlvbk1hbmFnZXIodGhpcy5zY2VuZSk7XG5cdFx0ICAgIF9jdXJ2ZVVJLmFjdGlvbk1hbmFnZXIucmVnaXN0ZXJBY3Rpb24obmV3IEJBQllMT04uRXhlY3V0ZUNvZGVBY3Rpb24oQkFCWUxPTi5BY3Rpb25NYW5hZ2VyLk9uUGlja1RyaWdnZXIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dGhpcy5fbWF0LnZpZGVvLnBsYXkoKTtcblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0XG5cblx0XHQvL19jdXJ2ZVVJLmNoZWNrQ29sbGlzaW9ucyA9IHRydWU7XG5cdFx0dGhpcy5zZXRNZXNoVmFscyhfY3VydmVVSSk7XG5cdFx0dGhpcy5nZW5lcmF0ZUhpdFNwaGVyZSgpO1xuXHQgfVxuXG5cdCBzZXRUaW1lckludGVydmFsKCl7XG5cdCBcdHRoaXMuaW50ZXJ2YWxJRCA9IG51bGw7XG5cdCBcdHRoaXMuaW50ZXJ2YWxJRCA9IHNldEludGVydmFsKHRoaXMuaGl0Q2FsbGJhY2ssIDIwMDApO1xuXHQgfVxuXG5cdCBzZXRHYXplKCl7XG5cdCBcdHRoaXMuaGl0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgXHR0aGlzLnNldFRpbWVySW50ZXJ2YWwuYXBwbHkodGhpcyk7XG5cdCB9XG5cblx0IGVuZEdhemUoKXtcblx0IFx0dmFyIGVuZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdHZhciB0aW1lID0gZW5kIC0gdGhpcy5oaXRUaW1lO1xuXHRcdHRoaXMuaGl0VGltZSA9IG51bGw7XG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSUQpO1xuXHRcdHJldHVybiB0aW1lO1xuXHQgfVxuXG5cdCBnZW5lcmF0ZUhpdFNwaGVyZSgpe1xuXHQgXHR0aGlzLmhpdFNwaGVyZSA9IEJBQllMT04uTWVzaC5DcmVhdGVTcGhlcmUodGhpcy5fbmFtZStcImhpdFNwaGVyZVwiLCAxNiwgMC4xLCB0aGlzLnNjZW5lKTtcblx0IFx0dGhpcy5oaXRTcGhlcmUucGFyZW50ID0gdGhpcy5tZXNoO1xuXHQgXHR0aGlzLmhpdFNwaGVyZS5wb3NpdGlvbi56ID0gMS4wO1xuXHQgXHR0aGlzLmhpdFNwaGVyZS5wb3NpdGlvbi55ID0gMTtcblx0IFx0dGhpcy5oaXRTcGhlcmUuc2NhbGluZy55ID0gNDtcblx0IFx0dGhpcy5oaXRTcGhlcmUuc2NhbGluZy54ID0gNDtcblx0IFx0dGhpcy5oaXRTcGhlcmUuc2NhbGluZy56ID0gNDtcblx0IFx0dGhpcy5oaXRTcGhlcmUuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDdXJ2ZVVJOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==