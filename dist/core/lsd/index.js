"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),CES=require("ces"),utils=require("./utils/utils"),e_scene=require("./entities/e_scene"),e_cameravr=require("./entities/e_cameravr"),e_box=require("./entities/e_box"),e_light=require("./entities/e_light"),Request=require("../xhr/Request"),lsd=function(){function lsd(){_classCallCheck(this,lsd),this._defaults=utils.defaultArgs(),this._data=null,this._crurrentScene,this._e_scene=new e_scene,this._e_cameravr=null,this.world=new CES.World,this.world.addEntity(this._e_scene.entity),this.pickInterval=1,this.canvas,this._assets=[],Promise.all([document.querySelector("canvas")]).then(this.init.apply(this))}return _createClass(lsd,[{key:"init",value:function(){this.canvas=document.querySelector("canvas"),this.defaults=new Request("/assets/scene/scene.json",this.dataLoaded.bind(this))}},{key:"dataLoaded",value:function(){console.log(this.defaults.data),this._data=this.defaults.data,this.canvas.addEventListener("canvas_init",function(t){this.jsonAssets=this._data.assets,this._crurrentScene=this._defaults._scene=this._e_scene.scene.scene,utils.assetsLoad.apply(this)}.bind(this),!1)}},{key:"initListners",value:function(){window.addEventListener("resize",function(){this.canvas.heigth=window.innerHeight,this.canvas.width=window.innerWidth,this._crurrentScene.getEngine().resize()}.bind(this))}},{key:"assetLoadingFinished",value:function assetLoadingFinished(){for(var i=0;i<this._data.entities.length;i++){this._data.entities[i].defaults._scene=this._crurrentScene,void 0!=typeof this._data.entities[i].defaults._material&&(this._data.entities[i].defaults._material=utils.getMaterials(this._data.materials,this._data.entities[i].defaults._material)),void 0!=typeof this._data.entities[i].defaults._position&&(this._data.entities[i].defaults._position=utils.getVector(this._data.entities[i].defaults._position)),void 0!=typeof this._data.entities[i].defaults._rotation&&(this._data.entities[i].defaults._rotation=utils.getVector(this._data.entities[i].defaults._rotation,"rotation"));try{var ent=eval("new "+this._data.entities[i].defaults.e_type+"(this._data.entities[i].defaults)");this.world.addEntity(ent.entity)}catch(e){console.log(e+" - error loading entity")}}this._defaults._name="camera",this._defaults._canvas=this.canvas,this._defaults._position=new BABYLON.Vector3(0,0,0),this._e_cameravr=new e_cameravr(this._defaults),this.world.addEntity(this._e_cameravr.entity),this.initSceneAnimation(),this.initListners()}},{key:"initSceneAnimation",value:function(){this.tick=.01,this._crurrentScene.getEngine().runRenderLoop(function(){this.tick+=.01,window.tick=this.tick,this.tick%this.pickInterval<=.9&&this.tick%this.pickInterval>=.89&&this._e_cameravr.cursor.rayPick(),this._crurrentScene.activeCamera&&this._crurrentScene.render(),this.world.update(this.tick)}.bind(this))}}]),lsd}();module.exports=lsd;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL2luZGV4LmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ0VTIiwicmVxdWlyZSIsInV0aWxzIiwiZV9zY2VuZSIsImVfY2FtZXJhdnIiLCJlX2JveCIsImVfbGlnaHQiLCJSZXF1ZXN0IiwibHNkIiwidGhpcyIsIl9kZWZhdWx0cyIsImRlZmF1bHRBcmdzIiwiX2RhdGEiLCJfY3J1cnJlbnRTY2VuZSIsIl9lX3NjZW5lIiwiX2VfY2FtZXJhdnIiLCJ3b3JsZCIsIldvcmxkIiwiYWRkRW50aXR5IiwiZW50aXR5IiwicGlja0ludGVydmFsIiwiY2FudmFzIiwiX2Fzc2V0cyIsIlByb21pc2UiLCJhbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aGVuIiwiaW5pdCIsImFwcGx5IiwidmFsdWUiLCJkZWZhdWx0cyIsImRhdGFMb2FkZWQiLCJiaW5kIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImpzb25Bc3NldHMiLCJhc3NldHMiLCJfc2NlbmUiLCJzY2VuZSIsImFzc2V0c0xvYWQiLCJ3aW5kb3ciLCJoZWlndGgiLCJpbm5lckhlaWdodCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImdldEVuZ2luZSIsInJlc2l6ZSIsImFzc2V0TG9hZGluZ0ZpbmlzaGVkIiwiZW50aXRpZXMiLCJ1bmRlZmluZWQiLCJfbWF0ZXJpYWwiLCJnZXRNYXRlcmlhbHMiLCJtYXRlcmlhbHMiLCJfcG9zaXRpb24iLCJnZXRWZWN0b3IiLCJfcm90YXRpb24iLCJlbnQiLCJldmFsIiwiZV90eXBlIiwiX25hbWUiLCJfY2FudmFzIiwiQkFCWUxPTiIsIlZlY3RvcjMiLCJpbml0U2NlbmVBbmltYXRpb24iLCJpbml0TGlzdG5lcnMiLCJ0aWNrIiwicnVuUmVuZGVyTG9vcCIsImN1cnNvciIsInJheVBpY2siLCJhY3RpdmVDYW1lcmEiLCJyZW5kZXIiLCJ1cGRhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQUY3aEJrQixJQUFNQyxRQUFRLE9BQ2RDLE1BQVFELFFBQVEsaUJBQ2hCRSxRQUFVRixRQUFRLHNCQUNsQkcsV0FBYUgsUUFBUSx5QkFDckJJLE1BQVFKLFFBQVEsb0JBQ2hCSyxRQUFVTCxRQUFRLHNCQUNsQk0sUUFBVU4sUUFBUSxrQkFPaEJPLElBQUcsV0FDRyxRQUROQSxPQVNKNUIsZ0JBQWdCNkIsS0FUWkQsS0FFSkMsS0FBS0MsVUFBWVIsTUFBTVMsY0FDdkJGLEtBQUtHLE1BQVEsS0FDYkgsS0FBS0ksZUFDTEosS0FBS0ssU0FBVyxHQUFJWCxTQUNwQk0sS0FBS00sWUFB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QzdELEtBQUs0RCxNQUFRLElBQ2J6QixPQUFPeUIsS0FBTzVELEtBQUs0RCxLQUNoQjVELEtBQUs0RCxLQUFPNUQsS0FBS1csY0FBaUIsSUFBT1gsS0FBSzRELEtBQU81RCxLQUFLVyxjQUFpQixLQUM3RVgsS0FBS00sWUFBWXdELE9BQU9DLFVBRXRCL0QsS0FBS0ksZUFBZTRELGNBQ25CaEUsS0FBS0ksZUFBZTZELFNBRXhCakUsS0FBS08sTUFBTTJELE9BQU9sRSxLQUFLNEQsT0FDckJwQyxLQUFLeEIsV0F0RkpELE1BeUZOb0UsUUFBT0MsUUFBVXJFIiwiZmlsZSI6ImNvcmUvbHNkL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIENFUyA9IHJlcXVpcmUoJ2NlcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy91dGlscycpO1xudmFyIGVfc2NlbmUgPSByZXF1aXJlKCcuL2VudGl0aWVzL2Vfc2NlbmUnKTtcbnZhciBlX2NhbWVyYXZyID0gcmVxdWlyZSgnLi9lbnRpdGllcy9lX2NhbWVyYXZyJyk7XG52YXIgZV9ib3ggPSByZXF1aXJlKCcuL2VudGl0aWVzL2VfYm94Jyk7XG52YXIgZV9saWdodCA9IHJlcXVpcmUoJy4vZW50aXRpZXMvZV9saWdodCcpO1xudmFyIFJlcXVlc3QgPSByZXF1aXJlKCcuLi94aHIvUmVxdWVzdCcpO1xuLyoqXG4gKiAuLi5cbiAqIEBhdXRob3IgQnJlbmRvbiBTbWl0aFxuICogaHR0cDovL3NlYWNsb3VkOS5vcmdcbiAqIExpZ2h0V2VpZ2h0IDNEIFN5c3RlbSBEZXNpZ24gZW5naW5lXG4gKi9cbmNsYXNzIGxzZHtcblx0Y29uc3RydWN0b3IoKXtcblx0XHR0aGlzLl9kZWZhdWx0cyA9IHV0aWxzLmRlZmF1bHRBcmdzKCk7XG5cdFx0dGhpcy5fZGF0YSA9IG51bGw7XG5cdFx0dGhpcy5fY3J1cnJlbnRTY2VuZTtcblx0XHR0aGlzLl9lX3NjZW5lID0gbmV3IGVfc2NlbmUoKTtcblx0XHR0aGlzLl9lX2NhbWVyYXZyID0gbnVsbDtcblx0XHR0aGlzLndvcmxkID0gbmV3IENFUy5Xb3JsZCgpO1xuXHRcdHRoaXMud29ybGQuYWRkRW50aXR5KHRoaXMuX2Vfc2NlbmUuZW50aXR5KTtcblx0XHR0aGlzLnBpY2tJbnRlcnZhbCA9IDE7XG5cdFx0dGhpcy5jYW52YXM7XG5cdFx0dGhpcy5fYXNzZXRzID0gW107XG5cdFx0UHJvbWlzZS5hbGwoW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpXSkudGhlbih0aGlzLmluaXQuYXBwbHkodGhpcykpO1xuXHR9XG5cblx0aW5pdCgpe1xuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG5cdFx0dGhpcy5kZWZhdWx0cyA9IG5ldyBSZXF1ZXN0KFwiL2Fzc2V0cy9zY2VuZS9zY2VuZS5qc29uXCIsIHRoaXMuZGF0YUxvYWRlZC5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdGRhdGFMb2FkZWQoKXtcblx0XHRjb25zb2xlLmxvZyh0aGlzLmRlZmF1bHRzLmRhdGEpO1xuXHRcdHRoaXMuX2RhdGEgID0gdGhpcy5kZWZhdWx0cy5kYXRhO1xuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnZhc19pbml0JywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0dGhpcy5qc29uQXNzZXRzID0gdGhpcy5fZGF0YS5hc3NldHM7XG5cdFx0ICAgICAgICB0aGlzLl9jcnVycmVudFNjZW5lID0gdGhpcy5fZGVmYXVsdHMuX3NjZW5lID0gdGhpcy5fZV9zY2VuZS5zY2VuZS5zY2VuZTtcblx0XHRcdFx0dXRpbHMuYXNzZXRzTG9hZC5hcHBseSh0aGlzKTtcblx0XHR9LmJpbmQodGhpcyksIGZhbHNlKTtcblx0XHRcblx0fVxuXG5cdGluaXRMaXN0bmVycygpe1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIFx0dGhpcy5jYW52YXMuaGVpZ3RoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBcdFx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1x0XG5cdFx0ICAgICAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZS5nZXRFbmdpbmUoKS5yZXNpemUoKTtcblx0XHR9LmJpbmQodGhpcykpO1xuXHR9XG5cblx0YXNzZXRMb2FkaW5nRmluaXNoZWQoKXtcblx0XHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IHRoaXMuX2RhdGEuZW50aXRpZXMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX3NjZW5lID0gdGhpcy5fY3J1cnJlbnRTY2VuZTtcblx0XHRcdFx0XHRpZih0eXBlb2YgdGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fbWF0ZXJpYWwgIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX21hdGVyaWFsID0gdXRpbHMuZ2V0TWF0ZXJpYWxzKHRoaXMuX2RhdGEubWF0ZXJpYWxzLCB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLl9tYXRlcmlhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHR5cGVvZiB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLl9wb3NpdGlvbiAhPSB1bmRlZmluZWQpe1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcG9zaXRpb24gPSB1dGlscy5nZXRWZWN0b3IodGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcG9zaXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih0eXBlb2YgdGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcm90YXRpb24gIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX3JvdGF0aW9uID0gdXRpbHMuZ2V0VmVjdG9yKHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX3JvdGF0aW9uLCAncm90YXRpb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdFx0dmFyIGVudCA9IGV2YWwoXCJuZXcgXCIgKyB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLmVfdHlwZSArIFwiKHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMpXCIpO1xuXHRcdFx0XHRcdFx0dGhpcy53b3JsZC5hZGRFbnRpdHkoZW50LmVudGl0eSk7XG5cdFx0XHRcdFx0fWNhdGNoKGUpe1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZSArICcgLSBlcnJvciBsb2FkaW5nIGVudGl0eScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX25hbWUgPSAnY2FtZXJhJztcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX2NhbnZhcyA9IHRoaXMuY2FudmFzO1xuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fcG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDAsIDApO1xuXHRcdFx0XHR0aGlzLl9lX2NhbWVyYXZyID0gbmV3IGVfY2FtZXJhdnIodGhpcy5fZGVmYXVsdHMpO1xuXHRcdFx0XHR0aGlzLndvcmxkLmFkZEVudGl0eSh0aGlzLl9lX2NhbWVyYXZyLmVudGl0eSk7XG5cdFx0XHRcdHRoaXMuaW5pdFNjZW5lQW5pbWF0aW9uKCk7XG5cdFx0XHRcdHRoaXMuaW5pdExpc3RuZXJzKCk7XG5cdFx0ICAgICAgICBcblx0fVxuXG5cblxuXG5cdGluaXRTY2VuZUFuaW1hdGlvbigpe1xuXHRcdFx0dGhpcy50aWNrID0gMC4wMTtcblx0XHRcdHRoaXMuX2NydXJyZW50U2NlbmUuZ2V0RW5naW5lKCkucnVuUmVuZGVyTG9vcChmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLnRpY2sgKz0gLjAxO1xuXHRcdFx0d2luZG93LnRpY2sgPSB0aGlzLnRpY2s7XG5cdFx0XHRpZih0aGlzLnRpY2sgJSB0aGlzLnBpY2tJbnRlcnZhbCAgPD0gMC45ICYmIHRoaXMudGljayAlIHRoaXMucGlja0ludGVydmFsICA+PSAwLjg5KXtcblx0XHRcdFx0dGhpcy5fZV9jYW1lcmF2ci5jdXJzb3IucmF5UGljaygpO1xuXHRcdFx0fVxuXHRcdFx0aWYodGhpcy5fY3J1cnJlbnRTY2VuZS5hY3RpdmVDYW1lcmEpe1xuXHRcdFx0ICAgIHRoaXMuX2NydXJyZW50U2NlbmUucmVuZGVyKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLndvcmxkLnVwZGF0ZSh0aGlzLnRpY2spO1xuXHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0fVxufVxubW9kdWxlLmV4cG9ydHMgPSBsc2Q7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9