"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),CES=require("ces"),utils=require("./utils/utils"),entities=require("./entities"),Request=require("../xhr/Request"),lsd=function(){function lsd(){_classCallCheck(this,lsd),this._defaults=utils.defaultArgs(),this._data=null,this._crurrentScene,this._e_scene=new entities.e_scene,this._e_cameravr=null,this.world=new CES.World,this.world.addEntity(this._e_scene.entity),this.pickInterval=1,this.canvas,this._assets=[],Promise.all([document.querySelector("canvas")]).then(this.init.apply(this))}return _createClass(lsd,[{key:"init",value:function(){this.canvas=document.querySelector("canvas"),this.defaults=new Request("/assets/scene/scene.json",this.dataLoaded.bind(this))}},{key:"dataLoaded",value:function(){console.log(this.defaults.data),this._data=this.defaults.data,this.canvas.addEventListener("canvas_init",function(t){this.jsonAssets=this._data.assets,this._crurrentScene=this._defaults._scene=this._e_scene.scene.scene,utils.assetsLoad.apply(this)}.bind(this),!1)}},{key:"initListners",value:function(){window.addEventListener("resize",function(){this.canvas.heigth=window.innerHeight,this.canvas.width=window.innerWidth,this._crurrentScene.getEngine().resize()}.bind(this))}},{key:"assetLoadingFinished",value:function assetLoadingFinished(){for(var i=0;i<this._data.entities.length;i++){this._data.entities[i].defaults._scene=this._crurrentScene;try{this._data.entities[i].defaults=utils.merge_objects(eval("entities."+this._data.entities[i].defaults.e_type+".defaults()"),this._data.entities[i].defaults)}catch(e){console.log(e+" - error loading entity no defaults set")}void 0!=typeof this._data.entities[i].defaults._material&&(this._data.entities[i].defaults._material=utils.getMaterials(this._data.materials,this._data.entities[i].defaults._material)),void 0!=typeof this._data.entities[i].defaults._position&&(this._data.entities[i].defaults._position=utils.getVector(this._data.entities[i].defaults._position)),void 0!=typeof this._data.entities[i].defaults._rotation&&(this._data.entities[i].defaults._rotation=utils.getVector(this._data.entities[i].defaults._rotation,"rotation"));try{var ent=eval("new entities."+this._data.entities[i].defaults.e_type+"(this._data.entities[i].defaults)");this.world.addEntity(ent.entity)}catch(e){console.log(e+" - error loading entity")}}this._defaults._name="camera",this._defaults._canvas=this.canvas,this._defaults._position=new BABYLON.Vector3(0,0,0),this._e_cameravr=new entities.e_cameravr(this._defaults),this.world.addEntity(this._e_cameravr.entity),this.initSceneAnimation(),this.initListners()}},{key:"initSceneAnimation",value:function(){this.tick=.01,this._crurrentScene.getEngine().runRenderLoop(function(){this.tick+=.01,window.tick=this.tick,this.tick%this.pickInterval<=.9&&this.tick%this.pickInterval>=.89&&this._e_cameravr.cursor.rayPick(),this._crurrentScene.activeCamera&&(this.world.update(this.tick),this._crurrentScene.render())}.bind(this))}}]),lsd}();module.exports=lsd;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL2luZGV4LmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ0VTIiwicmVxdWlyZSIsInV0aWxzIiwiZW50aXRpZXMiLCJSZXF1ZXN0IiwibHNkIiwidGhpcyIsIl9kZWZhdWx0cyIsImRlZmF1bHRBcmdzIiwiX2RhdGEiLCJfY3J1cnJlbnRTY2VuZSIsIl9lX3NjZW5lIiwiZV9zY2VuZSIsIl9lX2NhbWVyYXZyIiwid29ybGQiLCJXb3JsZCIsImFkZEVudGl0eSIsImVudGl0eSIsInBpY2tJbnRlcnZhbCIsImNhbnZhcyIsIl9hc3NldHMiLCJQcm9taXNlIiwiYWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGhlbiIsImluaXQiLCJhcHBseSIsInZhbHVlIiwiZGVmYXVsdHMiLCJkYXRhTG9hZGVkIiwiYmluZCIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJqc29uQXNzZXRzIiwiYXNzZXRzIiwiX3NjZW5lIiwic2NlbmUiLCJhc3NldHNMb2FkIiwid2luZG93IiwiaGVpZ3RoIiwiaW5uZXJIZWlnaHQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJnZXRFbmdpbmUiLCJyZXNpemUiLCJhc3NldExvYWRpbmdGaW5pc2hlZCIsIm1lcmdlX29iamVjdHMiLCJldmFsIiwiZV90eXBlIiwidW5kZWZpbmVkIiwiX21hdGVyaWFsIiwiZ2V0TWF0ZXJpYWxzIiwibWF0ZXJpYWxzIiwiX3Bvc2l0aW9uIiwiZ2V0VmVjdG9yIiwiX3JvdGF0aW9uIiwiZW50IiwiX25hbWUiLCJfY2FudmFzIiwiQkFCWUxPTiIsIlZlY3RvcjMiLCJlX2NhbWVyYXZyIiwiaW5pdFNjZW5lQW5pbWF0aW9uIiwiaW5pdExpc3RuZXJzIiwidGljayIsInJ1blJlbmRlckxvb3AiLCJjdXJzb3IiLCJyYXlQaWNrIiwiYWN0aXZlQ2FtZXJhIiwidXBkYXRlIiwicmVuZGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsTUFGN2hCa0IsSUFBTUMsUUFBUSxPQUNkQyxNQUFRRCxRQUFRLGlCQUNoQkUsU0FBV0YsUUFBUSxjQUNuQkcsUUFBVUgsUUFBUSxrQkFTaEJJLElBQUcsV0FDRyxRQUROQSxPQVFKekIsZ0JBQWdCMEIsS0FSWkQsS0FFSkMsS0FBS0MsVUFBWUwsTUFBTU0sY0FDdkJGLEtBQUtHLE1BQVEsS0FDYkgsS0FBS0ksZUFDTEosS0FBS0ssU0FBVyxHQUFJUixVQUFTUyxRQUM3Qk4sS0FBS08sWUFBYyxLQUNuQlAsS0FBS1EsTUFBUSxHQUFJZCxLQUFJZSxNQUNyQlQsS0FBS1EsTUFBTUUsVUFB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LEtBQUs0RCxxQkFDTDVELEtBQUs2RCxrQkFlUHZFLElBQUsscUJBQ0xnQyxNQWJrQixXQUNoQnRCLEtBQUs4RCxLQUFPLElBQ1o5RCxLQUFLSSxlQUFlcUMsWUFBWXNCLGNBQWMsV0FDOUMvRCxLQUFLOEQsTUFBUSxJQUNiMUIsT0FBTzBCLEtBQU85RCxLQUFLOEQsS0FDaEI5RCxLQUFLOEQsS0FBTzlELEtBQUtZLGNBQWlCLElBQU9aLEtBQUs4RCxLQUFPOUQsS0FBS1ksY0FBaUIsS0FDN0VaLEtBQUtPLFlBQVl5RCxPQUFPQyxVQUV0QmpFLEtBQUtJLGVBQWU4RCxlQUN0QmxFLEtBQUtRLE1BQU0yRCxPQUFPbkUsS0FBSzhELE1BQ3BCOUQsS0FBS0ksZUFBZWdFLFdBRXhCM0MsS0FBS3pCLFdBcEZIRCxNQXVGTnNFLFFBQU9DLFFBQVV2RSIsImZpbGUiOiJjb3JlL2xzZC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDRVMgPSByZXF1aXJlKCdjZXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXRpbHMnKTtcbnZhciBlbnRpdGllcyA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTtcbnZhciBSZXF1ZXN0ID0gcmVxdWlyZSgnLi4veGhyL1JlcXVlc3QnKTtcblxuXG4vKipcbiAqIC4uLlxuICogQGF1dGhvciBCcmVuZG9uIFNtaXRoXG4gKiBodHRwOi8vc2VhY2xvdWQ5Lm9yZ1xuICogTGlnaHRXZWlnaHQgM0QgU3lzdGVtIERlc2lnbiBlbmdpbmVcbiAqL1xuY2xhc3MgbHNke1xuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMuX2RlZmF1bHRzID0gdXRpbHMuZGVmYXVsdEFyZ3MoKTtcblx0XHR0aGlzLl9kYXRhID0gbnVsbDtcblx0XHR0aGlzLl9jcnVycmVudFNjZW5lO1xuXHRcdHRoaXMuX2Vfc2NlbmUgPSBuZXcgZW50aXRpZXMuZV9zY2VuZSgpO1xuXHRcdHRoaXMuX2VfY2FtZXJhdnIgPSBudWxsO1xuXHRcdHRoaXMud29ybGQgPSBuZXcgQ0VTLldvcmxkKCk7XG5cdFx0dGhpcy53b3JsZC5hZGRFbnRpdHkodGhpcy5fZV9zY2VuZS5lbnRpdHkpO1xuXHRcdHRoaXMucGlja0ludGVydmFsID0gMTtcblx0XHR0aGlzLmNhbnZhcztcblx0XHR0aGlzLl9hc3NldHMgPSBbXTtcblx0XHRQcm9taXNlLmFsbChbZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyldKS50aGVuKHRoaXMuaW5pdC5hcHBseSh0aGlzKSk7XG5cdH1cblxuXHRpbml0KCl7XG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcblx0XHR0aGlzLmRlZmF1bHRzID0gbmV3IFJlcXVlc3QoXCIvYXNzZXRzL3NjZW5lL3NjZW5lLmpzb25cIiwgdGhpcy5kYXRhTG9hZGVkLmJpbmQodGhpcykpO1xuXHR9XG5cblx0ZGF0YUxvYWRlZCgpe1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuZGVmYXVsdHMuZGF0YSk7XG5cdFx0dGhpcy5fZGF0YSAgPSB0aGlzLmRlZmF1bHRzLmRhdGE7XG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2FudmFzX2luaXQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHR0aGlzLmpzb25Bc3NldHMgPSB0aGlzLl9kYXRhLmFzc2V0cztcblx0XHQgICAgICAgIHRoaXMuX2NydXJyZW50U2NlbmUgPSB0aGlzLl9kZWZhdWx0cy5fc2NlbmUgPSB0aGlzLl9lX3NjZW5lLnNjZW5lLnNjZW5lO1xuXHRcdFx0XHR1dGlscy5hc3NldHNMb2FkLmFwcGx5KHRoaXMpO1xuXHRcdH0uYmluZCh0aGlzKSwgZmFsc2UpO1xuXHRcdFxuXHR9XG5cblx0aW5pdExpc3RuZXJzKCl7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgXHR0aGlzLmNhbnZhcy5oZWlndGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIFx0XHRcdHRoaXMuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHRcblx0XHQgICAgICAgICAgICB0aGlzLl9jcnVycmVudFNjZW5lLmdldEVuZ2luZSgpLnJlc2l6ZSgpO1xuXHRcdH0uYmluZCh0aGlzKSk7XG5cdH1cblxuXHRhc3NldExvYWRpbmdGaW5pc2hlZCgpe1xuXHRcdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5fZGF0YS5lbnRpdGllcy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdFx0dGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fc2NlbmUgPSB0aGlzLl9jcnVycmVudFNjZW5lO1xuXHRcdFx0XHRcdHRyeXtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMgPSB1dGlscy5tZXJnZV9vYmplY3RzKGV2YWwoJ2VudGl0aWVzLicgKyB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLmVfdHlwZStcIi5kZWZhdWx0cygpXCIpLCB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzKTtcblx0XHRcdFx0XHR9Y2F0Y2goZSl7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlICsgJyAtIGVycm9yIGxvYWRpbmcgZW50aXR5IG5vIGRlZmF1bHRzIHNldCcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih0eXBlb2YgdGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fbWF0ZXJpYWwgIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX21hdGVyaWFsID0gdXRpbHMuZ2V0TWF0ZXJpYWxzKHRoaXMuX2RhdGEubWF0ZXJpYWxzLCB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLl9tYXRlcmlhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHR5cGVvZiB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLl9wb3NpdGlvbiAhPSB1bmRlZmluZWQpe1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcG9zaXRpb24gPSB1dGlscy5nZXRWZWN0b3IodGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcG9zaXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih0eXBlb2YgdGhpcy5fZGF0YS5lbnRpdGllc1tpXS5kZWZhdWx0cy5fcm90YXRpb24gIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX3JvdGF0aW9uID0gdXRpbHMuZ2V0VmVjdG9yKHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMuX3JvdGF0aW9uLCAncm90YXRpb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdFx0dmFyIGVudCA9IGV2YWwoXCJuZXcgZW50aXRpZXMuXCIgKyB0aGlzLl9kYXRhLmVudGl0aWVzW2ldLmRlZmF1bHRzLmVfdHlwZSArIFwiKHRoaXMuX2RhdGEuZW50aXRpZXNbaV0uZGVmYXVsdHMpXCIpO1xuXHRcdFx0XHRcdFx0dGhpcy53b3JsZC5hZGRFbnRpdHkoZW50LmVudGl0eSk7XG5cdFx0XHRcdFx0fWNhdGNoKGUpe1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZSArICcgLSBlcnJvciBsb2FkaW5nIGVudGl0eScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fbmFtZSA9ICdjYW1lcmEnO1xuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fY2FudmFzID0gdGhpcy5jYW52YXM7XG5cdFx0XHRcdHRoaXMuX2RlZmF1bHRzLl9wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCk7XG5cdFx0XHRcdHRoaXMuX2VfY2FtZXJhdnIgPSBuZXcgZW50aXRpZXMuZV9jYW1lcmF2cih0aGlzLl9kZWZhdWx0cyk7XG5cdFx0XHRcdHRoaXMud29ybGQuYWRkRW50aXR5KHRoaXMuX2VfY2FtZXJhdnIuZW50aXR5KTtcblx0XHRcdFx0dGhpcy5pbml0U2NlbmVBbmltYXRpb24oKTtcblx0XHRcdFx0dGhpcy5pbml0TGlzdG5lcnMoKTtcblx0fVxuXG5cdFx0aW5pdFNjZW5lQW5pbWF0aW9uKCl7XG5cdFx0XHRcdHRoaXMudGljayA9IDAuMDE7XG5cdFx0XHRcdHRoaXMuX2NydXJyZW50U2NlbmUuZ2V0RW5naW5lKCkucnVuUmVuZGVyTG9vcChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRoaXMudGljayArPSAuMDE7XG5cdFx0XHRcdHdpbmRvdy50aWNrID0gdGhpcy50aWNrO1xuXHRcdFx0XHRpZih0aGlzLnRpY2sgJSB0aGlzLnBpY2tJbnRlcnZhbCAgPD0gMC45ICYmIHRoaXMudGljayAlIHRoaXMucGlja0ludGVydmFsICA+PSAwLjg5KXtcblx0XHRcdFx0XHR0aGlzLl9lX2NhbWVyYXZyLmN1cnNvci5yYXlQaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodGhpcy5fY3J1cnJlbnRTY2VuZS5hY3RpdmVDYW1lcmEpe1xuXHRcdFx0XHRcdHRoaXMud29ybGQudXBkYXRlKHRoaXMudGljayk7XG5cdFx0XHRcdCAgICB0aGlzLl9jcnVycmVudFNjZW5lLnJlbmRlcigpO1xuXHRcdFx0XHR9XG5cdFx0fS5iaW5kKHRoaXMpKTtcblx0fVxufVxubW9kdWxlLmV4cG9ydHMgPSBsc2Q7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9