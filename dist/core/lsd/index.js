"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),CES=require("ces"),utils=require("./utils/utils"),e_scene=require("./entites/e_scene"),e_cameravr=require("./entites/e_cameravr"),e_box=require("./entites/e_box"),e_light=require("./entites/e_light"),lsd=function(){function e(){_classCallCheck(this,e),this._defaults=utils.defaultArgs(),this._crurrentScene,this._e_scene=new e_scene,this._e_cameravr=null,this.world=new CES.World,this.world.addEntity(this._e_scene.entity),this.pickInterval=1,this.canvas,this._assets=[],Promise.all([document.querySelector("canvas")]).then(this.init.apply(this))}return _createClass(e,[{key:"init",value:function(){this.canvas=document.querySelector("canvas"),this.canvas.addEventListener("canvas_init",function(e){this.jsonAssets=[{name:"grass",src:"/assets/img/grass.jpg",type:"image"}],this._crurrentScene=this._defaults._scene=this._e_scene.scene.scene,utils.assetsLoad.apply(this)}.bind(this),!1)}},{key:"initListners",value:function(){window.addEventListener("resize",function(){this.canvas.heigth=window.innerHeight,this.canvas.width=window.innerWidth,this._crurrentScene.getEngine().resize()}.bind(this))}},{key:"assetLoadingFinished",value:function(){this._defaults._name=this._defaults._type="box",this._defaults._diffuseColor=utils.color(),this._defaults._position=new BABYLON.Vector3(0,0,0);var e=new e_box(this._defaults);this.world.addEntity(e.entity),this._defaults._name=this._defaults._type="Hemispheric",this._defaults._position=new BABYLON.Vector3(0,10,0);var t=new e_light(this._defaults);this.world.addEntity(t.entity),this._defaults._name="camera",this._defaults._canvas=this.canvas,this._defaults._position=new BABYLON.Vector3(0,0,0),this._e_cameravr=new e_cameravr(this._defaults),this.world.addEntity(this._e_cameravr.entity),this.initSceneAnimation(),this.initListners()}},{key:"initSceneAnimation",value:function(){this.tick=.01,this._crurrentScene.getEngine().runRenderLoop(function(){this.tick+=.01,window.tick=this.tick,this.tick%this.pickInterval<=.9&&this.tick%this.pickInterval>=.89&&this._e_cameravr.cursor.rayPick(),this._crurrentScene.activeCamera&&this._crurrentScene.render(),this.world.update(this.tick)}.bind(this))}}]),e}();module.exports=lsd;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbHNkL2luZGV4LmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiQ0VTIiwicmVxdWlyZSIsInV0aWxzIiwiZV9zY2VuZSIsImVfY2FtZXJhdnIiLCJlX2JveCIsImVfbGlnaHQiLCJsc2QiLCJ0aGlzIiwiX2RlZmF1bHRzIiwiZGVmYXVsdEFyZ3MiLCJfY3J1cnJlbnRTY2VuZSIsIl9lX3NjZW5lIiwiX2VfY2FtZXJhdnIiLCJ3b3JsZCIsIldvcmxkIiwiYWRkRW50aXR5IiwiZW50aXR5IiwicGlja0ludGVydmFsIiwiY2FudmFzIiwiX2Fzc2V0cyIsIlByb21pc2UiLCJhbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aGVuIiwiaW5pdCIsImFwcGx5IiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImpzb25Bc3NldHMiLCJuYW1lIiwic3JjIiwidHlwZSIsIl9zY2VuZSIsInNjZW5lIiwiYXNzZXRzTG9hZCIsImJpbmQiLCJ3aW5kb3ciLCJoZWlndGgiLCJpbm5lckhlaWdodCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImdldEVuZ2luZSIsInJlc2l6ZSIsIl9uYW1lIiwiX3R5cGUiLCJfZGlmZnVzZUNvbG9yIiwiY29sb3IiLCJfcG9zaXRpb24iLCJCQUJZTE9OIiwiVmVjdG9yMyIsImJveCIsImxpZ2h0IiwiX2NhbnZhcyIsImluaXRTY2VuZUFuaW1hdGlvbiIsImluaXRMaXN0bmVycyIsInRpY2siLCJydW5SZW5kZXJMb29wIiwiY3Vyc29yIiwicmF5UGljayIsImFjdGl2ZUNhbWVyYSIsInJlbmRlciIsInVwZGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUEsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLGNBQWUsV0FBZSxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE1BRjdoQmtCLElBQU1DLFFBQVEsT0FDZEMsTUFBUUQsUUFBUSxpQkFDaEJFLFFBQVVGLFFBQVEscUJBQ2xCRyxXQUFhSCxRQUFRLHdCQUNyQkksTUFBUUosUUFBUSxtQkFDaEJLLFFBQVVMLFFBQVEscUJBT2hCTSxJQUFHLFdBQ0csUUFETkEsS0FTSjNCLGdCQUFnQjRCLEtBVFpELEdBRUpDLEtBQUtDLFVBQVlQLE1BQU1RLGNBQ3ZCRixLQUFLRyxlQUNMSCxLQUFLSSxTQUFXLEdBQUlULFNBQ3BCSyxLQUFLSyxZQUFjLEtBQ25CTCxLQUFLTSxNQUFRLEdBQUlkLEtBQUllLE1BQ3JCUCxLQUFLTSxNQUFNRSxVQUFVUixLQUFLSSxTQUFTSyxRQUNuQ1QsS0FBS1UsYUFBZSxFQUNwQlYsS0FBS1csT0FDTFgsS0FBS1ksV0FDTEMsUUFBUUMsS0FBS0MsU0FBU0MsY0FBYyxZQUFZQyxLQUFLakIsS0FBS2tCLEtBQUtDLE1BQU1uQixPQXNFdEUsTUExREF4QixjQXZCS3VCLElBd0JKWCxJQUFLLE9BQ0xnQyxNQVhHLFdBQ0ZwQixLQUFLVyxPQUFTSSxTQUFTQyxjQUFjLFVBQ3JDaEIsS0FBS1csT0FBT1UsaUJBQWlCLGNBQWUsU0FBVUMsR0FDckR0QixLQUFLdUIsYUFDTUMsS0FBTyxRQUFTQyxJQUFNLHdCQUF5QkMsS0FBTSxVQUUxRDFCLEtBQUtHLGVBQWlCSCxLQUFLQyxVQUFVMEIsT0FBUzNCLEtBQUtJLFNBQVN3QixNQUFNQSxNQUN4RWxDLE1BQU1tQyxXQUFXVixNQUFNbkIsT0FDdEI4QixLQUFLOUIsT0FBTyxNQVlmWixJQUFLLGVBQ0xnQyxNQVZXLFdBQ1hXLE9BQU9WLGlCQUFpQixTQUFVLFdBQ3pCckIsS0FBS1csT0FBT3FCLE9BQVNELE9BQU9FLFlBQzVCakMsS0FBS1csT0FBT3VCLE1BQVFILE9BQU9JLFdBQ3hCbkMsS0FBS0csZUFBZWlDLFlBQVlDLFVBQzFDUCxLQUFLOUIsVUFhUFosSUFBSyx1QkFDTGdDLE1BWG1CLFdBQ2pCcEIsS0FBS0MsVUFBVXFDLE1BQVN0QyxLQUFLQyxVQUFVc0MsTUFBUSxNQUUvQ3ZDLEtBQUtDLFVBQVV1QyxjQUFnQjlDLE1BQU0rQyxRQUNyQ3pDLEtBQUtDLFVBQVV5QyxVQUFZLEdBQUlDLFNBQVFDLFFBQVEsRUFBRyxFQUFHLEVBQ3JELElBQUlDLEdBQU0sR0FBSWhELE9BQU1HLEtBQUtDLFVBQ3pCRCxNQUFLTSxNQUFNRSxVQUFVcUMsRUFBSXBDLFFBQ3pCVCxLQUFLQyxVQUFVcUMsTUFBU3RDLEtBQUtDLFVBQVVzQyxNQUFRLGNBQy9DdkMsS0FBS0MsVUFBVXlDLFVBQVksR0FBSUMsU0FBUUMsUUFBUSxFQUFHLEdBQUksRUFDdEQsSUFBSUUsR0FBUSxHQUFJaEQsU0FBUUUsS0FBS0MsVUFDN0JELE1BQUtNLE1BQU1FLFVBQVVzQyxFQUFNckMsUUFDM0JULEtBQUtDLFVBQVVxQyxNQUFRLFNBQ3ZCdEMsS0FBS0MsVUFBVThDLFFBQVUvQyxLQUFLVyxPQUM5QlgsS0FBS0MsVUFBVXlDLFVBQVksR0FBSUMsU0FBUUMsUUFBUSxFQUFHLEVBQUcsR0FDckQ1QyxLQUFLSyxZQUFjLEdBQUlULFlBQVdJLEtBQUtDLFdBQ3ZDRCxLQUFLTSxNQUFNRSxVQUFVUixLQUFLSyxZQUFZSSxRQUN0Q1QsS0FBS2dELHFCQUNMaEQsS0FBS2lELGtCQWNQN0QsSUFBSyxxQkFDTGdDLE1BWGlCLFdBQ2hCcEIsS0FBS2tELEtBQU8sSUFDWmxELEtBQUtHLGVBQWVpQyxZQUFZZSxjQUFjLFdBQzlDbkQsS0FBS2tELE1BQVEsSUFDYm5CLE9BQU9tQixLQUFPbEQsS0FBS2tELEtBQ2hCbEQsS0FBS2tELEtBQU9sRCxLQUFLVSxjQUFpQixJQUFPVixLQUFLa0QsS0FBT2xELEtBQUtVLGNBQWlCLEtBQzdFVixLQUFLSyxZQUFZK0MsT0FBT0MsVUFFdEJyRCxLQUFLRyxlQUFlbUQsY0FDbkJ0RCxLQUFLRyxlQUFlb0QsU0FFeEJ2RCxLQUFLTSxNQUFNa0QsT0FBT3hELEtBQUtrRCxPQUNyQnBCLEtBQUs5QixXQWxFSkQsSUFxRU4wRCxRQUFPQyxRQUFVM0QiLCJmaWxlIjoiY29yZS9sc2QvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ0VTID0gcmVxdWlyZSgnY2VzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3V0aWxzJyk7XG52YXIgZV9zY2VuZSA9IHJlcXVpcmUoJy4vZW50aXRlcy9lX3NjZW5lJyk7XG52YXIgZV9jYW1lcmF2ciA9IHJlcXVpcmUoJy4vZW50aXRlcy9lX2NhbWVyYXZyJyk7XG52YXIgZV9ib3ggPSByZXF1aXJlKCcuL2VudGl0ZXMvZV9ib3gnKTtcbnZhciBlX2xpZ2h0ID0gcmVxdWlyZSgnLi9lbnRpdGVzL2VfbGlnaHQnKTtcbi8qKlxuICogLi4uXG4gKiBAYXV0aG9yIEJyZW5kb24gU21pdGhcbiAqIGh0dHA6Ly9zZWFjbG91ZDkub3JnXG4gKiBMaWdodFdlaWdodCAzRCBTeXN0ZW0gRGVzaWduIGVuZ2luZVxuICovXG5jbGFzcyBsc2R7XG5cdGNvbnN0cnVjdG9yKCl7XG5cdFx0dGhpcy5fZGVmYXVsdHMgPSB1dGlscy5kZWZhdWx0QXJncygpO1xuXHRcdHRoaXMuX2NydXJyZW50U2NlbmU7XG5cdFx0dGhpcy5fZV9zY2VuZSA9IG5ldyBlX3NjZW5lKCk7XG5cdFx0dGhpcy5fZV9jYW1lcmF2ciA9IG51bGw7XG5cdFx0dGhpcy53b3JsZCA9IG5ldyBDRVMuV29ybGQoKTtcblx0XHR0aGlzLndvcmxkLmFkZEVudGl0eSh0aGlzLl9lX3NjZW5lLmVudGl0eSk7XG5cdFx0dGhpcy5waWNrSW50ZXJ2YWwgPSAxO1xuXHRcdHRoaXMuY2FudmFzO1xuXHRcdHRoaXMuX2Fzc2V0cyA9IFtdO1xuXHRcdFByb21pc2UuYWxsKFtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKV0pLnRoZW4odGhpcy5pbml0LmFwcGx5KHRoaXMpKTtcblx0fVxuXG5cdGluaXQoKXtcblx0XHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG5cdFx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjYW52YXNfaW5pdCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdHRoaXMuanNvbkFzc2V0cyA9IFtcblx0XHQgICAgICAgICAgICB7bmFtZSA6IFwiZ3Jhc3NcIiwgc3JjIDogXCIvYXNzZXRzL2ltZy9ncmFzcy5qcGdcIiwgdHlwZTogJ2ltYWdlJyB9XG5cdFx0ICAgICAgICBdO1xuXHRcdCAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZSA9IHRoaXMuX2RlZmF1bHRzLl9zY2VuZSA9IHRoaXMuX2Vfc2NlbmUuc2NlbmUuc2NlbmU7XG5cdFx0XHRcdHV0aWxzLmFzc2V0c0xvYWQuYXBwbHkodGhpcyk7XG5cdFx0XHR9LmJpbmQodGhpcyksIGZhbHNlKTtcblx0fVxuXG5cdGluaXRMaXN0bmVycygpe1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIFx0dGhpcy5jYW52YXMuaGVpZ3RoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBcdFx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1x0XG5cdFx0ICAgICAgICAgICAgdGhpcy5fY3J1cnJlbnRTY2VuZS5nZXRFbmdpbmUoKS5yZXNpemUoKTtcblx0XHR9LmJpbmQodGhpcykpO1xuXHR9XG5cblx0YXNzZXRMb2FkaW5nRmluaXNoZWQoKXtcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX25hbWUgPSAgdGhpcy5fZGVmYXVsdHMuX3R5cGUgPSAnYm94Jztcblx0XHRcdFx0Ly90aGlzLl9kZWZhdWx0cy5fdGV4dHVyZSA9IHRoaXMuX2Fzc2V0c1tcImdyYXNzXCJdO1xuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fZGlmZnVzZUNvbG9yID0gdXRpbHMuY29sb3IoKTtcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX3Bvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLCAwLCAwKTtcblx0XHRcdFx0dmFyIGJveCA9IG5ldyBlX2JveCh0aGlzLl9kZWZhdWx0cyk7XG5cdFx0XHRcdHRoaXMud29ybGQuYWRkRW50aXR5KGJveC5lbnRpdHkpO1xuXHRcdFx0XHR0aGlzLl9kZWZhdWx0cy5fbmFtZSA9ICB0aGlzLl9kZWZhdWx0cy5fdHlwZSA9ICdIZW1pc3BoZXJpYyc7XG5cdFx0XHRcdHRoaXMuX2RlZmF1bHRzLl9wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMTAsIDApO1xuXHRcdFx0XHR2YXIgbGlnaHQgPSBuZXcgZV9saWdodCh0aGlzLl9kZWZhdWx0cyk7XG5cdFx0XHRcdHRoaXMud29ybGQuYWRkRW50aXR5KGxpZ2h0LmVudGl0eSk7XG5cdFx0XHRcdHRoaXMuX2RlZmF1bHRzLl9uYW1lID0gJ2NhbWVyYSc7XG5cdFx0XHRcdHRoaXMuX2RlZmF1bHRzLl9jYW52YXMgPSB0aGlzLmNhbnZhcztcblx0XHRcdFx0dGhpcy5fZGVmYXVsdHMuX3Bvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLCAwLCAwKTtcblx0XHRcdFx0dGhpcy5fZV9jYW1lcmF2ciA9IG5ldyBlX2NhbWVyYXZyKHRoaXMuX2RlZmF1bHRzKTtcblx0XHRcdFx0dGhpcy53b3JsZC5hZGRFbnRpdHkodGhpcy5fZV9jYW1lcmF2ci5lbnRpdHkpO1xuXHRcdFx0XHR0aGlzLmluaXRTY2VuZUFuaW1hdGlvbigpO1xuXHRcdFx0XHR0aGlzLmluaXRMaXN0bmVycygpO1xuXHRcdCAgICAgICAgXG5cdH1cblxuXHRpbml0U2NlbmVBbmltYXRpb24oKXtcblx0XHRcdHRoaXMudGljayA9IDAuMDE7XG5cdFx0XHR0aGlzLl9jcnVycmVudFNjZW5lLmdldEVuZ2luZSgpLnJ1blJlbmRlckxvb3AoZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy50aWNrICs9IC4wMTtcblx0XHRcdHdpbmRvdy50aWNrID0gdGhpcy50aWNrO1xuXHRcdFx0aWYodGhpcy50aWNrICUgdGhpcy5waWNrSW50ZXJ2YWwgIDw9IDAuOSAmJiB0aGlzLnRpY2sgJSB0aGlzLnBpY2tJbnRlcnZhbCAgPj0gMC44OSl7XG5cdFx0XHRcdHRoaXMuX2VfY2FtZXJhdnIuY3Vyc29yLnJheVBpY2soKTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuX2NydXJyZW50U2NlbmUuYWN0aXZlQ2FtZXJhKXtcblx0XHRcdCAgICB0aGlzLl9jcnVycmVudFNjZW5lLnJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy53b3JsZC51cGRhdGUodGhpcy50aWNrKTtcblx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdH1cbn1cbm1vZHVsZS5leHBvcnRzID0gbHNkOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==