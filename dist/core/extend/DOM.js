"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(Object(r)),a=0,o=i.length;o>a;a++){var u=i[a],s=Object.getOwnPropertyDescriptor(r,u);void 0!==s&&s.enumerable&&(t[u]=r[u])}}}return t}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,i=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var u,s=i(r.length),l=t(n)?Object(new n(s)):new Array(s),c=0;s>c;)u=r[c],l[c]=o?"undefined"==typeof a?o(u,c):o.call(a,u,c):u,c+=1;return l.length=s,l}}());var DOM=function(){function e(t){_classCallCheck(this,e);var n=document.querySelectorAll(t);this.length=n.length,this.children=[],Object.assign(this,n)}return _createClass(e,[{key:"each",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Array.from(this)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.call(o)}}catch(u){n=!0,r=u}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}return this}},{key:"hide",value:function(){return this.each(function(){this.style.display="none"})}},{key:"show",value:function(){return this.each(function(){this.style.display="block"})}},{key:"onVisible",value:function(e){return this.each(function(){if(CATAMARAN.core.DOM.isVisible(this))e.call(this);else var t=setInterval(function(){CATAMARAN.core.DOM.isVisible(this)&&(e.call(this),clearInterval(t))},50)})}},{key:"addClass",value:function(e){return this.each(function(){this.classList.add(e)})}},{key:"removeClass",value:function(e){return this.each(function(){this.classList.remove(e)})}},{key:"hasClass",value:function(e){return this[0].classList.contains(e)}},{key:"on",value:function(e,t){return this.each(function(){this.addEventListener(e,t,!1)})}},{key:"off",value:function(e,t){return this.each(function(){this.removeEventListener(e,t,!1)})}},{key:"width",value:function(){var e=void 0===arguments[0]?null:arguments[0],t=e;return null==t?this[0].offsetWidth:this.each(function(){this.style.width=t})}},{key:"height",value:function(){var e=void 0===arguments[0]?null:arguments[0],t=e;return null==t?this[0].offsetHeight:this.each(function(){this.style.height=t})}},{key:"css",value:function(e){var t=e;return this.each(function(){for(var e in t)this.style[e]=t[e]})}}],[{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}}]),e}();module.exports=DOM;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvZXh0ZW5kL0RPTS5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsImFzc2lnbiIsInZhbHVlIiwidW5kZWZpbmVkIiwidG8iLCJhcmd1bWVudHMiLCJuZXh0U291cmNlIiwia2V5c0FycmF5Iiwia2V5cyIsIm5leHRJbmRleCIsImxlbiIsIm5leHRLZXkiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiQXJyYXkiLCJmcm9tIiwidG9TdHIiLCJ0b1N0cmluZyIsImlzQ2FsbGFibGUiLCJmbiIsImNhbGwiLCJ0b0ludGVnZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsImlzRmluaXRlIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibWF4U2FmZUludGVnZXIiLCJwb3ciLCJ0b0xlbmd0aCIsIm1pbiIsIm1heCIsImFycmF5TGlrZSIsIkMiLCJ0aGlzIiwiaXRlbXMiLCJUIiwibWFwRm4iLCJrVmFsdWUiLCJBIiwiayIsIkRPTSIsInNlbGVjdG9yIiwiZWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGlsZHJlbiIsImNhbGxiYWNrIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJlbCIsImVyciIsImVhY2giLCJzdHlsZSIsImRpc3BsYXkiLCJDQVRBTUFSQU4iLCJjb3JlIiwiaXNWaXNpYmxlIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjb250YWlucyIsImV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ3IiwiX3ciLCJvZmZzZXRXaWR0aCIsIndpZHRoIiwiaCIsIl9oIiwib2Zmc2V0SGVpZ2h0IiwiaGVpZ2h0Iiwib2JqIiwiX29iaiIsIml0ZW0iLCJlbGVtZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQ0EsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsS0FGNWhCWSxRQUFPTSxRQUNWTixPQUFPQyxlQUFlRCxPQUFRLFVBQzVCSCxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsVUFBVSxFQUNWUSxNQUFPLFNBQVNmLEdBRWQsR0FBZWdCLFNBQVhoQixHQUFtQyxPQUFYQSxFQUMxQixLQUFNLElBQUlILFdBQVUsMENBSXRCLEtBQUssR0FERG9CLEdBQUtULE9BQU9SLEdBQ1BFLEVBQUksRUFBR0EsRUFBSWdCLFVBQVVm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QUFLLEdBQUc0QyxZQUVkNUMsS0FBS3lCLEtBQUssV0FDWHpCLEtBQUswQixNQUFNbUIsTUFBUUYsT0E4Q3ZCbEYsSUFBSyxTQUNMSyxNQTNDRSxXQTRDRSxHQTVDRGdGLEdBQUMvRSxTQUFBRSxVQUFBLEdBQUcsS0FBSUEsVUFBQSxHQUNUOEUsRUFBS0QsQ0FDVCxPQUFTLE9BQU5DLEVBQ1MvQyxLQUFLLEdBQUdnRCxhQUViaEQsS0FBS3lCLEtBQUssV0FDYnpCLEtBQUswQixNQUFNdUIsT0FBU0YsT0FpRHRCdEYsSUFBSyxNQUNMSyxNQTlDRCxTQUFFb0YsR0FDRCxHQUFJQyxHQUFPRCxDQUNYLE9BQU9sRCxNQUFLeUIsS0FBSyxXQUNmLElBQUksR0FBSTJCLEtBQVFELEdBQ2RuRCxLQUFLMEIsTUFBTTBCLEdBQVFELEVBQUtDLFVBbUQ1QjNGLElBQUssWUFDTEssTUE1SFksU0FBQ3VGLEdBQ2IsTUFBT0EsR0FBUVQsWUFBYyxHQUFLUyxFQUFRTCxhQUFlLE1BdkMzRHpDLElBcUhOK0MsUUFBT0MsUUFBVWhEIiwiZmlsZSI6ImNvcmUvZXh0ZW5kL0RPTS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vcG9seWZpbGwgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuaWYgKCFPYmplY3QuYXNzaWduKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QsICdhc3NpZ24nLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgZmlyc3QgYXJndW1lbnQgdG8gb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGlmIChuZXh0U291cmNlID09PSB1bmRlZmluZWQgfHwgbmV4dFNvdXJjZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG5leHRTb3VyY2UgPSBPYmplY3QobmV4dFNvdXJjZSk7XG5cbiAgICAgICAgdmFyIGtleXNBcnJheSA9IE9iamVjdC5rZXlzKE9iamVjdChuZXh0U291cmNlKSk7XG4gICAgICAgIGZvciAodmFyIG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4KyspIHtcbiAgICAgICAgICB2YXIgbmV4dEtleSA9IGtleXNBcnJheVtuZXh0SW5kZXhdO1xuICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuZXh0U291cmNlLCBuZXh0S2V5KTtcbiAgICAgICAgICBpZiAoZGVzYyAhPT0gdW5kZWZpbmVkICYmIGRlc2MuZW51bWVyYWJsZSkge1xuICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvO1xuICAgIH1cbiAgfSk7XG59XG4vLyBwb2x5ZmlsbCAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZnJvbVxuLy8gUHJvZHVjdGlvbiBzdGVwcyBvZiBFQ01BLTI2MiwgRWRpdGlvbiA2LCAyMi4xLjIuMVxuLy8gUmVmZXJlbmNlOiBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtYXJyYXkuZnJvbVxuaWYgKCFBcnJheS5mcm9tKSB7XG4gIEFycmF5LmZyb20gPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgdmFyIGlzQ2FsbGFibGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgfHwgdG9TdHIuY2FsbChmbikgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gICAgfTtcbiAgICB2YXIgdG9JbnRlZ2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgbnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgIGlmIChpc05hTihudW1iZXIpKSB7IHJldHVybiAwOyB9XG4gICAgICBpZiAobnVtYmVyID09PSAwIHx8ICFpc0Zpbml0ZShudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICAgIHJldHVybiAobnVtYmVyID4gMCA/IDEgOiAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpO1xuICAgIH07XG4gICAgdmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcbiAgICB2YXIgdG9MZW5ndGggPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhciBsZW4gPSB0b0ludGVnZXIodmFsdWUpO1xuICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGxlbiwgMCksIG1heFNhZmVJbnRlZ2VyKTtcbiAgICB9O1xuXG4gICAgLy8gVGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiB0aGUgZnJvbSBtZXRob2QgaXMgMS5cbiAgICByZXR1cm4gZnVuY3Rpb24gZnJvbShhcnJheUxpa2UvKiwgbWFwRm4sIHRoaXNBcmcgKi8pIHtcbiAgICAgIC8vIDEuIExldCBDIGJlIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgdmFyIEMgPSB0aGlzO1xuXG4gICAgICAvLyAyLiBMZXQgaXRlbXMgYmUgVG9PYmplY3QoYXJyYXlMaWtlKS5cbiAgICAgIHZhciBpdGVtcyA9IE9iamVjdChhcnJheUxpa2UpO1xuXG4gICAgICAvLyAzLiBSZXR1cm5JZkFicnVwdChpdGVtcykuXG4gICAgICBpZiAoYXJyYXlMaWtlID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFycmF5LmZyb20gcmVxdWlyZXMgYW4gYXJyYXktbGlrZSBvYmplY3QgLSBub3QgbnVsbCBvciB1bmRlZmluZWRcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIElmIG1hcGZuIGlzIHVuZGVmaW5lZCwgdGhlbiBsZXQgbWFwcGluZyBiZSBmYWxzZS5cbiAgICAgIHZhciBtYXBGbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCB1bmRlZmluZWQ7XG4gICAgICB2YXIgVDtcbiAgICAgIGlmICh0eXBlb2YgbWFwRm4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIDUuIGVsc2UgICAgICBcbiAgICAgICAgLy8gNS4gYSBJZiBJc0NhbGxhYmxlKG1hcGZuKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoIWlzQ2FsbGFibGUobWFwRm4pKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkuZnJvbTogd2hlbiBwcm92aWRlZCwgdGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIGIuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgVCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyAxMC4gTGV0IGxlblZhbHVlIGJlIEdldChpdGVtcywgXCJsZW5ndGhcIikuXG4gICAgICAvLyAxMS4gTGV0IGxlbiBiZSBUb0xlbmd0aChsZW5WYWx1ZSkuXG4gICAgICB2YXIgbGVuID0gdG9MZW5ndGgoaXRlbXMubGVuZ3RoKTtcblxuICAgICAgLy8gMTMuIElmIElzQ29uc3RydWN0b3IoQykgaXMgdHJ1ZSwgdGhlblxuICAgICAgLy8gMTMuIGEuIExldCBBIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgQyB3aXRoIGFuIGFyZ3VtZW50IGxpc3QgY29udGFpbmluZyB0aGUgc2luZ2xlIGl0ZW0gbGVuLlxuICAgICAgLy8gMTQuIGEuIEVsc2UsIExldCBBIGJlIEFycmF5Q3JlYXRlKGxlbikuXG4gICAgICB2YXIgQSA9IGlzQ2FsbGFibGUoQykgPyBPYmplY3QobmV3IEMobGVuKSkgOiBuZXcgQXJyYXkobGVuKTtcblxuICAgICAgLy8gMTYuIExldCBrIGJlIDAuXG4gICAgICB2YXIgayA9IDA7XG4gICAgICAvLyAxNy4gUmVwZWF0LCB3aGlsZSBrIDwgbGVu4oCmIChhbHNvIHN0ZXBzIGEgLSBoKVxuICAgICAgdmFyIGtWYWx1ZTtcbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIGtWYWx1ZSA9IGl0ZW1zW2tdO1xuICAgICAgICBpZiAobWFwRm4pIHtcbiAgICAgICAgICBBW2tdID0gdHlwZW9mIFQgPT09ICd1bmRlZmluZWQnID8gbWFwRm4oa1ZhbHVlLCBrKSA6IG1hcEZuLmNhbGwoVCwga1ZhbHVlLCBrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBBW2tdID0ga1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGsgKz0gMTtcbiAgICAgIH1cbiAgICAgIC8vIDE4LiBMZXQgcHV0U3RhdHVzIGJlIFB1dChBLCBcImxlbmd0aFwiLCBsZW4sIHRydWUpLlxuICAgICAgQS5sZW5ndGggPSBsZW47XG4gICAgICAvLyAyMC4gUmV0dXJuIEEuXG4gICAgICByZXR1cm4gQTtcbiAgICB9O1xuICB9KCkpO1xufVxuXG5cbmNsYXNzIERPTSB7XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIEV4dGVuZGluZyBhbiBodG1sIGVsZW1lbnQgYWNjZXB0cyBhcnJheSBvZiBlbGVtZW50cy5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7YXJyYXl9IHNlbGVjdG9yIGFjY2VwdHMganF1ZXJ5IGxpa2Ugc2VsZWN0b3IuXG4gICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGVsZW1lbnRzKTtcbiAgICB9XG5cbiAgLyoqXG4gICAqIGxvb3BzIHRob3VnaCBldmVyeSBlbGVtZW50IGxpa2UganF1ZXJ5XG4gICAqIEBlYWNoXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259ICB0aGlzIGlzIHRoZSBjYWxsYmFja1xuICAgKi9cbiAgICBlYWNoKCBjYWxsYmFjayApIHtcbiAgICAgICAgZm9yICggbGV0IGVsIG9mIEFycmF5LmZyb20odGhpcykgKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKCBlbCApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgaGlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc1Zpc2libGUoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRXaWR0aCA+IDAgJiYgZWxlbWVudC5vZmZzZXRIZWlnaHQgPiAwO1xuICAgIH1cbiAgICBcbiAgICBvblZpc2libGUoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChDQVRBTUFSQU4uY29yZS5ET00uaXNWaXNpYmxlKHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChDQVRBTUFSQU4uY29yZS5ET00uaXNWaXNpYmxlKHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBhZGRDbGFzcyggY2xhc3NOYW1lICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZW1vdmVDbGFzcyggY2xhc3NOYW1lICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhc0NsYXNzKCBjbGFzc05hbWUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICBcbiAgICBvbiggZXZlbnQsIGNhbGxiYWNrICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgb2ZmKCBldmVudCwgY2FsbGJhY2sgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHdpZHRoKHcgPSBudWxsKXtcbiAgICAgIHZhciBfdyA9IHc7XG4gICAgICBpZihfdyA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzWzBdLm9mZnNldFdpZHRoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUud2lkdGggPSBfdztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGVpZ2h0KGggPSBudWxsKXtcbiAgICAgIHZhciBfaCA9IGg7XG4gICAgICBpZihfaCA9PSBudWxsKXtcbiAgICAgICAgICAgcmV0dXJuIHRoaXNbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IF9oO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjc3MoIG9iaiApIHtcbiAgICAgICAgdmFyIF9vYmogPSBvYmo7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm9yKHZhciBpdGVtIGluIF9vYmope1xuICAgICAgICAgICAgdGhpcy5zdHlsZVtpdGVtXSA9IF9vYmpbaXRlbV07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBET007Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9